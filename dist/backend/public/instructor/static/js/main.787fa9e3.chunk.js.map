{"version":3,"sources":["assets/logo.jpg","app/Navbar.js","app/NotFoundPage.js","app/Footer.js","services/auth.js","app/ProtectedRoute.js","utils.js","services/http.js","services/LearnerServiceSingleton.js","components/learners/AllLearnersPage.js","components/learners/PBTable.js","components/factoryComponent.js","components/ActionNotificationDiv.js","components/learners/LearnersPanel.js","components/learners/LearnerNameList.js","components/learners/PersonalBestsForm.js","components/learners/LearnerSearchInput.js","components/schedules/myExcelReader.js","services/ProgrammeServiceSingleton.js","components/schedules/ScheduleUploader.js","components/schedules/FileUploader.js","components/schedules/ProgrammeOptions.js","services/validateCredentials.js","services/InstructorServiceSingleton.js","components/home/HomePanel.js","components/home/WelcomePanel.js","components/home/Logo.js","components/home/LoginFormTextInput.js","components/home/LoginFormButton.js","components/home/LoginForm.js","App.js","app/store.js","index.js"],"names":["module","exports","NavLink","to","label","className","Navbar","navLinks","links","map","key","NotFoundPage","Footer","UserAuth","sessionStorage","getItem","token","setItem","removeItem","ProtectedRoute","Component","component","console","log","isAuthenticated","pathname","catchAsync","asyncFunc","errorHandler","a","shallowEqual","obj1","obj2","Object","entries","every","obj1Key","obj1Value","hasOwnProperty","spinner","show","status","document","querySelector","style","display","safeSpinnerWrapper","func","res","HttpServiceSingleton","this","fetchProgrammes","_fetchJsonFactory","postInstructorCredentials","_fetchPostFactory","postNewSchedule","_instance","resourceUrl","BASE_URL","returnJson","url","_makeUrl","payload","options","method","mode","headers","Authorization","getToken","body","JSON","stringify","fetch","response","json","ok","resourceId","asyncFetchFunc","setInterval","window","location","href","split","includes","getInstance","LearnerServiceSingleton","updateLearner","deleteLearner","createLearner","selectedLearner","_fetchPutFactory","learner","learnerId","_fetchDeleteFactory","getLearnerInstance","AllLearnersPage","useState","learners","setLearners","useEffect","httpService","fetchLearners","length","PBTable","rawData","keys","reduce","acc","k","Header","camelCaseStr","str","char","index","toUpperCase","accessor","makeTableData","rawColumns","data","useMemo","columns","useTable","getTableProps","getTableBodyProps","headerGroups","rows","prepareRow","headerGroup","getHeaderGroupProps","column","getHeaderProps","render","row","getRowProps","cells","cell","suppressContentEditableWarning","contentEditable","getCellProps","FetchNotificationDivFactory","resourceName","postFetchAction","isFetchSuccess","ActionNotificationDiv","message","actionStatus","onCloseActionStatusDiv","action","isActionSuccess","onClick","LearnersPanel","displayedLearners","setDisplayedLearners","searchPhrase","setSearchPhrase","setSelectedLearner","canEditAndUpdate","setCanEditAndUpdate","setActionStatus","setIsFetchSuccess","FetchLearnersNotificationDiv","filterLearners","phrase","processedPhrase","trim","toLowerCase","filter","firstName","lastName","startsWith","updateUILearnerList","updatedLearnerIndex","newLearnersList","splice","getUpdatedLearnerIndex","findIndex","e","confirm","isUpdated","LearnerSearchInput","onSearchPhraseChanged","target","value","onLearnerItemClicked","id","selected","getAttribute","find","parseInt","PersonalBestsForm","onPersonalBestsInputChange","changedField","newValue","newSelectedLearner","onUpdatePersonalBests","enableEditAndUpdate","onDeleteLearner","LearnerNameList","learnerItems","learnerid","PersonalBestInput","props","htmlFor","name","inputs","fieldName","type","onChange","readOnly","opacity","onDoubleClick","disabled","flexDirection","placeholder","myExcelReader","programmeId","f","reader","FileReader","makeTimeTable","exercisesArr","aggregate","prevPair","pairs","week","day","push","getWeekDayPair","forEach","dayInWeek","w","d","exercise","instruction","undefined","onload","event","result","workbook","XLSX","read","scheduleName","timetable","weekCount","SheetNames","sheetName","XL_row_object","utils","sheet_to_json","Sheets","getElementById","innerHTML","Math","max","apply","substring","fetchService","success","onerror","error","code","readAsArrayBufferPromise","readAsArrayBuffer","args","Promise","resolve","reject","err","call","ProgrammeServiceSingleton","getProgrammeInstance","ScheduleUploader","programmes","setProgrammes","selectedProgrammeId","setSelectedProgrammeId","FetchProgrammesNotificationDiv","p","programmeName","ProgrammeOptions","onProgrammeSelected","FileUploader","onFileUploaded","selectedFile","files","then","accept","isNotEmpty","validateCredentials","email","password","test","isValidEmail","InstructorServiceSingleton","instructorLogin","credentials","getInstructorInstance","HomePanel","setCredentials","errorMessage","setErrorMessage","isLoggedIn","setIsLoggedIn","onInputChanged","c","preventDefault","oke","saveToken","fields","LoginFormTextInput","Logo","WelcomePanel","onLogOutClicked","clearToken","LoginForm","onFormSubmitted","LoginFormButton","customClassName","src","require","alt","fieldValue","ErrorMessageDiv","visibility","onSubmit","App","exact","path","configureStore","reducer","ReactDOM","StrictMode","store"],"mappings":"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","file":"static/js/main.787fa9e3.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.226e3c4c.jpg\";","import React from \"react\"\nimport { Link } from \"react-router-dom\"\n\nfunction NavLink({ to, label }) {\n  return (\n    <Link to={to} className=\"nav-item\">\n      {label}\n    </Link>\n  )\n}\n\n//https://reactrouter.com/web/api/Redirect\nexport const Navbar = ({ links }) => {\n  let navLinks = links.map(({ to, label }) => (\n    <NavLink key={to} to={to} label={label} />\n  ))\n\n  return (\n    <nav className=\"header index\">\n      <section>\n        <div className=\"navContent\">\n          <header>\n            <h1 className=\"main-title\">Otago Weightlifting Instructor Space</h1>\n          </header>\n          <div className=\"navLinks\">{navLinks}</div>\n        </div>\n      </section>\n    </nav>\n  )\n}\n","import React from 'react'\n\nexport function NotFoundPage() {\n  return <div>You're lost!</div>\n}\n","import React from \"react\"\n\nexport function Footer() {\n  return (\n    <footer className=\"footer index\">\n      <div className=\"footer-text-wrapper\">\n        Otago Weightlifting 2020. All Rights Reserved\n      </div>\n    </footer>\n  )\n}\n","export class UserAuth {\n  static isAuthenticated() {\n    return sessionStorage.getItem(\"token\") !== null\n  }\n\n  static saveToken(token) {\n    sessionStorage.setItem(\"token\", token)\n  }\n\n  static getToken() {\n    return sessionStorage.getItem(\"token\")\n  }\n\n  static clearToken() {\n    sessionStorage.removeItem(\"token\")\n  }\n}\n","import React from \"react\"\nimport { Redirect } from \"react-router-dom\"\nimport { UserAuth } from \"../services/auth\"\n\nexport function ProtectedRoute({ component }) {\n  const Component = component\n  console.log(\"Checking\", UserAuth.isAuthenticated())\n  return UserAuth.isAuthenticated() ? (\n    <Component />\n  ) : (\n    <Redirect to={{ pathname: \"/\" }} />\n  )\n}\n","export function camelCaseToNormal(camelCaseStr) {\n  return camelCaseStr.split(\"\").reduce((str, char, index) => {\n    //first letter is uppercased and returned\n    if (index === 0) {\n      return char.toUpperCase()\n    }\n    //if a letter is uppercase, add a space in front\n    if (char === char.toUpperCase()) {\n      return str + \" \" + char\n    } else {\n      return str + char\n    }\n  }, \"\")\n}\n\n//async error handler decorator\nexport function catchAsync(asyncFunc, errorHandler = null) {\n  return async function (...args) {\n    try {\n      return await asyncFunc(...args)\n    } catch (error) {\n      errorHandler?.(error) ?? console.log(`Something went wrong: ${error}`)\n    }\n  }\n}\n\nexport function shallowEqual(obj1, obj2) {\n  return Object.entries(obj1).every(([obj1Key, obj1Value]) => {\n    return obj2.hasOwnProperty(obj1Key) && obj1Value === obj2[obj1Key]\n  })\n}\n\nexport const spinner = (function () {\n  function show(status) {\n    if (status === true) {\n      console.log(\"Show spinner now!\")\n      document.querySelector(\"#spinner\").style.display = \"block\"\n    } else {\n      document.querySelector(\"#spinner\").style.display = \"none\"\n      console.log(\"Hide spinner\")\n    }\n  }\n  return { show }\n})()\n\nexport function safeSpinnerWrapper(func) {\n  return async function (...args) {\n    spinner.show(true)\n    const res = await catchAsync(func)(...args)\n    spinner.show(false)\n    return res\n  }\n}\n","import { catchAsync } from \"../utils\"\nimport { UserAuth } from \"./auth\"\n\n//https://dmitripavlutin.com/javascript-fetch-async-await/\nexport class HttpServiceSingleton {\n  //TODO: these methods can be refactored into their own service class as well\n  constructor() {\n    //hide away implementation details from the client components\n    this.fetchProgrammes = HttpServiceSingleton._fetchJsonFactory(\"programmes\")\n    this.postInstructorCredentials = HttpServiceSingleton._fetchPostFactory(\n      \"instructor/login\",\n      true\n    )\n    this.postNewSchedule = HttpServiceSingleton._fetchPostFactory(\n      \"programmes/schedules\"\n    )\n    //make sure that only an instance is created\n    this._instance = this\n    if (HttpServiceSingleton._instance) {\n      return this._instance\n    }\n  }\n\n  static BASE_URL = (function () {\n    const PROD = \"https://lifting-schedule-v2.herokuapp.com\"\n    const DEV = \"http://localhost:5000\"\n\n    return window.location.href.split(\".\").includes(\"herokuapp\") ? PROD : DEV\n  })()\n\n  static _makeUrl(resourceUrl) {\n    return `${this.BASE_URL}/${resourceUrl}`\n  }\n\n  //factory functions that makes use of closure\n  static _fetchPostFactory(resourceUrl, returnJson = false) {\n    const url = HttpServiceSingleton._makeUrl(resourceUrl)\n    return catchAsync(async function (payload) {\n      const options = {\n        method: \"POST\",\n        mode: \"cors\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${UserAuth.getToken()}`,\n        },\n        body: JSON.stringify(payload),\n      }\n\n      if (returnJson) {\n        const response = await fetch(url, options)\n        const json = await response.json()\n        return [response.ok, json]\n      }\n      const { ok } = await fetch(url, options)\n      return ok\n    })\n  }\n\n  static _fetchPutFactory(resourceUrl) {\n    const url = HttpServiceSingleton._makeUrl(resourceUrl)\n    return catchAsync(async function (payload) {\n      const options = {\n        method: \"PUT\",\n        mode: \"cors\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${UserAuth.getToken()}`,\n        },\n        body: JSON.stringify(payload),\n      }\n      const { ok } = await fetch(url, options)\n      return ok\n    })\n  }\n\n  static _fetchJsonFactory(resourceUrl) {\n    const url = HttpServiceSingleton._makeUrl(resourceUrl)\n    return catchAsync(async function () {\n      const response = await fetch(url, {\n        headers: {\n          Authorization: `Bearer ${UserAuth.getToken()}`,\n        },\n      })\n      return response.json()\n    })\n  }\n\n  static _fetchDeleteFactory(resourceUrl) {\n    const url = HttpServiceSingleton._makeUrl(resourceUrl)\n    return catchAsync(async function (resourceId) {\n      const options = {\n        method: \"DELETE\",\n        mode: \"cors\",\n        headers: {\n          Authorization: `Bearer ${UserAuth.getToken()}`,\n        },\n      }\n      const { ok } = await fetch(`${url}/${resourceId}`, options)\n      return ok\n    })\n  }\n\n  //FIXME: how to implement retry?\n  static _retryFetch(asyncFetchFunc) {\n    setInterval(async () => {\n      console.log(\"Refetching ...\")\n      return catchAsync(asyncFetchFunc())\n    }, 5000)\n  }\n\n  static getInstance() {\n    return HttpServiceSingleton._instance || new HttpServiceSingleton()\n  }\n}\n\n//only export an instance (singleton)\nexport default HttpServiceSingleton.getInstance()\n","import { HttpServiceSingleton } from \"./http\"\nimport { safeSpinnerWrapper } from \"../utils\"\n\nexport class LearnerServiceSingleton extends HttpServiceSingleton {\n  constructor() {\n    super()\n    console.log(\"New LearnerServiceSingleton!\")\n    this.updateLearner = safeSpinnerWrapper(this.updateLearner)\n    this.deleteLearner = safeSpinnerWrapper(this.deleteLearner)\n    this.createLearner = safeSpinnerWrapper(this.createLearner)\n    this._instance = this\n    if (LearnerServiceSingleton._instance) {\n      return this._instance\n    }\n  }\n\n  async fetchLearners() {\n    console.log(`Fetching Learners`)\n    const res = await LearnerServiceSingleton._fetchJsonFactory(\"learners\")()\n    return res ? res : false\n  }\n\n  async updateLearner(selectedLearner) {\n    console.log(`Sending ${JSON.stringify(selectedLearner)}`)\n    const res = await LearnerServiceSingleton._fetchPutFactory(\n      \"learners/details\"\n    )({\n      learner: selectedLearner,\n    })\n    return res ? res : false\n  }\n\n  async deleteLearner(learnerId) {\n    console.log(\"Delete learner id \", learnerId)\n    const res = await LearnerServiceSingleton._fetchDeleteFactory(\"learners\")(\n      learnerId\n    )\n    return res ? res : false\n  }\n\n  async createLearner(learner) {\n    console.log(`Sending new learner ${JSON.stringify(learner)}`)\n    const res = await LearnerServiceSingleton._fetchPostFactory(\"learners\")({\n      learner: learner,\n    })\n    return res ? res : false\n  }\n\n  static getLearnerInstance() {\n    return LearnerServiceSingleton._instance || new LearnerServiceSingleton()\n  }\n}\n\nexport default LearnerServiceSingleton.getLearnerInstance()\n","import React, { useEffect, useState } from \"react\"\nimport { PBTable } from \"./register\"\nimport httpService from \"../../services/LearnerServiceSingleton\"\n\nexport function AllLearnersPage() {\n  const [learners, setLearners] = useState([])\n\n  useEffect(() => {\n    async function fetchLearners() {\n      const payload = await httpService.fetchLearners()\n      setLearners(payload)\n    }\n    fetchLearners()\n  }, [])\n\n  return (\n    <div>\n      <h2>Learners</h2>\n      {learners.length === 0 ? (\n        <div>Fetching ...</div>\n      ) : (\n        <PBTable payload={learners} />\n      )}\n    </div>\n  )\n}\n","import React, { useMemo } from \"react\"\nimport { useTable } from \"react-table\"\n\nfunction camelCaseToNormal(camelCaseStr) {\n  return camelCaseStr.split(\"\").reduce((str, char, index) => {\n    //first letter is uppercased and returned\n    if (index === 0) {\n      return char.toUpperCase()\n    }\n    //if a letter is uppercase, add a space in front\n    if (char === char.toUpperCase()) {\n      return str + \" \" + char\n    } else {\n      return str + char\n    }\n  }, \"\")\n}\n\n//TODO: this is a good candidate for a decorator?\n\nfunction makeTableData(rawData) {\n  const rawColumns = Object.keys(rawData[0]).reduce((acc, k) => {\n    if (k === \"learnerId\") {\n      return acc\n    }\n    return [...acc, { Header: camelCaseToNormal(k), accessor: k }]\n  }, [])\n\n  return [rawData, rawColumns]\n}\n\nexport function PBTable({ payload }) {\n  //object with key-value = header cell-val\n  const [rawData, rawColumns] = makeTableData(payload)\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const data = useMemo(() => rawData, [])\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const columns = useMemo(() => rawColumns, [])\n\n  const {\n    getTableProps,\n    getTableBodyProps,\n    headerGroups,\n    rows,\n    prepareRow,\n  } = useTable({ columns, data })\n  return (\n    // apply the table props\n    <table {...getTableProps()} className=\"learner-table\">\n      <thead>\n        {\n          // Loop over the header rows\n          headerGroups.map((headerGroup) => (\n            // Apply the header row props\n            <tr {...headerGroup.getHeaderGroupProps()}>\n              {\n                // Loop over the headers in each row\n                headerGroup.headers.map((column) => (\n                  // Apply the header cell props\n                  <th\n                    className=\"learner-table-cell head\"\n                    {...column.getHeaderProps()}\n                  >\n                    {\n                      // Render the header\n                      column.render(\"Header\")\n                    }\n                  </th>\n                ))\n              }\n            </tr>\n          ))\n        }\n      </thead>\n      {/* Apply the table body props */}\n      <tbody {...getTableBodyProps()}>\n        {\n          // Loop over the table rows\n          rows.map((row) => {\n            // Prepare the row for display\n            prepareRow(row)\n            return (\n              // Apply the row props\n              <tr {...row.getRowProps()}>\n                {\n                  // Loop over the rows cells\n                  row.cells.map((cell) => {\n                    // Apply the cell props\n                    return (\n                      <td\n                        suppressContentEditableWarning={true}\n                        contentEditable=\"true\" //does this update the state though? This doesn't update the state since React is not keeping track of actual DOM changes\n                        className=\"learner-table-cell\"\n                        {...cell.getCellProps()}\n                      >\n                        {\n                          // Render the cell contents\n                          cell.render(\"Cell\")\n                        }\n                      </td>\n                    )\n                  })\n                }\n              </tr>\n            )\n          })\n        }\n      </tbody>\n    </table>\n  )\n}\n","import React from \"react\"\n\nexport function FetchNotificationDivFactory(\n  resourceName = null,\n  postFetchAction = null\n) {\n  return function ({ isFetchSuccess }) {\n    //NOTE: a factory function for customizing a notification div based on the kind of payload\n\n    switch (isFetchSuccess) {\n      default:\n        return <div>Loading {resourceName ? resourceName : \"data\"} ...</div>\n      case true:\n        return (\n          <div>\n            {postFetchAction ? postFetchAction : \"Finished loading data!\"}\n          </div>\n        )\n      case false:\n        return <div>Failed to load {resourceName ? resourceName : \"data\"}</div>\n    }\n  }\n}\n","import React from \"react\"\n\nexport function ActionNotificationDiv({\n  actionStatus,\n  onCloseActionStatusDiv,\n}) {\n  const { action, isActionSuccess } = actionStatus\n\n  let message\n  let display = \"\"\n\n  if (!action) {\n    display = \"none\"\n  } else {\n    switch (isActionSuccess) {\n      default:\n        message = `Applying ${action.toUpperCase()} ...`\n        break\n      case true:\n        message = `${action.toUpperCase()} Successful!`\n        break\n      case false:\n        message = `Failed to load ${action.toUpperCase()}`\n        break\n    }\n  }\n\n  return (\n    <div className=\"action-status-div\" style={{ display: display }}>\n      <div>{message}</div>\n      <span className=\"action-status-close\" onClick={onCloseActionStatusDiv}>\n        X\n      </span>\n    </div>\n  )\n}\n","import React, { useState, useEffect } from \"react\"\n\nimport { PersonalBestsForm, LearnerSearchInput } from \"./register\"\nimport { FetchNotificationDivFactory } from \"../factoryComponent\"\nimport { ActionNotificationDiv } from \"../ActionNotificationDiv\"\n\nimport httpService from \"../../services/LearnerServiceSingleton\"\nimport { shallowEqual } from \"../../utils\"\n\nexport function LearnersPanel() {\n  const [learners, setLearners] = useState([])\n  const [displayedLearners, setDisplayedLearners] = useState([])\n  const [searchPhrase, setSearchPhrase] = useState(\"\")\n  const [selectedLearner, setSelectedLearner] = useState(null)\n  const [canEditAndUpdate, setCanEditAndUpdate] = useState(false)\n  const [actionStatus, setActionStatus] = useState({\n    action: null,\n    isActionSuccess: null,\n  })\n\n  //maybe these can be combined into a useNotification hook?\n  const [isFetchSuccess, setIsFetchSuccess] = useState(null)\n  const FetchLearnersNotificationDiv = FetchNotificationDivFactory(\n    \"learners\",\n    \"Click On A Name\"\n  )\n\n  function onCloseActionStatusDiv(e) {\n    setActionStatus({ action: null, isActionSuccess: null })\n  }\n\n  function filterLearners(learners, phrase) {\n    const processedPhrase = phrase.trim().toLowerCase()\n\n    if (processedPhrase.length === 0) return learners\n\n    return learners.filter(\n      ({ firstName, lastName }) =>\n        firstName.toLowerCase().trim().startsWith(processedPhrase) ||\n        lastName.toLowerCase().trim().startsWith(processedPhrase)\n    )\n  }\n\n  function getLearnerById(id) {\n    //avoid filter if ur searching for just one and all items are unique\n    return learners.find(({ learnerId }) => learnerId === parseInt(id))\n  }\n\n  function onSearchPhraseChanged(e) {\n    const phrase = e.target.value\n\n    //the two operations are not synchronous!\n    setSearchPhrase(e.target.value)\n    //dont set it using the searchPhrase because React may not have updated it with the new value\n    setDisplayedLearners(filterLearners(learners, phrase))\n  }\n\n  function onLearnerItemClicked(e) {\n    const selected = getLearnerById(e.target.getAttribute(\"learnerId\"))\n    setSelectedLearner(selected)\n  }\n\n  function onPersonalBestsInputChange(e) {\n    const changedField = e.target.getAttribute(\"name\")\n    const newValue = e.target.value\n\n    //console.log(e.target.getAttribute(\"name\"))\n\n    setSelectedLearner((selectedLearner) => {\n      let newSelectedLearner = { ...selectedLearner }\n      newSelectedLearner[changedField] = newValue\n      return newSelectedLearner\n    })\n  }\n\n  //FIXME: this may break if user's currently filtering!\n  function updateUILearnerList(updatedLearnerIndex, action = \"UPDATE\") {\n    const newLearnersList = [...learners]\n    switch (action) {\n      default:\n        newLearnersList[updatedLearnerIndex] = selectedLearner\n        //updated the list because name can be updated\n        setLearners(newLearnersList)\n        setDisplayedLearners(\n          filterLearners(newLearnersList, `${selectedLearner.firstName}`)\n        )\n        setSearchPhrase(`${selectedLearner.firstName}`)\n        break\n      case \"DELETE\":\n        //remove the deleted learner\n        newLearnersList.splice(updatedLearnerIndex, 1)\n        //should go back to the full list after deleting\n        setDisplayedLearners(newLearnersList)\n        setLearners(newLearnersList)\n        //reset form\n        setSelectedLearner(null)\n        //reset searchPhrase\n        setSearchPhrase(\"\")\n        break\n    }\n  }\n\n  function getUpdatedLearnerIndex(learners, selectedLearner) {\n    return learners.findIndex(({ learnerId }) => {\n      return learnerId === selectedLearner.learnerId\n    })\n  }\n\n  async function onUpdatePersonalBests(e) {\n    const updatedLearnerIndex = getUpdatedLearnerIndex(\n      learners,\n      selectedLearner\n    )\n\n    if (\n      !window.confirm(\n        `Are you sure you want to update ${selectedLearner.firstName}'s record?`\n      )\n    ) {\n      setSelectedLearner(null)\n      setDisplayedLearners(learners)\n      setSearchPhrase(\"\")\n      return\n    } else {\n      //check if the selectedLearner actually changes\n      if (shallowEqual(learners[updatedLearnerIndex], selectedLearner)) {\n        console.log(\"No need to rerender or update!\")\n        return\n      }\n\n      setActionStatus({ action: \"update\", isActionSuccess: null })\n\n      const isUpdated = await httpService.updateLearner(selectedLearner)\n\n      if (isUpdated) {\n        //...when should you update?\n        updateUILearnerList(updatedLearnerIndex)\n\n        setActionStatus({ action: \"update\", isActionSuccess: true })\n      } else {\n        console.log(\"Updating failed!\", isUpdated)\n        //refill the form with the old information\n        setSelectedLearner(learners[updatedLearnerIndex])\n        setSearchPhrase(selectedLearner.firstName)\n\n        setActionStatus({ action: \"update\", isActionSuccess: false })\n      }\n    }\n  }\n\n  function enableEditAndUpdate() {\n    setCanEditAndUpdate(!canEditAndUpdate)\n  }\n\n  async function onDeleteLearner(e) {\n    if (\n      !window.confirm(\n        `Are you sure you want to delete ${selectedLearner.firstName}'s record?`\n      )\n    ) {\n      setCanEditAndUpdate(false)\n      return\n    }\n\n    setActionStatus({ action: \"delete\", isActionSuccess: null })\n\n    const isDeleted = await httpService.deleteLearner(selectedLearner.learnerId)\n\n    if (isDeleted) {\n      setActionStatus({ action: \"delete\", isActionSuccess: true })\n      const updatedLearnerIndex = getUpdatedLearnerIndex(\n        learners,\n        selectedLearner\n      )\n      updateUILearnerList(updatedLearnerIndex, \"DELETE\")\n      console.log(\"Deleting ... Success!\")\n    } else {\n      setActionStatus({ action: \"delete\", isActionSuccess: false })\n      console.log(\"Deleting failed!\")\n    }\n  }\n\n  useEffect(() => {\n    async function fetchLearners() {\n      const payload = await httpService.fetchLearners()\n\n      if (payload) {\n        //the two operations are not synchronous!\n        setLearners(payload)\n        setDisplayedLearners(payload)\n        setIsFetchSuccess(true)\n      } else {\n        setIsFetchSuccess(false)\n      }\n    }\n    fetchLearners()\n  }, [])\n\n  return (\n    <>\n      <ActionNotificationDiv\n        actionStatus={actionStatus}\n        onCloseActionStatusDiv={onCloseActionStatusDiv}\n      />\n      <div className=\"learnerPanelWrapper\" style={{ display: \"flex\" }}>\n        {isFetchSuccess ? (\n          <LearnerSearchInput\n            searchPhrase={searchPhrase}\n            onSearchPhraseChanged={onSearchPhraseChanged}\n            learners={learners}\n            displayedLearners={displayedLearners}\n            onLearnerItemClicked={onLearnerItemClicked}\n          />\n        ) : (\n          <FetchLearnersNotificationDiv isFetchSuccess={isFetchSuccess} />\n        )}\n        {selectedLearner ? (\n          <PersonalBestsForm\n            selectedLearner={selectedLearner}\n            onPersonalBestsInputChange={onPersonalBestsInputChange}\n            onUpdatePersonalBests={onUpdatePersonalBests}\n            canEditAndUpdate={canEditAndUpdate}\n            enableEditAndUpdate={enableEditAndUpdate}\n            onDeleteLearner={onDeleteLearner}\n          />\n        ) : (\n          <FetchLearnersNotificationDiv isFetchSuccess={isFetchSuccess} />\n        )}\n      </div>\n    </>\n  )\n}\n","import React from \"react\"\n\nexport function LearnerNameList({ learners, onLearnerItemClicked }) {\n  const learnerItems = learners.map(({ learnerId, firstName, lastName }) => {\n    return (\n      <li\n        className=\"learner-name\"\n        key={learnerId} //this cannot be retrieved from getAttribute! need to be spelled lowercase\n        learnerid={learnerId}\n        onClick={onLearnerItemClicked}\n      >{`${firstName} ${lastName}`}</li>\n    )\n  })\n\n  return (\n    <ul>\n      {learners.length === 0 ? (\n        <li className=\"learner-name\">No Learner Found!</li>\n      ) : (\n        learnerItems\n      )}\n    </ul>\n  )\n}\n","import React from \"react\"\n\nimport { camelCaseToNormal } from \"../../utils\"\n\nfunction PersonalBestInput({ label, ...props }) {\n  return (\n    <div className=\"pbs-field\">\n      <label htmlFor={props.id || props.name}>{camelCaseToNormal(label)}</label>\n      <input className=\"text-input\" {...props} />\n    </div>\n  )\n}\n\nexport function PersonalBestsForm({\n  selectedLearner = {},\n  onPersonalBestsInputChange,\n  onUpdatePersonalBests,\n  enableEditAndUpdate,\n  canEditAndUpdate,\n  onDeleteLearner,\n}) {\n  //it does changes, but doesn't show on the UI\n  const inputs = Object.keys(selectedLearner).map((fieldName) => {\n    if (fieldName === \"learnerId\") return null\n    return (\n      <PersonalBestInput\n        label={fieldName}\n        name={fieldName}\n        type=\"text\"\n        key={fieldName}\n        value={selectedLearner[fieldName]}\n        onChange={onPersonalBestsInputChange}\n        readOnly={!canEditAndUpdate}\n        style={{ opacity: canEditAndUpdate ? \"1\" : \"0.75\" }}\n      />\n    )\n  })\n\n  //use modal then\n  return (\n    <div className=\"pbs-form-wrapper\">\n      <h3>{selectedLearner.firstName}</h3>\n      <form readOnly={!canEditAndUpdate} onDoubleClick={enableEditAndUpdate}>\n        {inputs}\n      </form>\n      <div className=\"pbs-form-btn-wrapper\">\n        <button className=\"pbs-btn\" onClick={enableEditAndUpdate}>\n          {!canEditAndUpdate ? \"Enable Edit\" : \"Disable Edit\"}\n        </button>\n        <button\n          className=\"pbs-btn\"\n          onClick={onUpdatePersonalBests}\n          disabled={!canEditAndUpdate}\n        >\n          {!canEditAndUpdate ? \"Edit\" : \"Save\"}\n        </button>\n        <button\n          className=\"pbs-btn\"\n          onClick={onDeleteLearner}\n          disabled={!canEditAndUpdate}\n        >\n          Delete\n        </button>\n      </div>\n    </div>\n  )\n}\n","import React from \"react\"\nimport { LearnerNameList } from \"./register\"\n\nexport function LearnerSearchInput({\n  searchPhrase,\n  onSearchPhraseChanged,\n  learners,\n  displayedLearners,\n  onLearnerItemClicked,\n}) {\n  return (\n    <div className=\"learnerListPanel\" style={{ display: \"flex\" }}>\n      <div\n        className=\"searchInputWrapper\"\n        style={{ display: \"flex\", flexDirection: \"column\" }}\n      >\n        <input\n          className=\"learnerSearchInput\"\n          value={searchPhrase}\n          onChange={onSearchPhraseChanged}\n          placeholder={\n            learners.length === 0 ? \"No Learners Added Yet\" : \"Type to Filter\"\n          }\n          disabled={learners.length === 0 ? true : false}\n        />\n      </div>\n      <div className=\"learnerNameList\">\n        {learners.length === 0 ? (\n          <ul>\n            <li className=\"learner-name\">No Learners Added Yet</li>\n          </ul>\n        ) : (\n          <LearnerNameList\n            learners={displayedLearners}\n            onLearnerItemClicked={onLearnerItemClicked}\n          />\n        )}\n      </div>\n    </div>\n  )\n}\n","import XLSX from \"xlsx\"\nimport fetchService from \"../../services/http\"\n\nfunction promisify(f) {\n  return function (...args) {\n    // return a wrapper-function\n    return new Promise((resolve, reject) => {\n      function callback(err, result) {\n        // our custom callback for f\n        if (err) {\n          reject(err)\n        } else {\n          resolve(result)\n        }\n      }\n\n      args.push(callback) // append our custom callback to the end of f arguments\n\n      f.call(this, ...args) // call the original function\n    })\n  }\n}\n\nexport class myExcelReader {\n  constructor(programmeId) {\n    this.reader = new FileReader()\n    this.reader.makeTimeTable = function (exercisesArr) {\n      const aggregate = {}\n\n      function getWeekDayPair(exercisesArr) {\n        let prevPair = [0, 0]\n        return exercisesArr.reduce((pairs, { week, day }) => {\n          if (prevPair[0] !== week || prevPair[1] !== day) {\n            prevPair = [week, day]\n            pairs.push([week, day])\n          }\n          return pairs\n        }, [])\n      }\n\n      function extractDailyExercises(w, d) {\n        exercisesArr\n          .filter(({ week, day }) => week === w && day === d)\n          .reduce((acc, { exercise, instruction }) => {\n            //initialise prop week if not exist\n            if (acc[`week ${w}`] === undefined) {\n              acc[`week ${w}`] = {}\n            }\n\n            //initialise prop day of week if not exist\n            if (acc[`week ${w}`][`day ${d}`] === undefined) {\n              acc[`week ${w}`][`day ${d}`] = []\n            }\n\n            //push obj to proper week and day\n            acc[`week ${w}`][`day ${d}`].push({ exercise, instruction })\n\n            return acc\n          }, aggregate)\n      }\n\n      getWeekDayPair(exercisesArr).forEach((dayInWeek) =>\n        extractDailyExercises(dayInWeek[0], dayInWeek[1])\n      )\n      return aggregate\n    }\n    this.reader.programmeId = programmeId\n    this.reader.onload = async function (event) {\n      //console.log(this.programmeId)\n      const data = event.target.result\n      const workbook = XLSX.read(data, {\n        type: \"buffer\",\n      })\n\n      const payload = {\n        scheduleName: \"\",\n        timetable: \"\",\n        programmeId: this.programmeId,\n        weekCount: 0,\n      }\n\n      const rows = []\n\n      workbook.SheetNames.forEach(function (sheetName) {\n        //which is actually an array of rows\n        const XL_row_object = XLSX.utils.sheet_to_json(\n          workbook.Sheets[sheetName]\n        )\n\n        //programmeName here\n        payload.scheduleName = sheetName\n        rows.push(...XL_row_object)\n      })\n\n      payload.timetable = this.makeTimeTable(rows)\n\n      document.getElementById(\"jsonObject\").innerHTML = JSON.stringify(\n        payload,\n        null,\n        4\n      )\n\n      payload.weekCount = Math.max.apply(\n        null,\n        Object.keys(payload.timetable).map((week) => {\n          return parseInt(week.substring(week.length - 1))\n        })\n      )\n\n      const success = await fetchService.postNewSchedule(payload)\n      return success\n    }\n\n    this.reader.onerror = function (event) {\n      console.error(\"File could not be read! Code \" + event.target.error.code)\n    }\n\n    this.reader.readAsArrayBufferPromise = promisify(\n      this.reader.readAsArrayBuffer\n    )\n  }\n}\n","import { HttpServiceSingleton } from \"./http\"\nimport { safeSpinnerWrapper } from \"../utils\"\n\nexport class ProgrammeServiceSingleton extends HttpServiceSingleton {\n  constructor() {\n    super()\n    console.log(\"I was created!\")\n    this.fetchProgrammes = safeSpinnerWrapper(this.fetchProgrammes)\n    this._instance = this\n    if (ProgrammeServiceSingleton._instance) {\n      return this._instance\n    }\n  }\n\n  async fetchProgrammes() {\n    const res = await ProgrammeServiceSingleton._fetchJsonFactory(\n      \"programmes\"\n    )()\n    return res ? res : false\n  }\n\n  static getProgrammeInstance() {\n    return (\n      ProgrammeServiceSingleton._instance || new ProgrammeServiceSingleton()\n    )\n  }\n}\n\nexport default ProgrammeServiceSingleton.getProgrammeInstance()\n","import React, { useState, useEffect } from \"react\"\nimport { myExcelReader } from \"./myExcelReader\"\nimport { FileUploader, ProgrammeOptions } from \"./register\"\nimport { FetchNotificationDivFactory } from \"../factoryComponent\"\nimport httpService from \"../../services/ProgrammeServiceSingleton\"\n\n//a good candidate for Redux, since needed by many components, lets just do useState for now\nexport function ScheduleUploader() {\n  const [programmes, setProgrammes] = useState(null)\n  const [selectedProgrammeId, setSelectedProgrammeId] = useState(null)\n\n  const [isFetchSuccess, setIsFetchSuccess] = useState(null)\n  const FetchProgrammesNotificationDiv = FetchNotificationDivFactory(\n    \"programmes\"\n  )\n\n  function onProgrammeSelected(e) {\n    setSelectedProgrammeId(parseInt(e.target.value))\n  }\n\n  useEffect(() => {\n    //this should stay here unless all components have a status tracking feature, which makes sense\n    async function fetchProgrammes() {\n      const payload = await httpService.fetchProgrammes()\n\n      if (payload) {\n        console.log(payload)\n        //effect here\n        setProgrammes((p) => [\n          ...payload.programmes,\n          {\n            programmeId: 0,\n            programmeName: \"None\",\n          },\n        ])\n        setSelectedProgrammeId(0)\n        setIsFetchSuccess(true)\n      } else {\n        //another effect\n        setIsFetchSuccess(false)\n      }\n    }\n    fetchProgrammes()\n  }, [])\n\n  function onFileUploaded(e) {\n    const selectedFile = e.target.files[0]\n    const r = new myExcelReader(selectedProgrammeId)\n    //empty rows are skipped!\n    //this is async (oneload and onerror are defined inside the r instance)\n    r.reader\n      .readAsArrayBufferPromise(selectedFile)\n      .then((res) => console.log(res))\n  }\n\n  return (\n    <>\n      <div>\n        <div>\n          {programmes ? (\n            <ProgrammeOptions\n              onProgrammeSelected={onProgrammeSelected}\n              programmes={programmes}\n              selectedProgrammeId={selectedProgrammeId}\n              isFetchSuccess={isFetchSuccess}\n            />\n          ) : (\n            <FetchProgrammesNotificationDiv isFetchSuccess={isFetchSuccess} />\n          )}\n        </div>\n        <FileUploader onFileUploaded={onFileUploaded} />\n      </div>\n    </>\n  )\n}\n","import React from \"react\"\n\nexport function FileUploader({ onFileUploaded }) {\n  return (\n    <div>\n      <input\n        type=\"file\"\n        id=\"fileUploader\"\n        name=\"fileUploader\"\n        accept=\".xls, .xlsx\"\n        onChange={onFileUploaded}\n      />\n      <pre id=\"jsonObject\"> JSON : </pre>\n    </div>\n  )\n}\n","import React from \"react\"\n\nexport function ProgrammeOptions({\n  programmes,\n  onProgrammeSelected,\n  selectedProgrammeId,\n}) {\n  const options = programmes.map(({ programmeName, programmeId }) => {\n    return (\n      <option key={programmeId} value={programmeId}>\n        {programmeName}\n      </option>\n    )\n  })\n  return (\n    <>\n      <div>\n        <label htmlFor=\"programmes\">Publish to Programme: </label>\n      </div>\n      <select\n        name=\"programmes\"\n        onChange={onProgrammeSelected}\n        value={selectedProgrammeId ? selectedProgrammeId : undefined}\n      >\n        {options}\n      </select>\n    </>\n  )\n}\n","function isNotEmpty(str) {\n  return str.trim().length > 0\n}\n\nfunction isValidEmail(email) {\n  const pattern = /^([\\w_-]+|[\\w_-]+(.[\\w_-]+)+?)@([\\w_-]+|[\\w_-]+(.[\\w_-]+)+?)$/\n  return pattern.test(email)\n}\n\nexport function validateCredentials({ email, password }) {\n  if (isNotEmpty(email) && isNotEmpty(password)) {\n    return isValidEmail(email) ? null : \"Invalid email\"\n  } else {\n    return \"Missing Email or Password\"\n  }\n}\n","import { HttpServiceSingleton } from \"./http\"\nimport { safeSpinnerWrapper } from \"../utils\"\n\nexport class InstructorServiceSingleton extends HttpServiceSingleton {\n  constructor() {\n    super()\n    this.instructorLogin = safeSpinnerWrapper(this.instructorLogin)\n    this._instance = this\n    if (InstructorServiceSingleton._instance) {\n      return this._instance\n    }\n  }\n\n  static getInstructorInstance() {\n    return (\n      InstructorServiceSingleton._instance || new InstructorServiceSingleton()\n    )\n  }\n\n  async instructorLogin(credentials) {\n    const res = await InstructorServiceSingleton._fetchPostFactory(\n      \"instructor/login\",\n      true\n    )(credentials)\n\n    return res ? res : [false, {}]\n  }\n}\n\nexport default InstructorServiceSingleton.getInstructorInstance()\n","import React, { useState } from \"react\"\n\nimport { Logo, WelcomePanel, LoginForm, LoginFormTextInput } from \"./register\"\nimport { UserAuth, validateCredentials } from \"../../services/register\"\n\nimport httpService from \"../../services/InstructorServiceSingleton\"\n\nexport function HomePanel() {\n  const [credentials, setCredentials] = useState({ email: \"\", password: \"\" })\n  const [errorMessage, setErrorMessage] = useState(null)\n  const [isLoggedIn, setIsLoggedIn] = useState(UserAuth.isAuthenticated())\n\n  function onInputChanged(e) {\n    const changedField = e.target.getAttribute(\"name\")\n    const newValue = e.target.value.trim()\n    setCredentials((c) => {\n      c[changedField] = newValue\n      return c\n    })\n  }\n\n  async function onFormSubmitted(e) {\n    e.preventDefault()\n    const error = validateCredentials(credentials)\n    if (error) {\n      setErrorMessage(error)\n      return\n    }\n    setErrorMessage(null)\n    console.log(\"Logging in with \", credentials)\n\n    const [oke, payload] = await httpService.instructorLogin(credentials)\n\n    if (!oke) {\n      setErrorMessage(payload.message)\n    } else {\n      UserAuth.saveToken(payload.token)\n      setIsLoggedIn(true)\n    }\n  }\n\n  const fields = Object.keys(credentials).map((fieldName) => (\n    <LoginFormTextInput\n      key={fieldName}\n      label={fieldName}\n      onInputChanged={onInputChanged}\n      value={credentials[fieldName]}\n    />\n  ))\n\n  function onLogOutClicked(e) {\n    console.log(\"log me out!\")\n    UserAuth.clearToken()\n    setIsLoggedIn(false)\n  }\n\n  return (\n    <div>\n      <Logo />\n      {isLoggedIn ? (\n        <WelcomePanel onLogOutClicked={onLogOutClicked} />\n      ) : (\n        <LoginForm\n          onFormSubmitted={onFormSubmitted}\n          fields={fields}\n          errorMessage={errorMessage}\n        />\n      )}\n    </div>\n  )\n}\n","import React from \"react\"\nimport { LoginFormButton } from \"./register\"\n\nexport function WelcomePanel({ onLogOutClicked }) {\n  return (\n    <>\n      <h1>Welcome to the Instructor Space</h1>\n      <LoginFormButton\n        customClassName=\"logout\"\n        label=\"Log Out\"\n        onClick={onLogOutClicked}\n      />\n    </>\n  )\n}\n","import React from \"react\"\n\nexport function Logo() {\n  return (\n    <div className=\"logo-wrapper\">\n      <img\n        className=\"logo\"\n        src={require(\"../../assets/logo.jpg\")}\n        alt=\"New Zealand Olympic Weight-Lifting Logo\"\n      />\n    </div>\n  )\n}\n","import React from \"react\"\n\nexport function LoginFormTextInput({ label, onInputChanged, fieldValue }) {\n  return (\n    <div className={`field-container ${label}`}>\n      <label htmlFor={label} className={`search-form-label index ${label}`}>\n        {label}\n      </label>\n      <input\n        id={label}\n        name={label}\n        className=\"text-input\"\n        type={label === \"password\" ? \"password\" : \"text\"}\n        onChange={onInputChanged}\n        value={fieldValue}\n      />\n    </div>\n  )\n}\n","import React from \"react\"\n\nexport function LoginFormButton({ customClassName, label, onClick }) {\n  return (\n    <button\n      type=\"submit\"\n      className={`submit-btn ${customClassName}`}\n      onClick={onClick}\n    >\n      {label}\n    </button>\n  )\n}\n","import React from \"react\"\nimport { LoginFormButton } from \"./register\"\n\nfunction ErrorMessageDiv({ errorMessage }) {\n  return (\n    <div className=\"error-message-wrapper\">\n      <p\n        className=\"error-message\"\n        style={{ visibility: errorMessage ? \"visible\" : \"hidden\" }}\n      >\n        {errorMessage}\n      </p>\n    </div>\n  )\n}\n\nexport function LoginForm({ onFormSubmitted, fields, errorMessage }) {\n  return (\n    <>\n      <h1 className=\"login-form-title\">Login</h1>\n      <form className=\"login-form\" onSubmit={onFormSubmitted}>\n        {fields}\n        {<ErrorMessageDiv errorMessage={errorMessage} />}\n        <div className=\"submit-btn-container\">\n          <LoginFormButton customClassName=\"login right\" label=\"Log In\" />\n        </div>\n      </form>\n    </>\n  )\n}\n","import React from \"react\"\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n} from \"react-router-dom\"\n//https://reactrouter.com/web/api\n\nimport { Navbar, NotFoundPage, Footer, ProtectedRoute } from \"./app/register\"\n\nimport { AllLearnersPage, LearnersPanel } from \"./components/learners/register\"\nimport { ScheduleUploader } from \"./components/schedules/register\"\nimport { HomePanel } from \"./components/home/register\"\n\nfunction App() {\n  const links = [\n    {\n      to: \"/instructor\",\n      label: \"Home Panel\",\n    },\n    {\n      to: \"/instructor/learners\",\n      label: \"Learners\",\n    },\n    {\n      to: \"/instructor/schedules\",\n      label: \"Schedules\",\n    },\n    {\n      to: \"/instructor/schedules/new\",\n      label: \"Publish Schedule\",\n    },\n    {\n      to: \"/instructor/testLearners\",\n      label: \"Learners Panel\",\n    },\n  ]\n\n  return (\n    <Router>\n      <Navbar links={links} />\n      <div className=\"App main\">\n        {/* Switch ensure that only one component is rendered at a time You also register all your routes here! */}\n        <Switch>\n          <Route exact path=\"/instructor/login\" component={HomePanel} />\n          <ProtectedRoute\n            exact\n            path=\"/instructor/learners\"\n            component={AllLearnersPage}\n          />\n          <ProtectedRoute\n            exact\n            path=\"/instructor/schedules/new\"\n            component={ScheduleUploader}\n          />\n          <ProtectedRoute\n            exact\n            path=\"/instructor/testLearners\"\n            component={LearnersPanel}\n          />\n          <Route exact path=\"/instructor/error\" component={NotFoundPage} />\n          {/* basically a 404 page, but need to register it */}\n          <Redirect to=\"/instructor/login\" />\n        </Switch>\n      </div>\n      <Footer />\n    </Router>\n  )\n}\n\nexport default App\n","import { configureStore } from \"@reduxjs/toolkit\";\n\nexport default configureStore({\n  reducer: {},\n});\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport \"./style/resetBrowserStyle.css\"\nimport \"./style/style.css\"\nimport App from \"./App\"\nimport store from \"./app/store\"\nimport { Provider } from \"react-redux\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n)\n"],"sourceRoot":""}