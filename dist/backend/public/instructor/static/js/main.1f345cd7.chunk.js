(this.webpackJsonpinstructor=this.webpackJsonpinstructor||[]).push([[0],{105:function(e,t,n){e.exports=n(126)},110:function(e,t,n){},111:function(e,t,n){},122:function(e,t){},123:function(e,t){},124:function(e,t,n){e.exports=n.p+"static/media/logo.226e3c4c.jpg"},126:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(12),o=n.n(c),u=(n(110),n(111),n(8)),l=n(36),s=n(14);function i(e){var t=e.to,n=e.label;return r.a.createElement(l.b,{to:t,className:"nav-item"},n)}var d=function(e){var t,n=e.links,a=e.onLogOut,c=e.onAppChange,o=e.pageTitle;return t=1!==n.length||n[0].component?n.map((function(e){var t=e.to,n=e.label;return"/logout"!==t?r.a.createElement(i,{key:t,to:t,label:n}):r.a.createElement("span",{className:"nav-item",key:t,label:n,onClick:a},n)})):[r.a.createElement("span",{className:"nav-item",key:n[0].to,onClick:c,to:n[0].to},n[0].label)],r.a.createElement("nav",{className:"header index"},r.a.createElement("section",null,r.a.createElement("div",{className:"navContent"},r.a.createElement("header",null,r.a.createElement("h1",{className:"main-title"},o)),r.a.createElement("div",{className:"navLinks"},t))))};function m(){return r.a.createElement("footer",{className:"footer index"},r.a.createElement("div",{className:"footer-text-wrapper"},"Otago Weightlifting 2020. All Rights Reserved"))}var p=n(18),f=n(21),h=function(){function e(){Object(p.a)(this,e)}return Object(f.a)(e,null,[{key:"isAuthenticated",value:function(){return null!==sessionStorage.getItem("token")}},{key:"saveToken",value:function(e){sessionStorage.setItem("token",e)}},{key:"getToken",value:function(){return sessionStorage.getItem("token")}},{key:"clearToken",value:function(){sessionStorage.removeItem("token")}}]),e}();function b(e){var t=e.component;return console.log("Checking",h.isAuthenticated()),h.isAuthenticated()?r.a.createElement(t,null):r.a.createElement(s.a,{to:{pathname:"/"}})}var g=n(26),v=n(3),y=n.n(v),k=n(7);function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Object(k.a)(y.a.mark((function n(){var a,r=arguments;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.apply(void 0,r);case 3:return n.abrupt("return",n.sent);case 6:if(n.prev=6,n.t0=n.catch(0),null!==(a=null===t||void 0===t?void 0:t(n.t0))&&void 0!==a||console.log("Something went wrong: ".concat(n.t0)),-1===n.t0.toString().search(/AbortError/)){n.next=13;break}return n.abrupt("return",{ok:!1,payload:{message:"Server timeouts!"}});case 13:if(-1===n.t0.toString().search(/NetworkError/)){n.next=17;break}return n.abrupt("return",{ok:!1,payload:{message:"Can't connect to Server!"}});case 17:return n.abrupt("return",{ok:!1,payload:null});case 18:case"end":return n.stop()}}),n,null,[[0,6]])})))}function S(e,t){return Object.entries(e).every((function(e){var n=Object(u.a)(e,2),a=n[0],r=n[1];return t.hasOwnProperty(a)&&r===t[a]}))}var O={show:function(e){document.querySelector("#spinner").style.display=!0===e?"block":"none"}};function j(e){return Object(k.a)(y.a.mark((function t(){var n,a=arguments;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return O.show(!0),t.next=3,E(e).apply(void 0,a);case 3:return n=t.sent,O.show(!1),t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)})))}function w(e){return e.substring(0,1).toUpperCase()+e.substring(1)}var C=function(){function e(){if(Object(p.a)(this,e),this.postInstructorCredentials=e._fetchPostFactory("instructor/login"),this._instance=this,e._instance)return this._instance}return Object(f.a)(e,null,[{key:"_makeUrl",value:function(e){return"".concat(this.BASE_URL,"/").concat(e)}},{key:"_fetchPostFactory",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=e._makeUrl(t);return E(function(){var t=Object(k.a)(y.a.mark((function t(r){var c;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c={method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)},h.isAuthenticated()&&(c.headers.Authorization="Bearer ".concat(h.getToken())),e._setFetchTimeout(n,c),t.t0=e,t.next=6,fetch(a,c);case 6:return t.t1=t.sent,t.abrupt("return",t.t0._makePayload.call(t.t0,t.t1));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"_fetchPutFactory",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=e._makeUrl(t);return E(Object(k.a)(y.a.mark((function t(){var r,c,o=arguments;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=o.length>0&&void 0!==o[0]?o[0]:null,c={method:"PUT",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h.getToken())}},r&&(c.body=JSON.stringify(r)),e._setFetchTimeout(n,c),t.t0=e,t.next=7,fetch(a,c);case 7:return t.t1=t.sent,t.abrupt("return",t.t0._makePayload.call(t.t0,t.t1));case 9:case"end":return t.stop()}}),t)}))))}},{key:"_fetchJsonFactory",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=e._makeUrl(t);return E(Object(k.a)(y.a.mark((function t(){var r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={headers:{Authorization:"Bearer ".concat(h.getToken())}},e._setFetchTimeout(n,r),t.t0=e,t.next=5,fetch(a,r);case 5:return t.t1=t.sent,t.abrupt("return",t.t0._makePayload.call(t.t0,t.t1));case 7:case"end":return t.stop()}}),t)}))))}},{key:"_fetchDeleteFactory",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=e._makeUrl(t);return E(Object(k.a)(y.a.mark((function t(){var r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={method:"DELETE",mode:"cors",headers:{Authorization:"Bearer ".concat(h.getToken())}},e._setFetchTimeout(n,r),t.t0=e,t.next=5,fetch(a,r);case 5:return t.t1=t.sent,t.abrupt("return",t.t0._makePayload.call(t.t0,t.t1));case 7:case"end":return t.stop()}}),t)}))))}},{key:"_setFetchTimeout",value:function(e,t){var n=new AbortController;setTimeout((function(){return n.abort()}),1e3*e),t.signal=n.signal}},{key:"_makePayload",value:function(){var e=Object(k.a)(y.a.mark((function e(t){var n,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",{ok:!1,payload:null});case 2:n=t.ok,e.t0=t.status,e.next=204===e.t0?6:8;break;case 6:return console.log("No Content"),e.abrupt("return",{ok:n,payload:null});case 8:return e.abrupt("break",9);case 9:return e.next=11,t.json();case 11:return a=e.sent,console.log({ok:n,payload:a}),e.abrupt("return",{ok:n,payload:a||null});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"_retryFetch",value:function(e){setInterval(Object(k.a)(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Refetching ..."),t.abrupt("return",E(e()));case 2:case"end":return t.stop()}}),t)}))),5e3)}},{key:"getInstance",value:function(){return e._instance||new e}}]),e}();C.BASE_URL=window.location.href.split(".").includes("herokuapp")?"https://lifting-schedule-v2.herokuapp.com":"http://localhost:5000";C.getInstance();function x(e){return e&&e.trim().length>0}function N(e){var t=e.email,n=e.password;return x(t)&&x(n)?function(e){return e&&/^([\w_-]+|[\w_-]+(.[\w_-]+)+?)@([\w_-]+|[\w_-]+(.[\w_-]+)+?)$/.test(e)}(t)?null:"Invalid email":"Missing Email or Password"}function A(e){var t=e.username,n=e.password;return x(t)&&x(n)?null:"Missing Email or Password"}var I=n(41),P=n(37),F=n(52),L=n(51),_=function(e){Object(F.a)(n,e);var t=Object(L.a)(n);function n(){var e;return Object(p.a)(this,n),(e=t.call(this)).instructorLogin=j(e.instructorLogin),e._instance=Object(P.a)(e),n._instance?Object(I.a)(e,e._instance):e}return Object(f.a)(n,[{key:"instructorLogin",value:function(){var e=Object(k.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._fetchPostFactory("instructor/login")(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"getInstructorInstance",value:function(){return n._instance||new n}}]),n}(C).getInstructorInstance(),U=function(e){Object(F.a)(n,e);var t=Object(L.a)(n);function n(){var e;return Object(p.a)(this,n),e=t.call(this),console.log("New LearnerServiceSingleton!"),e.updateLearner=j(e.updateLearner),e.deleteLearner=j(e.deleteLearner),e.createLearner=j(e.createLearner),e.learnerLogin=j(e.learnerLogin),e._instance=Object(P.a)(e),n._instance?Object(I.a)(e,e._instance):e}return Object(f.a)(n,[{key:"fetchLearners",value:function(){var e=Object(k.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Fetching Learners"),e.next=3,n._fetchJsonFactory("learners")();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"updateLearner",value:function(){var e=Object(k.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Sending ".concat(JSON.stringify(t))),e.next=3,n._fetchPutFactory("learners/details")({learner:t});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteLearner",value:function(){var e=Object(k.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Delete learner id ",t),e.next=3,n._fetchDeleteFactory("learners/".concat(t))();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLearner",value:function(){var e=Object(k.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Sending new learner ".concat(JSON.stringify(t))),e.next=3,n._fetchPostFactory("learners")({learner:t});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"learnerLogin",value:function(){var e=Object(k.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._fetchPostFactory("learners/login")(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"getLearnerInstance",value:function(){return n._instance||new n}}]),n}(C).getLearnerInstance(),D=function(e){Object(F.a)(n,e);var t=Object(L.a)(n);function n(){var e;return Object(p.a)(this,n),e=t.call(this),console.log("I was created!"),e.fetchProgrammes=j(e.fetchProgrammes),e.fetchSchedules=j(e.fetchSchedules),e.fetchScheduleInfo=j(e.fetchScheduleInfo),e.deleteSchedule=j(e.deleteSchedule),e.publishSchedule=j(e.publishSchedule),e.unpublishSchedule=j(e.unpublishSchedule),e.repostSchedule=j(e.repostSchedule),e.postNewSchedule=j(e.postNewSchedule),e.getAvailableProgrammesToPublish=j(e.getAvailableProgrammesToPublish),e._instance=Object(P.a)(e),n._instance?Object(I.a)(e,e._instance):e}return Object(f.a)(n,[{key:"fetchProgrammes",value:function(){var e=Object(k.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._fetchJsonFactory("programmes")();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"createProgramme",value:function(){var e=Object(k.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"updateProgramme",value:function(){var e=Object(k.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchSchedules",value:function(){var e=Object(k.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._fetchJsonFactory("programmes/schedules")();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteSchedule",value:function(){var e=Object(k.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._fetchDeleteFactory("programmes/schedules/".concat(t))();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"postNewSchedule",value:function(){var e=Object(k.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._fetchPostFactory("programmes/schedules")(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"repostSchedule",value:function(){var e=Object(k.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._fetchPutFactory("programmes/schedules")(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchScheduleInfo",value:function(){var e=Object(k.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._fetchJsonFactory("programmes/schedules/info")();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getAvailableProgrammesToPublish",value:function(){var e=Object(k.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._fetchJsonFactory("programmes/schedules/".concat(t,"/publish/available.programmes"))();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"publishSchedule",value:function(){var e=Object(k.a)(y.a.mark((function e(t,a){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._fetchPostFactory("programmes/schedules/".concat(t,"/publish"))({programmeIds:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unpublishSchedule",value:function(){var e=Object(k.a)(y.a.mark((function e(t,a){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a),e.next=3,n._fetchDeleteFactory("programmes/schedules/".concat(t,"/unpublish/").concat(a))();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"getProgrammeInstance",value:function(){return n._instance||new n}}]),n}(C).getProgrammeInstance();function T(e){return new Promise((function(t,n){var a=new FileReader;a.onload=function(e){return t(e.target.result)},a.onerror=n,a.readAsArrayBuffer(e)}))}var B=n(16),W=n(53),R=n.n(W);function J(e){var t=R.a.read(e,{type:"buffer"}),n=[];return t.SheetNames.forEach((function(e){var a=R.a.utils.sheet_to_json(t.Sheets[e]);n.push.apply(n,Object(B.a)(a))})),{rows:n,weekCount:t.SheetNames.length}}function M(e){var t={};return function(e){var t=[0,0];return e.reduce((function(e,n){var a=n.week,r=n.day;return t[0]===a&&t[1]===r||(t=[a,r],e.push([a,r])),e}),[])}(e).forEach((function(n){return a=n[0],r=n[1],void e.filter((function(e){var t=e.week,n=e.day;return t===a&&n===r})).reduce((function(e,t){var n=t.exerciseName,c=t.instruction;return void 0===e["week ".concat(a)]&&(e["week ".concat(a)]={}),void 0===e["week ".concat(a)]["day ".concat(r)]&&(e["week ".concat(a)]["day ".concat(r)]=[]),e["week ".concat(a)]["day ".concat(r)].push({exerciseName:n,instruction:c}),e}),t);var a,r})),t}function z(e,t,n){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(e){var c=J(e),o=c.rows,u=c.weekCount,l=M(o);return a?{timetable:l,weekCount:u,scheduleName:n,programmeIds:t}:{scheduleId:r,scheduleName:n,weekCount:u,timetable:l}}return{scheduleId:r,scheduleName:n}}function Y(e,t){t.splice(t.findIndex((function(t){return t===e})),1)}var q=function(){function e(){Object(p.a)(this,e)}return Object(f.a)(e,null,[{key:"setCurrentPage",value:function(e){e&&sessionStorage.setItem("currentPage",e)}},{key:"getCurrentPage",value:function(){var e=sessionStorage.getItem("currentPage");return"/instructor"===e?"/instructor/schedules":"/learner"===e?"/learner/schedules":e}},{key:"clearCurrentPage",value:function(){return sessionStorage.removeItem("currentPage")}}]),e}();function V(e){var t=e.isProtected,n=Object(g.a)(e,["isProtected"]);return t?r.a.createElement(b,n):r.a.createElement(s.b,n)}function X(e){var t=e.links.map((function(e){var t=e.to,n=e.component,a=e.isProtected;return r.a.createElement(V,{key:t,exact:!0,path:t,component:n,isProtected:a})}));return r.a.createElement(s.d,null,t,r.a.createElement(s.a,{to:q.getCurrentPage()?q.getCurrentPage():"/learner/login"}))}var Z=n(20);var $=n(155),G=n(159),H=r.a.memo((function(e){var t=e.actionStatus,n=e.onCloseActionStatusDiv,a=t.action,c=t.isActionSuccess,o="Action Status",u="",l="",s="";if(a)switch(c){default:o="Applying ".concat(a.toUpperCase()," ..."),l="yellow",u="#111";break;case!0:o="".concat(a.toUpperCase()," Successful!"),u="green",l="rgb(107, 236, 172)";break;case!1:o="".concat(a.toUpperCase()," Failed!"),u="red",l="rgb(241, 162, 142)"}else s="hidden";return r.a.createElement("div",{className:"action-status-div",style:{visibility:s,color:u,fontWeight:"600",background:l}},c?r.a.createElement($.a,null):r.a.createElement(G.a,null),r.a.createElement("span",null,o),r.a.createElement("span",{className:"action-status-close",onClick:n},"X"))}));function K(e){var t=e.learners,n=e.onLearnerItemClicked,a=t.map((function(e){var t=e.learnerId,a=e.firstName,c=e.lastName;return r.a.createElement("li",{className:"learner-name",key:t,learnerid:t,onClick:n},"".concat(a," ").concat(c))}));return r.a.createElement("ul",null,0===t.length?r.a.createElement("li",{className:"learner-name"},"No Learner Found!"):a)}var Q=n(160),ee=n(161),te=n(162);function ne(e){var t=e.label,n=Object(g.a)(e,["label"]);return r.a.createElement("div",{className:"pbs-field"},r.a.createElement("label",{htmlFor:n.id||n.name},t.split("").reduce((function(e,t,n){return 0===n?t.toUpperCase():t===t.toUpperCase()?e+" "+t:e+t}),"")),r.a.createElement("input",Object.assign({className:"text-input"},n)))}function ae(e){var t=e.selectedLearner,n=void 0===t?{}:t,a=e.onPersonalBestsInputChange,c=e.onUpdatePersonalBests,o=e.enableEditAndUpdate,u=e.canEditAndUpdate,l=e.onDeleteLearner,s=Object.keys(n).map((function(e){return"learnerId"===e?null:r.a.createElement(ne,{label:e,name:e,type:"text",key:e,value:n[e],onChange:a,readOnly:!u,style:{opacity:u?"1":"0.75"}})}));return r.a.createElement("div",{className:"pbs-form-wrapper"},r.a.createElement("h3",{style:{textTransform:"capitalize"}},n.firstName),r.a.createElement("form",{readOnly:!u,onDoubleClick:o},s),r.a.createElement("div",{className:"pbs-form-btn-wrapper"},r.a.createElement("button",{className:"pbs-btn",onClick:o},r.a.createElement(Q.a,{className:"pbs-btn-icon"}),u?"Disable Edit ":"Enable Edit "),r.a.createElement("button",{className:"pbs-btn",onClick:c,disabled:!u},r.a.createElement(ee.a,{className:"pbs-btn-icon"}),"Save "),r.a.createElement("button",{className:"pbs-btn",onClick:l,disabled:!u},r.a.createElement(te.a,{className:"pbs-btn-icon"}),"Delete ")))}function re(e){var t=e.searchPhrase,n=e.onSearchPhraseChanged,a=e.learners,c=e.displayedLearners,o=e.onLearnerItemClicked;return r.a.createElement("div",{className:"learnerListPanel",style:{display:"flex"}},r.a.createElement("div",{className:"searchInputWrapper",style:{display:"flex",flexDirection:"column"}},r.a.createElement("input",{className:"learnerSearchInput",value:t,onChange:n,placeholder:0===a.length?"No Learners Added Yet":"Type to Filter",disabled:0===a.length})),r.a.createElement("div",{className:"learnerNameList"},0===a.length?r.a.createElement("ul",null,r.a.createElement("li",{className:"learner-name"},"No Learners Added Yet")):r.a.createElement(K,{learners:c,onLearnerItemClicked:o})))}function ce(e){var t=e.onInstructorLogIn,n=Object(a.useState)({email:"",password:""}),c=Object(u.a)(n,2),o=c[0],l=c[1],s=Object(a.useState)(null),i=Object(u.a)(s,2),d=i[0],m=i[1];function p(e){var t=e.target.getAttribute("name"),n=e.target.value.trim();l((function(e){return e[t]=n,e}))}function f(){return(f=Object(k.a)(y.a.mark((function e(n){var a,r,c,u;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!(a=N(o))){e.next=5;break}return m(a),e.abrupt("return");case 5:return m(null),console.log("Logging in with ",o),e.next=9,_.instructorLogin(o);case 9:if(r=e.sent,c=r.ok,u=r.payload,c){e.next=17;break}return m(u.message),e.abrupt("return");case 17:h.saveToken(u.token),t();case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var b=Object.keys(o).map((function(e){return r.a.createElement(le,{key:e,label:e,onInputChanged:p,value:o[e]})}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(ue,null),r.a.createElement(de,{title:"Instructor Login",onFormSubmitted:function(e){return f.apply(this,arguments)},fields:b,errorMessage:d}))}function oe(e){var t=e.onLearnerLogIn,n=e.isLearnerLoggedIn,c=Object(a.useState)({username:"",password:""}),o=Object(u.a)(c,2),l=o[0],i=o[1],d=Object(a.useState)(null),m=Object(u.a)(d,2),p=m[0],f=m[1];function b(e){var t=e.target.getAttribute("name"),n=e.target.value.trim();i((function(e){return e[t]=n,e}))}function g(){return(g=Object(k.a)(y.a.mark((function e(n){var a,r,c,o;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!(a=A(l))){e.next=5;break}return f(a),e.abrupt("return");case 5:return f(null),console.log("Logging in with ",l),e.next=9,U.learnerLogin(l);case 9:if(r=e.sent,c=r.ok,o=r.payload,c){e.next=17;break}return f(o.message),e.abrupt("return");case 17:h.saveToken(o.token),delete o.token,t();case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var v=Object.keys(l).map((function(e){return r.a.createElement(le,{key:e,label:e,onInputChanged:b,value:l[e]})}));return n?r.a.createElement(s.a,{to:"learner/schedules"}):r.a.createElement("div",null,r.a.createElement(ue,null),r.a.createElement(de,{title:"Learner Login",onFormSubmitted:function(e){return g.apply(this,arguments)},fields:v,errorMessage:p}))}function ue(){return r.a.createElement("div",{className:"logo-wrapper"},r.a.createElement("img",{className:"logo",src:n(124),alt:"New Zealand Olympic Weight-Lifting Logo"}))}function le(e){var t=e.label,n=e.onInputChanged,a=e.fieldValue;return r.a.createElement("div",{className:"field-container ".concat(t)},r.a.createElement("label",{htmlFor:t,className:"search-form-label index ".concat(t)},t),r.a.createElement("input",{id:t,name:t,className:"text-input",type:"password"===t?"password":"text",onChange:n,value:a}))}function se(e){var t=e.customClassName,n=e.label,a=e.onClick;return r.a.createElement("button",{type:"submit",className:"submit-btn ".concat(t),onClick:a},n)}function ie(e){var t=e.errorMessage;return r.a.createElement("div",{className:"error-message-wrapper"},r.a.createElement("p",{className:"error-message",style:{visibility:t?"visible":"hidden"}},t))}function de(e){var t=e.title,n=e.onFormSubmitted,a=e.fields,c=e.errorMessage;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"login-form-title"},t),r.a.createElement("form",{className:"login-form",onSubmit:n},a,r.a.createElement(ie,{errorMessage:c}),r.a.createElement("div",{className:"submit-btn-container"},r.a.createElement(se,{customClassName:"login right",label:"Log In"}))))}var me=n(95),pe=n(163),fe=Object(me.a)({typography:{fontFamily:["Montserrat","sans-serif"]}}),he={learner:[{to:"/learner/schedules",label:"Schedules",component:function(){q.setCurrentPage("/learner/schedules");var e=Object(a.useState)([]),t=Object(u.a)(e,2);return t[0],t[1],r.a.createElement("div",null,"Schedules")},isProtected:!0},{to:"/logout",label:"Log Out",component:null,isProtected:!0}],instructorApp:[{to:"/instructor/login",label:"Instructor Space",isProtected:!1}]};function be(e){var t=e.onAppChange,n=Object(a.useState)(h.isAuthenticated()),c=Object(u.a)(n,2),o=c[0],i=c[1],p=Object(a.useState)(h.isAuthenticated()?he.learner:he.instructorApp),f=Object(u.a)(p,2),b=f[0],g=f[1];return r.a.createElement(pe.a,{theme:fe},r.a.createElement(l.a,null,r.a.createElement(d,{links:b,onLogOut:function(e){console.log("log me out!"),h.clearToken(),q.setCurrentPage("/learner/login"),g(he.instructorApp),i(!1)},pageTitle:"Otago WeightLifting Learner Space",onAppChange:t}),r.a.createElement("div",{className:"App main"},o?r.a.createElement(s.a,{to:"/learner/login"!==q.getCurrentPage()?q.getCurrentPage():"/learner/schedules"}):r.a.createElement(oe,{onLearnerLogIn:function(){g(he.learner),i(!0)},isLearnerLoggedIn:o}),r.a.createElement(X,{links:b})),r.a.createElement(m,null)))}var ge=function e(t,n){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Object(p.a)(this,e),this.reader=new FileReader,this.reader.programmeIds=t,this.reader.scheduleName=n,this.reader.isNew=a,this.reader.scheduleId=r,this.reader.makeTimeTable=function(e){var t={};return function(e){var t=[0,0];return e.reduce((function(e,n){var a=n.week,r=n.day;return t[0]===a&&t[1]===r||(t=[a,r],e.push([a,r])),e}),[])}(e).forEach((function(n){return a=n[0],r=n[1],void e.filter((function(e){var t=e.week,n=e.day;return t===a&&n===r})).reduce((function(e,t){var n=t.exerciseName,c=t.instruction;return void 0===e["week ".concat(a)]&&(e["week ".concat(a)]={}),void 0===e["week ".concat(a)]["day ".concat(r)]&&(e["week ".concat(a)]["day ".concat(r)]=[]),e["week ".concat(a)]["day ".concat(r)].push({exerciseName:n,instruction:c}),e}),t);var a,r})),t},this.reader.onload=function(){var e=Object(k.a)(y.a.mark((function e(t){var n,r,c,o,u;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.result,r=R.a.read(n,{type:"buffer"}),c=[],r.SheetNames.forEach((function(e){var t=R.a.utils.sheet_to_json(r.Sheets[e]);c.push.apply(c,Object(B.a)(t))})),o={timetable:this.makeTimeTable(c)},!a){e.next=12;break}return o=Object(Z.a)(Object(Z.a)({},o),{},{scheduleName:this.scheduleName,programmeIds:this.programmeIds,weekCount:r.SheetNames.length}),e.next=9,D.postNewSchedule(o);case 9:u=e.sent,e.next=16;break;case 12:return o=Object(Z.a)(Object(Z.a)({},o),{},{scheduleId:this.scheduleId,weekCount:r.SheetNames.length}),e.next=15,D.repostSchedule(o);case 15:u=e.sent;case 16:return e.abrupt("return",u);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),this.reader.onerror=function(e){console.error("File could not be read! Code "+e.target.error.code)},this.reader.readAsArrayBufferPromise=function(e){return new Promise((function(t,n){var a=new FileReader;a.onload=function(e){return t(e.target.result)},a.onerror=n,a.readAsArrayBuffer(e)}))}},ve=n(164),ye=n(165);function ke(e,t){var n=Object(a.useState)({action:null,isActionSuccess:!0}),c=Object(u.a)(n,2),o=c[0],l=c[1];function s(){return i.apply(this,arguments)}function i(){return(i=Object(k.a)(y.a.mark((function n(){var a,r=arguments;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return l({action:e,isActionSuccess:null}),n.next=3,t.apply(void 0,r);case 3:return(a=n.sent).ok?(l({action:e,isActionSuccess:!0}),console.log("".concat(w(e)," Successful!"))):(l({action:e,isActionSuccess:!1}),console.log("".concat(w(e)," failed!"))),n.abrupt("return",a);case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function d(){l({action:null,isActionSuccess:null})}function m(){return r.a.createElement(H,{actionStatus:o,onCloseActionStatusDiv:d})}return function(e){var t={};return t["".concat(e,"ActionStatus")]=o,t["set".concat(w(e),"ActionStatus")]=l,t["callDecorated".concat(w(e),"Service")]=s,t["onClose".concat(w(e),"StatusDiv")]=d,t["".concat(w(e),"Snackbar")]=m,t}(e)}function Ee(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Object(a.useState)(null),c=Object(u.a)(n,2),o=c[0],l=c[1],s=r.a.memo((function(n){var a=n.isFetchSuccess,c=Object(g.a)(n,["isFetchSuccess"]);switch(a){default:return r.a.createElement("div",Object.assign({},c,{style:{color:"var(--bg-cl)"}}),"Loading ",e||"data"," ...");case!0:return r.a.createElement("div",Object.assign({},c,{style:{color:"green"}}),t||"Finished loading data!");case!1:return r.a.createElement("div",Object.assign({},c,{style:{color:"red"}}),"Failed to load ",e||"data",". Please retry later.")}}));function i(e){var t=Object.assign({},e);return r.a.createElement(s,Object.assign({isFetchSuccess:o},t))}return{isFetchSuccess:o,setIsFetchSuccess:l,FetchNotificationDiv:i}}function Se(e){var t=e.onActionSuccess,n=Object(a.useState)(null),c=Object(u.a)(n,2),o=c[0],l=c[1],s=Object(a.useState)([]),i=Object(u.a)(s,2),d=i[0],m=i[1],p=Object(a.useState)(""),f=Object(u.a)(p,2),h=f[0],b=f[1],g=Ee("programmes"),v=g.isFetchSuccess,E=g.setIsFetchSuccess,S=g.FetchNotificationDiv,O=ke("upload",D.postNewSchedule),j=O.callDecoratedUploadService,w=O.UploadSnackbar;function C(){return(C=Object(k.a)(y.a.mark((function e(n){var a,r,c,u,l,s,i;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.target.files[0],new ge(d,h).reader.readAsArrayBufferPromise(a),e.next=5,T(a);case 5:return r=e.sent,c=z(r,d,h,!0),e.next=9,j(c);case 9:if(u=e.sent,l=u.ok,s=u.payload,!l){e.next=17;break}return i=x(s,o),t("upload",{newScheduleInfoObject:i}),console.log("Upload Successful!"),e.abrupt("return");case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,t){return Object(Z.a)(Object(Z.a)({},e),{},{programmes:t.filter((function(e){return d.includes(e.programmeId)}))})}return Object(a.useEffect)((function(){function e(){return(e=Object(k.a)(y.a.mark((function e(){var t,n,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.fetchProgrammes();case 2:t=e.sent,n=t.ok,a=t.payload,n?(console.log(a),l(a.programmes),E(!0)):E(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[E]),r.a.createElement(ve.a,{item:!0,xs:8,md:12,lg:12,style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},o?r.a.createElement(r.a.Fragment,null,r.a.createElement(ft,{label:"Cycle Name",onClickedScheduleNameChanged:function(e){b(e.target.value)},scheduleName:h}),r.a.createElement(Fe,{programmes:o,isFetchSuccess:v,onProgrammeChecked:function(e){var t=parseInt(e.target.value);e.target.checked?(console.log(t),m([].concat(Object(B.a)(d),[t]))):m((function(e){var n=Object(B.a)(e);return Y(t,n),n}))},label:"Publish to Team: "}),r.a.createElement(w,null),h.length>5?r.a.createElement(we,{onFileUploaded:function(e){return C.apply(this,arguments)}}):r.a.createElement(ye.a,null,"Please Enter The Cycle's Name Before Uploading")):r.a.createElement(S,null))}var Oe=n(166),je=n(167);function we(e){var t=e.onFileUploaded;return r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"var(--mg-sm)"}},r.a.createElement(Oe.a,{style:{padding:"var(--pd-sm)",minWidth:"max-content",margin:"0 auto",border:"1px solid var(--txt-cl)"},htmlFor:"fileUploader"},r.a.createElement(je.a,{style:{color:"var(--bg-cl)",fontSize:"var(--fs-lg)",margin:"0 calc(1 * var(--mg-lg))"}})),r.a.createElement("input",{style:{margin:"0 auto",display:"none"},type:"file",id:"fileUploader",name:"fileUploader",accept:".xls, .xlsx",onChange:t}))}var Ce=n(168),xe=n(190),Ne=n(127),Ae=n(170),Ie=n(34),Pe=n(171);function Fe(e){var t,n=e.programmes,a=e.onProgrammeChecked,c=e.label;if(n.length>0){var o=n.map((function(e){var t=e.programmeName,n=e.programmeId;return r.a.createElement(Ce.a,{key:n,control:r.a.createElement(xe.a,{onChange:a,name:t,value:n,color:"primary"}),label:t})}));t=r.a.createElement(r.a.Fragment,null,r.a.createElement(Ne.a,{component:"legend"},c),r.a.createElement(Ae.a,null,o))}else t=r.a.createElement(Ie.a,{component:"p"},"No Programme Available");return r.a.createElement(Pe.a,{component:"fieldset",style:{marginBottom:"var(--mg-sm)"}},t)}var Le=function(){function e(){Object(p.a)(this,e)}return Object(f.a)(e,null,[{key:"_updateScheduleDetails",value:function(e,t){var n=e.scheduleId,a=e.scheduleName,r=e.weekCount,c=Object(B.a)(t),o=c.findIndex((function(e){return e.scheduleId===n}));return c[o]=Object(Z.a)(Object(Z.a)({},c[o]),{},{scheduleName:a,weekCount:r}),c}},{key:"_addPublishedProgramme",value:function(e,t){var n=e.scheduleId,a=e.programmes,r=Object(B.a)(t),c=r.find((function(e){return e.scheduleId===n}));return c.programmes=[].concat(Object(B.a)(c.programmes),Object(B.a)(a)),r}},{key:"_removeProgrammeFromSchedule",value:function(e,t){var n=e.scheduleId,a=e.targetProgramme,r=Object(B.a)(t),c=r.find((function(e){return e.scheduleId===n})),o=c.programmes.findIndex((function(e){return e.programmeId===a.programmeId}));return c.programmes.splice(o,1),r}},{key:"_deleteOneScheduleById",value:function(e,t){var n=e.scheduleId;return t.filter((function(e){return e.scheduleId!==n}))}},{key:"_addNewSchedule",value:function(e,t){var n=e.newScheduleInfoObject;return[].concat(Object(B.a)(t),[n])}},{key:"factory",value:function(t,n){return function(a,r){switch(a){case"delete":return void n(e._deleteOneScheduleById(r,t));case"upload":return void n(e._addNewSchedule(r,t));case"publish":return void n(e._addPublishedProgramme(r,t));case"unpublish":return void n(e._removeProgrammeFromSchedule(r,t));case"repost":return void n(e._updateScheduleDetails(r,t));default:return}}}}]),e}(),_e=n(172),Ue=Object(_e.a)((function(e){return{container:{justifyContent:"space-around"},item:{margin:"var(--mg-sm)",padding:0}}}));function De(e,t,n){e!==t&&n(t)}var Te=Object(_e.a)((function(e){return{container:{justifyContent:"space-around"},item:{margin:"var(--mg-sm)",padding:0}}}));function Be(e){return(t=et,n=Te,function(e){var a=n();return r.a.createElement(ve.a,{item:!0,xs:8,sm:6,md:3,className:a.item},r.a.createElement(t,e))})(e);var t,n}function We(e){var t=e.schedules,n=(e.unPublishSnackbar,Object(g.a)(e,["schedules","unPublishSnackbar"])),a=t?t.map((function(e){var t=e.scheduleId,a=e.scheduleName,c=e.weekCount,o=e.programmes;return r.a.createElement(Be,Object.assign({key:t,scheduleId:t,scheduleName:a,weekCount:c,programmes:o},n))})):null;return r.a.createElement(r.a.Fragment,null,a)}var Re=n(173),Je=n(174),Me=n(175),ze=n(176),Ye=n(177),qe=n(178),Ve=n(179),Xe=n(181),Ze=n(169),$e=n(73),Ge=n(180),He=n(182),Ke=Object(_e.a)((function(e){return{root:{background:"var(--txt-cl)",boxShadow:"var(--bsd-md)"},media:{},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:$e.a[500]},actionBtnWrapper:{display:"flex",justifyContent:"space-evenly"},scheduleActionBtn:{border:"none",boxShadow:"none",padding:"var(--pd-sm)",width:"max-content","&:hover":{color:"var(--secondary-cl)",background:"#333"}}}}));function Qe(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?parseInt(e.currentTarget.getAttribute(t)):e.currentTarget.getAttribute(t)}function et(e){var t=e.onEditScheduleClicked,n=e.onPublishScheduleClicked,a=e.onDeleteScheduleClicked,c=(e.createdAt,e.weekCount),o=e.scheduleName,u=e.scheduleId,l=e.programmes,s=e.onActionSuccess,i=Ke(),d=ke("unpublish",D.unpublishSchedule),m=d.callDecoratedUnpublishService,p=d.UnpublishSnackbar;function f(e){return h.apply(this,arguments)}function h(){return(h=Object(k.a)(y.a.mark((function e(t){var n,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.find((function(e){return e.programmeId===Qe(t,"programmeId",!0)})),!window.confirm("Are you sure you want to remove cycle ".concat(o," from team ").concat(n.programmeName))){e.next=7;break}return e.next=4,m(u,n.programmeId);case 4:a=e.sent,a.ok&&s("unpublish",{scheduleId:u,targetProgramme:n});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(Re.a,{className:i.root},r.a.createElement(Je.a,{title:o||"Unnamed",subheader:c?"".concat(c," week(s)"):"No Exercises Added Yet"}),r.a.createElement(Me.a,null,0===l.length?null:r.a.createElement(ze.a,{style:{textAlign:"left"},className:"team-list"},r.a.createElement(Ie.a,{variant:"subtitle1"},"Currently Used by Team(s):"," "),l.map((function(e){return r.a.createElement(Ye.a,{button:!0,key:e.programmeId,onClick:f,programmeid:e.programmeId,scheduleid:u,programmename:e.programmeName,className:"team-list-item"},r.a.createElement(qe.a,{className:"team-list-item-text",primary:e.programmeName}),r.a.createElement(Ve.a,null,r.a.createElement(Ge.a,{className:"unpublish-schedule-icon",fontSize:"small"})))}))),r.a.createElement(p,null)),r.a.createElement(Xe.a,{disableSpacing:!0,className:i.actionBtnWrapper},r.a.createElement(Ze.a,{className:i.scheduleActionBtn,"aria-label":"edit",onClick:t,scheduleid:u},r.a.createElement(Q.a,null)),r.a.createElement(Ze.a,{className:i.scheduleActionBtn,"aria-label":"publish",onClick:n,scheduleid:u},r.a.createElement(He.a,null)),r.a.createElement(Ze.a,{className:i.scheduleActionBtn,"aria-label":"delete",onClick:a,scheduleid:u},r.a.createElement(te.a,null))))}var tt=n(183),nt=n(184);function at(e){var t=e.onActionSuccess,n=r.a.useState(!1),a=Object(u.a)(n,2),c=a[0],o=a[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(tt.a,{onClick:function(){o(!0)},variant:"extended","aria-label":"add",style:{position:"absolute",left:"5%",top:"13.5%"}},r.a.createElement(nt.a,null),r.a.createElement("span",{style:{textAlign:"center"},className:"add-schedule-btn-wrapper"},"New Cycle")),r.a.createElement(lt,{open:c,handleClose:function(){o(!1)},onActionSuccess:t}))}var rt=n(191),ct=n(185),ot=n(186),ut=n(187);function lt(e){var t=e.handleClose,n=e.open,a=e.onActionSuccess;return r.a.createElement(rt.a,{open:n,onClose:t,"aria-labelledby":"form-dialog-title"},r.a.createElement(ct.a,{style:{backgroundColor:"var(--txt-cl)"}},r.a.createElement(Ie.a,{style:{fontWeight:"var(--fw-md)"}},"New Cycle")),r.a.createElement(ot.a,{className:"add-new-schedule-dialog"},r.a.createElement(Se,{onActionSuccess:a})),r.a.createElement(ut.a,{style:{justifyContent:"center",padding:"0",backgroundColor:"var(--txt-cl)"}},r.a.createElement("button",{onClick:t,style:{width:"max-content"}},"Close")))}function st(e){var t=e.onDialogCloseClicked,n=e.open,a=e.clickedSchedule,c=e.onClickedScheduleNameChanged,o=(e.currentClickedScheduleName,e.onActionSuccess),u=e.canUpdate,l=e.fileUploaded,s=e.onFileUploaded,i=e.buffer,d=Object(g.a)(e,["onDialogCloseClicked","open","clickedSchedule","onClickedScheduleNameChanged","currentClickedScheduleName","onActionSuccess","canUpdate","fileUploaded","onFileUploaded","buffer"]),m=ke("repost",D.repostSchedule),p=m.callDecoratedRepostService,f=m.RepostSnackbar;function h(){return(h=Object(k.a)(y.a.mark((function e(){var t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=z(i,[],a.scheduleName,!1,a.scheduleId),e.next=3,p(t);case 3:n=e.sent,n.ok&&(delete t.timetable,o("repost",t));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(rt.a,{open:n,onClose:t,"aria-labelledby":"form-dialog-title"},r.a.createElement(ct.a,{style:{backgroundColor:"var(--txt-cl)"}},r.a.createElement(Ie.a,{style:{fontWeight:"var(--fw-md)"}},"Reupload Cycle")),r.a.createElement(ot.a,{className:"add-new-schedule-dialog"},r.a.createElement(f,null),a&&r.a.createElement(it,Object.assign({},d,{onClickedScheduleNameChanged:c,onFileUploaded:s,scheduleName:a.scheduleName,fileUploaded:l}))),r.a.createElement(ut.a,{style:{display:"flex",justifyContent:"space-evenly",padding:"0",backgroundColor:"var(--txt-cl)"}},r.a.createElement("button",{disabled:!u,onClick:function(){return h.apply(this,arguments)},style:{width:"max-content"}},"Save"),r.a.createElement("button",{onClick:t,style:{width:"max-content"}},"Close")))}function it(e){var t=e.onClickedScheduleNameChanged,n=e.onFileUploaded,c=e.scheduleName,o=e.isFileUploaded,l=Object(a.useState)({action:"File Upload",isActionSuccess:o}),s=Object(u.a)(l,2),i=s[0],d=s[1];return r.a.createElement(ve.a,{container:!0,xs:8,md:12,lg:12,style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},r.a.createElement(ft,{label:"Cycle Name",onClickedScheduleNameChanged:t,scheduleName:c}),r.a.createElement(H,{actionStatus:i,onCloseActionStatusDiv:function(){d({action:null,isActionSuccess:null})}}),c.length>0?r.a.createElement(we,{onFileUploaded:n}):"Schedule Name Must Not Be Empty")}function dt(e){var t=e.scheduleId,n=e.onDialogCloseClicked,c=e.open,o=e.onActionSuccess,l=Object(a.useState)([]),s=Object(u.a)(l,2),i=s[0],d=s[1],m=Object(a.useState)(null),p=Object(u.a)(m,2),f=p[0],h=p[1],b=Ee("available programmes"),g=b.setIsFetchSuccess,v=b.FetchNotificationDiv,E=ke("publish",D.publishSchedule),S=E.publishActionStatus,O=E.callDecoratedPublishService,j=E.PublishSnackbar;function w(){return(w=Object(k.a)(y.a.mark((function e(){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t,i);case 2:n=e.sent,n.ok&&o("publish",{scheduleId:t,programmes:C(i,f)});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e,t){return t.filter((function(t){return e.includes(t.programmeId)}))}return Object(a.useEffect)((function(){function e(){return(e=Object(k.a)(y.a.mark((function e(t){var n,a,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.getAvailableProgrammesToPublish(t);case 2:if(n=e.sent,a=n.ok,r=n.payload,!a){e.next=9;break}return g(!0),h(r),e.abrupt("return");case 9:g(!1);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}c&&function(t){e.apply(this,arguments)}(t)}),[t,c,g]),r.a.createElement(ve.a,{item:!0,xs:10,sm:8,md:6},r.a.createElement(rt.a,{open:c,onClose:n,"aria-labelledby":"form-dialog-title",style:{overflow:"hidden"}},r.a.createElement(ct.a,{style:{backgroundColor:"var(--txt-cl)",fontWeight:"var(--fw-md)"}},"Publish Cycle"),r.a.createElement("div",{className:"publish-schedule-dialog"},f?r.a.createElement(Fe,{programmes:f,onProgrammeChecked:function(e){var t=parseInt(e.target.value);e.target.checked?d([].concat(Object(B.a)(i),[t])):d((function(e){var n=Object(B.a)(e);return Y(t,n),n}))},label:"Publish to Team"}):r.a.createElement(v,null),S.action?r.a.createElement(j,null):null),r.a.createElement(ut.a,{style:{justifyContent:"space-around",padding:"0",backgroundColor:"var(--txt-cl)",overflow:"hidden"}},r.a.createElement("button",{disabled:!(i.length>0||!f),onClick:function(){return w.apply(this,arguments)},style:{width:"max-content"}},"Publish"),r.a.createElement("button",{onClick:n,style:{width:"max-content"}},"Close"))))}var mt=n(188),pt=Object(_e.a)((function(e){return{scheduleName:{marginBottom:"var(--mg-sm)"},input:{fontFamily:"var(--ff)",color:"#001e18",marginBottom:"var(--mg-sm)"},formLabelRoot:{fontFamily:"var(--ff)",color:"var(--txt-cl)"},formLabelFocused:{fontFamily:"var(--ff)",color:"var(--txt-cl)","'& label.Mui-focused'":{fontFamily:"var(--ff)",color:"var(--txt-cl)"}}}}));function ft(e){var t=e.onClickedScheduleNameChanged,n=e.scheduleName,a=e.label,c=pt();return r.a.createElement(mt.a,{label:a,className:c.scheduleName,onChange:t,value:n,InputProps:{className:c.input},InputLabelProps:{className:c.formLabelRoot}})}var ht=Object(me.a)({typography:{fontFamily:["Montserrat","sans-serif"]}}),bt={instructor:[{to:"/instructor/schedules",label:"Schedules",component:function(){q.setCurrentPage("/instructor/schedules");var e=Object(a.useState)(null),t=Object(u.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(null),l=Object(u.a)(o,2),s=l[0],i=l[1],d=Object(a.useState)(null),m=Object(u.a)(d,2),p=m[0],f=m[1],h=Object(a.useState)(null),b=Object(u.a)(h,2),g=b[0],v=b[1],E=Object(a.useState)(!1),S=Object(u.a)(E,2),O=S[0],j=S[1],w=Object(a.useState)(!1),C=Object(u.a)(w,2),x=C[0],N=C[1],A=Object(a.useState)(!1),I=Object(u.a)(A,2),P=I[0],F=I[1],L=Object(a.useState)(null),_=Object(u.a)(L,2),U=_[0],B=_[1],W=Object(a.useState)(!1),R=Object(u.a)(W,2),J=R[0],M=R[1],z=Ee("schedules"),Y=z.setIsFetchSuccess,V=z.FetchNotificationDiv,X=ke("delete",D.deleteSchedule),$=X.callDecoratedDeleteService,G=X.DeleteSnackbar,H=Le.factory(n,c);function K(){return(K=Object(k.a)(y.a.mark((function e(t){var n,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.files[0],e.next=3,T(n);case 3:a=e.sent,B(a),M(!0),F(!0);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e){return parseInt(e.currentTarget.getAttribute("scheduleId"))}function ee(e){De(O,!1,j),De(x,!1,N),De(J,!1,M),De(P,!1,F),De(U,null,B),De(p,null,f),De(g,null,v)}function te(){return(te=Object(k.a)(y.a.mark((function e(t){var n,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Q(t),i(Q(t)),!window.confirm("Are you sure you want to delete schedule id ".concat(n))){e.next=8;break}return e.next=5,$(n);case 5:a=e.sent,a.ok&&H("delete",{scheduleId:n});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){function e(){return(e=Object(k.a)(y.a.mark((function e(){var t,n,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.fetchScheduleInfo();case 2:t=e.sent,n=t.ok,a=t.payload,n&&(Y(!0),c(a)),Y(!1);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[Y]);var ne=Ue();return r.a.createElement(r.a.Fragment,null,r.a.createElement(G,null),r.a.createElement(at,{onActionSuccess:H}),r.a.createElement(ve.a,{container:!0,className:ne.container},n?r.a.createElement(r.a.Fragment,null,r.a.createElement(We,{schedules:n,onEditScheduleClicked:function(e){console.log(e.currentTarget.getAttribute("scheduleId")),j(!0),i(Q(e));var t=n.find((function(t){return t.scheduleId===Q(e)}));f(t),v(t.scheduleName)},onPublishScheduleClicked:function(e){console.log("Publish schedule id ".concat(e.currentTarget.getAttribute("scheduleId"))),N(!0),i(Q(e))},onDeleteScheduleClicked:function(e){return te.apply(this,arguments)},onActionSuccess:H})):r.a.createElement(V,{style:{margin:"0 auto"}})),r.a.createElement(st,{open:O,onDialogCloseClicked:ee,clickedSchedule:p,onActionSuccess:H,onClickedScheduleNameChanged:function(e){var t=e.target.value;f(Object(Z.a)(Object(Z.a)({},p),{},{scheduleName:t})),F(function(e,t,n){var a=e.length>0;return!n&&a&&e!==t||n&&a}(t,g,J))},canUpdate:P,buffer:U,isFileUploaded:J,onFileUploaded:function(e){return K.apply(this,arguments)}}),r.a.createElement(dt,{open:x,onDialogCloseClicked:ee,scheduleId:s,onActionSuccess:H}))},isProtected:!0},{to:"/instructor/learners",label:"Learners Panel",component:function(){q.setCurrentPage("/instructor/learners");var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)([]),l=Object(u.a)(o,2),s=l[0],i=l[1],d=Object(a.useState)(""),m=Object(u.a)(d,2),p=m[0],f=m[1],h=Object(a.useState)(null),b=Object(u.a)(h,2),v=b[0],E=b[1],O=Object(a.useState)(!1),j=Object(u.a)(O,2),w=j[0],C=j[1],x=Object(a.useState)({action:null,isActionSuccess:null}),N=Object(u.a)(x,2),A=N[0],I=N[1],P=Object(a.useState)(null),F=Object(u.a)(P,2),L=F[0],_=F[1],D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n){var a=n.isFetchSuccess,c=Object(g.a)(n,["isFetchSuccess"]);switch(a){default:return r.a.createElement("div",Object.assign({},c,{style:{color:"var(--bg-cl)"}}),"Loading ",e||"data"," ...");case!0:return r.a.createElement("div",Object.assign({},c,{style:{color:"green"}}),t||"Finished loading data!");case!1:return r.a.createElement("div",Object.assign({},c,{style:{color:"red"}}),"Failed to load ",e||"data")}}}("learners","Click On A Name");function T(e,t){var n=t.trim().toLowerCase();return 0===n.length?e:e.filter((function(e){var t=e.firstName,a=e.lastName;return t.toLowerCase().trim().startsWith(n)||a.toLowerCase().trim().startsWith(n)}))}function W(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"UPDATE",a=Object(B.a)(n);switch(t){default:a[e]=v,c(a),i(T(a,"".concat(v.firstName))),f("".concat(v.firstName));break;case"DELETE":a.splice(e,1),i(a),c(a),E(null),f("")}}function R(e,t){return e.findIndex((function(e){return e.learnerId===t.learnerId}))}function J(){return(J=Object(k.a)(y.a.mark((function e(t){var a,r,c;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=R(n,v),window.confirm("Are you sure you want to update ".concat(v.firstName,"'s record?"))){e.next=8;break}return E(null),i(n),f(""),e.abrupt("return");case 8:if(!S(n[a],v)){e.next=11;break}return console.log("No need to rerender or update!"),e.abrupt("return");case 11:return I({action:"update",isActionSuccess:null}),e.next=14,U.updateLearner(v);case 14:r=e.sent,(c=r.ok)?(W(a),I({action:"update",isActionSuccess:!0})):(console.log("Updating failed!",c),E(n[a]),f(v.firstName),I({action:"update",isActionSuccess:!1}));case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=Object(k.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Are you sure you want to delete ".concat(v.firstName,"'s record?"))){e.next=3;break}return C(!1),e.abrupt("return");case 3:return I({action:"delete",isActionSuccess:null}),e.next=6,U.deleteLearner(v.learnerId);case 6:a=e.sent,a.ok?(I({action:"delete",isActionSuccess:!0}),W(R(n,v),"DELETE"),console.log("Deleting ... Success!")):(I({action:"delete",isActionSuccess:!1}),console.log("Deleting failed!"));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){function e(){return(e=Object(k.a)(y.a.mark((function e(){var t,n,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.fetchLearners();case 2:t=e.sent,n=t.ok,a=t.payload,n?(c(a),i(a),_(!0)):_(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(H,{actionStatus:A,onCloseActionStatusDiv:function(e){I({action:null,isActionSuccess:null})}}),r.a.createElement("div",{className:"learnerPanelWrapper",style:{display:"flex"}},L?r.a.createElement(re,{searchPhrase:p,onSearchPhraseChanged:function(e){var t=e.target.value;f(e.target.value),i(T(n,t))},learners:n,displayedLearners:s,onLearnerItemClicked:function(e){var t,a=(t=e.target.getAttribute("learnerId"),n.find((function(e){return e.learnerId===parseInt(t)})));E(a)}}):r.a.createElement(D,{isFetchSuccess:L}),v?r.a.createElement(ae,{selectedLearner:v,onPersonalBestsInputChange:function(e){var t=e.target.getAttribute("name"),n=e.target.value;E((function(e){var a=Object(Z.a)({},e);return a[t]=n,a}))},onUpdatePersonalBests:function(e){return J.apply(this,arguments)},canEditAndUpdate:w,enableEditAndUpdate:function(){C(!w)},onDeleteLearner:function(e){return M.apply(this,arguments)}}):r.a.createElement(D,{isFetchSuccess:L})))},isProtected:!0},{to:"/instructor/account",label:"Account",component:function(e){return e.onLogOutClicked,q.setCurrentPage("/instructor/account"),r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Under Construction"))},isProtected:!0},{to:"/logout",label:"Log Out",component:null,isProtected:!0}],learnerApp:[{to:"/learner/login",label:"Learner Space",isProtected:!1}]};function gt(e){var t=e.onAppChange,n=Object(a.useState)(h.isAuthenticated()),c=Object(u.a)(n,2),o=c[0],i=c[1],p=Object(a.useState)(h.isAuthenticated()?bt.instructor:bt.learnerApp),f=Object(u.a)(p,2),b=f[0],g=f[1];return r.a.createElement(pe.a,{theme:ht},r.a.createElement(l.a,null,r.a.createElement(d,{links:b,pageTitle:"Otago Weightlifting Instructor Space",onLogOut:function(e){console.log("log me out!"),h.clearToken(),q.setCurrentPage("/instructor/login"),g(bt.learnerApp),i(!1)},onAppChange:t}),r.a.createElement("div",{className:"App main"},o?r.a.createElement(s.a,{to:"/instructor/login"!==q.getCurrentPage()?q.getCurrentPage():"/instructor/schedules"}):r.a.createElement(ce,{onInstructorLogIn:function(){g(bt.instructor),i(!0)}}),r.a.createElement(X,{links:b})),r.a.createElement(m,null)))}function vt(e){var t=e.currentPage,n=e.onAppChange;return t.includes("/instructor")?r.a.createElement(gt,{onAppChange:n}):r.a.createElement(be,{onAppChange:n})}function yt(){var e=Object(a.useState)(q.getCurrentPage()?q.getCurrentPage():"/learner/login"),t=Object(u.a)(e,2),n=t[0],c=t[1];return r.a.createElement(vt,{currentPage:n,onAppChange:function(e){var t=e.target.getAttribute("to");console.log(t),q.currentApp=t,q.setCurrentPage(t),c(t)}})}var kt=n(96),Et=Object(kt.a)({reducer:{}}),St=n(94);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(St.a,{store:Et},r.a.createElement(yt,null))),document.getElementById("root"))},89:function(e,t){}},[[105,1,2]]]);
//# sourceMappingURL=main.1f345cd7.chunk.js.map