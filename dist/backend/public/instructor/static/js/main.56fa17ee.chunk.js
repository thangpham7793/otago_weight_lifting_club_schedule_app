(this.webpackJsonpinstructor=this.webpackJsonpinstructor||[]).push([[0],{109:function(e,t,n){e.exports=n(130)},114:function(e,t,n){},115:function(e,t,n){},126:function(e,t){},127:function(e,t){},129:function(e,t,n){e.exports=n.p+"static/media/logo.226e3c4c.jpg"},130:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(12),l=n.n(c),o=(n(114),n(115),n(8)),s=n(28),u=n(15);function i(e){var t=e.to,n=e.label;return r.a.createElement(s.b,{to:t,className:"nav-item"},n)}var d=function(e){var t,n=e.links,a=e.onLogOut,c=e.onAppChange,l=e.pageTitle;return t=1!==n.length||n[0].component?n.filter((function(e){return!0===e.display})).map((function(e){var t=e.to,n=e.label;return"/logout"!==t?r.a.createElement(i,{key:t,to:t,label:n}):r.a.createElement("span",{className:"nav-item",key:t,label:n,onClick:a},n)})):[r.a.createElement("span",{className:"nav-item",key:n[0].to,onClick:c,to:n[0].to},n[0].label)],r.a.createElement("nav",{className:"header index"},r.a.createElement("section",null,r.a.createElement("div",{className:"navContent"},r.a.createElement("header",null,r.a.createElement("h1",{style:{fontWeight:"var(--fw-lg)",fontSize:"calc(0.35 * var(--fs-md))"}},l)),r.a.createElement("div",{className:"navLinks"},t))))};function m(){return r.a.createElement("footer",{className:"footer index"},r.a.createElement("div",{className:"footer-text-wrapper"},"Otago Weightlifting 2020. All Rights Reserved"))}var p=n(21),f=n(24),h=function(){function e(){Object(p.a)(this,e)}return Object(f.a)(e,null,[{key:"isAuthenticated",value:function(){return null!==sessionStorage.getItem("token")}},{key:"saveToken",value:function(e){sessionStorage.setItem("token",e)}},{key:"getToken",value:function(){return sessionStorage.getItem("token")}},{key:"clearToken",value:function(){sessionStorage.removeItem("token")}}]),e}();var b=n(4),g=n.n(b),v=n(7);function y(e){return e.split("").reduce((function(e,t,n){return 0===n?t.toUpperCase():t===t.toUpperCase()?e+" "+t:e+t}),"")}function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Object(v.a)(g.a.mark((function n(){var a,r=arguments;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.apply(void 0,r);case 3:return n.abrupt("return",n.sent);case 6:if(n.prev=6,n.t0=n.catch(0),null!==(a=null===t||void 0===t?void 0:t(n.t0))&&void 0!==a||console.log("Something went wrong: ".concat(n.t0)),-1===n.t0.toString().search(/AbortError/)){n.next=13;break}return n.abrupt("return",{ok:!1,payload:{message:"Server timeouts!"}});case 13:if(-1===n.t0.toString().search(/NetworkError/)){n.next=17;break}return n.abrupt("return",{ok:!1,payload:{message:"Can't connect to Server!"}});case 17:return n.abrupt("return",{ok:!1,payload:null});case 18:case"end":return n.stop()}}),n,null,[[0,6]])})))}function S(e,t){return Object.entries(e).every((function(e){var n=Object(o.a)(e,2),a=n[0],r=n[1];return t.hasOwnProperty(a)&&r===t[a]}))}var E={show:function(e){document.querySelector("#spinner").style.display=!0===e?"block":"none"}};function w(e){return Object(v.a)(g.a.mark((function t(){var n,a=arguments;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return E.show(!0),t.next=3,k(e).apply(void 0,a);case 3:return n=t.sent,E.show(!1),t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)})))}function O(e){return e.substring(0,1).toUpperCase()+e.substring(1)}var j=function(){function e(){if(Object(p.a)(this,e),this.postInstructorCredentials=e._fetchPostFactory("instructor/login"),this._instance=this,e._instance)return this._instance}return Object(f.a)(e,null,[{key:"_makeUrl",value:function(e){return"".concat(this.BASE_URL,"/").concat(e)}},{key:"_fetchPostFactory",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=e._makeUrl(t);return k(function(){var t=Object(v.a)(g.a.mark((function t(r){var c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c={method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)},h.isAuthenticated()&&(c.headers.Authorization="Bearer ".concat(h.getToken())),e._setFetchTimeout(n,c),t.t0=e,t.next=6,fetch(a,c);case 6:return t.t1=t.sent,t.abrupt("return",t.t0._makePayload.call(t.t0,t.t1));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"_fetchPutFactory",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=e._makeUrl(t);return k(Object(v.a)(g.a.mark((function t(){var r,c,l=arguments;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=l.length>0&&void 0!==l[0]?l[0]:null,c={method:"PUT",mode:"cors",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(h.getToken())}},r&&(c.body=JSON.stringify(r)),e._setFetchTimeout(n,c),t.t0=e,t.next=7,fetch(a,c);case 7:return t.t1=t.sent,t.abrupt("return",t.t0._makePayload.call(t.t0,t.t1));case 9:case"end":return t.stop()}}),t)}))))}},{key:"_fetchJsonFactory",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=e._makeUrl(t);return k(Object(v.a)(g.a.mark((function t(){var r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={headers:{Authorization:"Bearer ".concat(h.getToken())}},e._setFetchTimeout(n,r),t.t0=e,t.next=5,fetch(a,r);case 5:return t.t1=t.sent,t.abrupt("return",t.t0._makePayload.call(t.t0,t.t1));case 7:case"end":return t.stop()}}),t)}))))}},{key:"_fetchDeleteFactory",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=e._makeUrl(t);return k(Object(v.a)(g.a.mark((function t(){var r;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={method:"DELETE",mode:"cors",headers:{Authorization:"Bearer ".concat(h.getToken())}},e._setFetchTimeout(n,r),t.t0=e,t.next=5,fetch(a,r);case 5:return t.t1=t.sent,t.abrupt("return",t.t0._makePayload.call(t.t0,t.t1));case 7:case"end":return t.stop()}}),t)}))))}},{key:"_setFetchTimeout",value:function(e,t){var n=new AbortController;setTimeout((function(){return n.abort()}),1e3*e),t.signal=n.signal}},{key:"_makePayload",value:function(){var e=Object(v.a)(g.a.mark((function e(t){var n,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",{ok:!1,payload:null});case 2:n=t.ok,e.t0=t.status,e.next=204===e.t0?6:8;break;case 6:return console.log("No Content"),e.abrupt("return",{ok:n,payload:null});case 8:return e.abrupt("break",9);case 9:return e.next=11,t.json();case 11:return a=e.sent,console.log({ok:n,payload:a}),e.abrupt("return",{ok:n,payload:a||null});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"_retryFetch",value:function(e){setInterval(Object(v.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Refetching ..."),t.abrupt("return",k(e()));case 2:case"end":return t.stop()}}),t)}))),5e3)}},{key:"getInstance",value:function(){return e._instance||new e}}]),e}();j.BASE_URL=window.location.href.split(".").includes("herokuapp")?"https://lifting-schedule-v2.herokuapp.com":"http://localhost:5000";j.getInstance();function C(e){return e&&e.trim().length>0}function x(e){var t=e.email,n=e.password;return C(t)&&C(n)?function(e){return e&&/^([\w_-]+|[\w_-]+(.[\w_-]+)+?)@([\w_-]+|[\w_-]+(.[\w_-]+)+?)$/.test(e)}(t)?null:"Invalid email":"Missing Email or Password"}function N(e){var t=e.username,n=e.password;return C(t)&&C(n)?null:"Missing Email or Password"}var P=n(45),I=n(39),A=n(56),F=n(55),L=function(e){Object(A.a)(n,e);var t=Object(F.a)(n);function n(){var e;return Object(p.a)(this,n),(e=t.call(this)).instructorLogin=w(e.instructorLogin),e._instance=Object(I.a)(e),n._instance?Object(P.a)(e,e._instance):e}return Object(f.a)(n,[{key:"instructorLogin",value:function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._fetchPostFactory("instructor/login")(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"getInstructorInstance",value:function(){return n._instance||new n}}]),n}(j).getInstructorInstance(),D=function(e){Object(A.a)(n,e);var t=Object(F.a)(n);function n(){var e;return Object(p.a)(this,n),e=t.call(this),console.log("New LearnerServiceSingleton!"),e.updateLearner=w(e.updateLearner),e.deleteLearner=w(e.deleteLearner),e.createLearner=w(e.createLearner),e.learnerLogin=w(e.learnerLogin),e.updateLearnerPbs=w(e.updateLearnerPbs),e._instance=Object(I.a)(e),n._instance?Object(P.a)(e,e._instance):e}return Object(f.a)(n,[{key:"fetchLearners",value:function(){var e=Object(v.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Fetching Learners"),e.next=3,n._fetchJsonFactory("learners")();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"updateLearner",value:function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Sending ".concat(JSON.stringify(t))),e.next=3,n._fetchPutFactory("learners/details")({learner:t});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteLearner",value:function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Delete learner id ",t),e.next=3,n._fetchDeleteFactory("learners/".concat(t))();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLearner",value:function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Sending new learner ".concat(JSON.stringify(t))),e.next=3,n._fetchPostFactory("learners")({learner:t});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"learnerLogin",value:function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._fetchPostFactory("learners/login")(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"learnerSignup",value:function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._fetchPostFactory("learners/signup")(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateLearnerPbs",value:function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._fetchPutFactory("learners/pbs")({newPbs:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"getLearnerInstance",value:function(){return n._instance||new n}}]),n}(j).getLearnerInstance(),_=function(e){Object(A.a)(n,e);var t=Object(F.a)(n);function n(){var e;return Object(p.a)(this,n),e=t.call(this),console.log("I was created!"),e.fetchProgrammes=w(e.fetchProgrammes),e.fetchSchedules=w(e.fetchSchedules),e.fetchScheduleInfo=w(e.fetchScheduleInfo),e.deleteSchedule=w(e.deleteSchedule),e.publishSchedule=w(e.publishSchedule),e.unpublishSchedule=w(e.unpublishSchedule),e.repostSchedule=w(e.repostSchedule),e.postNewSchedule=w(e.postNewSchedule),e.fetchExercises=w(e.fetchExercises),e.getAvailableProgrammesToPublish=w(e.getAvailableProgrammesToPublish),e._instance=Object(I.a)(e),n._instance?Object(P.a)(e,e._instance):e}return Object(f.a)(n,[{key:"fetchProgrammes",value:function(){var e=Object(v.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._fetchJsonFactory("programmes")();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"createProgramme",value:function(){var e=Object(v.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"updateProgramme",value:function(){var e=Object(v.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchSchedules",value:function(){var e=Object(v.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._fetchJsonFactory("programmes/schedules")();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteSchedule",value:function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._fetchDeleteFactory("programmes/schedules/".concat(t))();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"postNewSchedule",value:function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._fetchPostFactory("programmes/schedules")(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"repostSchedule",value:function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._fetchPutFactory("programmes/schedules")(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchScheduleInfo",value:function(){var e=Object(v.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._fetchJsonFactory("programmes/schedules/info")();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getAvailableProgrammesToPublish",value:function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._fetchJsonFactory("programmes/schedules/".concat(t,"/publish/available.programmes"))();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"publishSchedule",value:function(){var e=Object(v.a)(g.a.mark((function e(t,a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._fetchPostFactory("programmes/schedules/".concat(t,"/publish"))({programmeIds:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unpublishSchedule",value:function(){var e=Object(v.a)(g.a.mark((function e(t,a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(a),e.next=3,n._fetchDeleteFactory("programmes/schedules/".concat(t,"/unpublish/").concat(a))();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchExercises",value:function(){var e=Object(v.a)(g.a.mark((function e(t,a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._fetchJsonFactory("programmes/schedules/".concat(t,"/weeks/").concat(a))();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"getProgrammeInstance",value:function(){return n._instance||new n}}]),n}(j).getProgrammeInstance();function B(e){return new Promise((function(t,n){var a=new FileReader;a.onload=function(e){return t(e.target.result)},a.onerror=n,a.readAsArrayBuffer(e)}))}var T=n(16),U=n(57),W=n.n(U);function J(e){var t=W.a.read(e,{type:"buffer"}),n=[];return t.SheetNames.forEach((function(e){var a=W.a.utils.sheet_to_json(t.Sheets[e]);n.push.apply(n,Object(T.a)(a))})),{rows:n,weekCount:t.SheetNames.length}}function R(e){var t={};return function(e){var t=[0,0];return e.reduce((function(e,n){var a=n.week,r=n.day;return t[0]===a&&t[1]===r||(t=[a,r],e.push([a,r])),e}),[])}(e).forEach((function(n){return a=n[0],r=n[1],void e.filter((function(e){var t=e.week,n=e.day;return t===a&&n===r})).reduce((function(e,t){var n=t.exerciseName,c=t.instruction;return void 0===e["week ".concat(a)]&&(e["week ".concat(a)]={}),void 0===e["week ".concat(a)]["day ".concat(r)]&&(e["week ".concat(a)]["day ".concat(r)]=[]),e["week ".concat(a)]["day ".concat(r)].push({exerciseName:n,instruction:c}),e}),t);var a,r})),t}function H(e,t,n){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(e){var c=J(e),l=c.rows,o=c.weekCount,s=R(l);return a?{timetable:s,weekCount:o,scheduleName:n,programmeIds:t}:{scheduleId:r,scheduleName:n,weekCount:o,timetable:s}}return{scheduleId:r,scheduleName:n}}function q(e,t){t.splice(t.findIndex((function(t){return t===e})),1)}var M=function(){function e(){Object(p.a)(this,e)}return Object(f.a)(e,null,[{key:"setCurrentPage",value:function(e){e&&sessionStorage.setItem("currentPage",e)}},{key:"getCurrentPage",value:function(){var e=sessionStorage.getItem("currentPage");return"/instructor"===e?"/instructor/schedules":"/learner"===e?"/learner/schedules":e}},{key:"clearCurrentPage",value:function(){return sessionStorage.removeItem("currentPage")}}]),e}(),z={snatch:["Snatch","Power Snatch","Hang Snatch","High Hang Snatch","Hang Snatch Below Knee","Hang Power Snatch Below Knee","Hang Snatch Just Off the Floor","Hang Power Snatch","Block Snatch","Low Block Snatch","Block Power Snatch","Low Block Power Snatch","Muscle Snatch","Deficit Snatch","Snatch Balance","Overhead Squat","Snatch Pull","Snatch Deadlift","Block Snatch Pull","Snatch Romanian Deadlift","Snatch Push Press","3 Position Snatch","3 position snatch (High Hang, Below Knee, Floor)","2 Position Snatch","Pause Snatch","Snatch Pull + Snatch","Snatch + Overhead Squat","Snatch Push Press + Overhead Squat","Deficit Snatch Pull","Snatch Panda Pull"],clean:["Clean","Power Clean","Hang Clean","High Hang Clean","Hang Snatch Below Knee","Hang Clean Just Off the Floor","Hang Power Clean","Hang Power Clean Below Knee","Block Clean","Low Block Clean","Block Power Clean","Low Block Power Clean","Muscle Clean","Deficit Clean","Clean Pull","Clean Deadlift","Block Clean Pull","Clean Romanian Deadlift","3 Position Clean","2 Position Snatch","Pause Clean","Clean Pull + Clean","Clean + Front Squat","Deficit Clean Pull","Power Clean + Push Press"],jerk:["Jerk","Split Jerk","Power Jerk","Front Squat + Jerk","Power Jerk + Split Jerk"],cleanAndJerk:["Clean + Jerk","Clean + Front Squat + Jerk","Power Clean + Split Jerk","Power Clean + Power Jerk","Clean and Jerk"],backSquat:["Back Squat","Pause Back Squat","Good Morning","Barbell Back Squat Jumps"],frontSquat:["Front Squat","Pause Front Squat"],pushPress:["Push Press"],RPEorRIR:["Pushups","Pullups","Back Extension","Situps","Cable Row","Bench Press","Box Jumps","Bent Over Barbell Row","Pendlay Row","Barbell Bicep Curl","Dips","Barbell Strict Press","Lu Xiaojun Raise","Bent Over Plate Rear Delt Flye","Abs (your choice)","Hanging Knee/Leg Raise","Calf Raise","1-Arm Dumbbell Row","Bulgarian Split Squat","Seated Barbell Press","Seated Dumbbell Press"]};function K(e,t){return e.split(" ").map((function(e){return e.indexOf("%")>-1?function(e,t){var n=e.split("-").filter((function(e){return""!==e})).map((function(e){return(Math.abs(parseInt(e))*t/100).toFixed()+"kg"})).join("-");return"".concat(n," (").concat(e,")")}(e,t):e})).join(" ")}function Y(e,t){var n=e.exerciseName,a=e.instruction,r=function(e,t){return t[Object.keys(z).filter((function(t){return z[t].map((function(e){return e.toLowerCase()})).includes(e.toLowerCase().replace("optional: ",""))}))[0]]}(n,t);return r?K(a,r):a}function Z(e){var t=e.links.map((function(e){var t=e.to,n=e.component;return r.a.createElement(u.b,{key:t,exact:!0,path:t,component:n})}));return r.a.createElement(u.d,null,t,r.a.createElement(u.a,{to:M.getCurrentPage()?M.getCurrentPage():"/learner/login"}))}var G=n(19),Q=n(25),X=n(168);function V(e){var t=e.to,n=e.label,a=Object(Q.a)(e,["to","label"]),c=Object(u.g)();return r.a.createElement("button",Object.assign({onClick:function(){return c.push(t)}},a),n)}var $=n(172),ee=n(173),te=r.a.memo((function(e){var t=e.actionStatus,n=e.onCloseActionStatusDiv,a=t.action,c=t.isActionSuccess,l="Action Status",o="",s="",u="";if(a)switch(c){default:l="Applying ".concat(a.toUpperCase()," ..."),s="yellow",o="#111";break;case!0:l="".concat(a.toUpperCase()," Successful!"),o="green",s="rgb(107, 236, 172)";break;case!1:l="".concat(a.toUpperCase()," Failed!"),o="red",s="rgb(241, 162, 142)"}else u="hidden";return r.a.createElement("div",{className:"action-status-div",style:{visibility:u,color:o,fontWeight:"600",background:s}},c?r.a.createElement($.a,null):r.a.createElement(ee.a,null),r.a.createElement("span",null,l),r.a.createElement("span",{className:"action-status-close",onClick:n},"X"))}));function ne(e){var t=e.learners,n=e.onLearnerItemClicked,a=t.map((function(e){var t=e.learnerId,a=e.firstName,c=e.lastName;return r.a.createElement("li",{className:"learner-name",key:t,learnerid:t,onClick:n},"".concat(a," ").concat(c))}));return r.a.createElement("ul",null,0===t.length?r.a.createElement("li",{className:"learner-name"},"No Learner Found!"):a)}var ae=n(174),re=n(175),ce=n(176);function le(e){var t=e.label,n=Object(Q.a)(e,["label"]);return r.a.createElement("div",{className:"pbs-field"},r.a.createElement("label",{htmlFor:n.id||n.name},y(t)),r.a.createElement("input",Object.assign({className:"text-input"},n)))}function oe(e){var t=e.selectedLearner,n=void 0===t?{}:t,a=e.onPersonalBestsInputChange,c=e.onUpdatePersonalBests,l=e.enableEditAndUpdate,o=e.canEditAndUpdate,s=e.onDeleteLearner,u=Object.keys(n).map((function(e){return"learnerId"===e?null:r.a.createElement(le,{label:e,name:e,type:"text",key:e,value:n[e],onChange:a,readOnly:!o,style:{opacity:o?"1":"0.75"}})}));return r.a.createElement("div",{className:"pbs-form-wrapper"},r.a.createElement("h3",{style:{textTransform:"capitalize"}},n.firstName),r.a.createElement("form",{readOnly:!o,onDoubleClick:l},u),r.a.createElement("div",{className:"pbs-form-btn-wrapper"},r.a.createElement("button",{className:"pbs-btn",onClick:l},r.a.createElement(ae.a,{className:"pbs-btn-icon"}),o?"Disable Edit ":"Enable Edit "),r.a.createElement("button",{className:"pbs-btn",onClick:c,disabled:!o},r.a.createElement(re.a,{className:"pbs-btn-icon"}),"Save "),r.a.createElement("button",{className:"pbs-btn",onClick:s,disabled:!o},r.a.createElement(ce.a,{className:"pbs-btn-icon"}),"Delete ")))}function se(e){var t=e.searchPhrase,n=e.onSearchPhraseChanged,a=e.learners,c=e.displayedLearners,l=e.onLearnerItemClicked;return r.a.createElement("div",{className:"learnerListPanel",style:{display:"flex"}},r.a.createElement("div",{className:"searchInputWrapper",style:{display:"flex",flexDirection:"column"}},r.a.createElement("input",{className:"learnerSearchInput",value:t,onChange:n,placeholder:0===a.length?"No Learners Added Yet":"Type to Filter",disabled:0===a.length})),r.a.createElement("div",{className:"learnerNameList"},0===a.length?r.a.createElement("ul",null,r.a.createElement("li",{className:"learner-name"},"No Learners Added Yet")):r.a.createElement(ne,{learners:c,onLearnerItemClicked:l})))}var ue=n(32),ie=n(43),de=Object(ie.b)({name:"learnerschedules",initialState:{schedules:[{scheduleId:12,scheduleName:"October 2020 Peaking Cycle",weekCount:6,programmeName:"Youth and Junior"},{scheduleId:6,scheduleName:"September 2020 Strength",weekCount:5,programmeName:"Youth and Junior"}]},reducers:{initSchedules:function(e,t){e.schedules=Object(T.a)(t.payload)}}}),me=function(e){return e.learnerSchedules.schedules},pe=de.actions.initSchedules,fe=de.reducer;var he=n(36),be=n(178),ge=n(132),ve=n(133),ye=n(140),ke=n(177),Se=Object(ke.a)((function(e){return{formControl:{margin:e.spacing(1),maxWidth:"100%"},selectEmpty:{marginTop:e.spacing(2)},label:{fontWeight:"var(--fw-md)"}}}));function Ee(e){var t=e.schedules,n=e.onScheduleChecked,a=e.label,c=e.selectedSchedule,l=Se();if(!t)return r.a.createElement(he.a,{component:"p"},"No Cycle Available");var o=t.map((function(e){var t=e.scheduleName,n=e.scheduleId;return r.a.createElement(be.a,{value:n,key:n},t)}));return r.a.createElement(ge.a,{component:"fieldset",className:l.formControl},r.a.createElement(ve.a,{id:"cycle",className:l.label},a),r.a.createElement(ye.a,{value:c.scheduleId,onChange:n},o))}var we=Object(ke.a)((function(e){return{formControl:{margin:e.spacing(1),maxWidth:"100%"},selectEmpty:{marginTop:e.spacing(2)}}}));function Oe(e){var t=e.selectedSchedule,n=e.onWeekSelected,a=e.selectedWeek,c=e.label,l=we();if(!t)return null;var o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Array(e).fill().map((function(e,n){return n+t}))}(t.weekCount).map((function(e){return r.a.createElement(be.a,{value:e,key:e},e)}));return r.a.createElement(ge.a,{component:"fieldset",className:l.formControl},r.a.createElement(ve.a,{id:"week"},c),r.a.createElement(ye.a,{value:a,onChange:n},o))}var je=Object(ie.b)({name:"learnerPbs",initialState:{pbs:{backSquat:100,clean:100,cleanAndJerk:100,frontSquat:100,jerk:100,pushPress:100,snatch:100}},reducers:{initPbs:function(e,t){e.pbs=t.payload}}}),Ce=function(e){return e.learnerPbs.pbs},xe=je.actions.initPbs,Ne=je.reducer,Pe=Object(ie.b)({name:"dailyExercises",initialState:{exercises:null,prevWeek:null,prevScheduleId:null,stale:!1},reducers:{initDailyExercises:function(e,t){e.exercises=JSON.parse(t.payload.exercises),e.prevWeek=t.payload.week,e.prevScheduleId=t.payload.scheduleId}}}),Ie=function(e){return e.dailyExercises},Ae=Pe.actions.initDailyExercises,Fe=Pe.reducer;function Le(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Object(a.useState)(null),c=Object(o.a)(n,2),l=c[0],s=c[1],u=r.a.memo((function(n){var a=n.isFetchSuccess,c=Object(Q.a)(n,["isFetchSuccess"]);switch(a){default:return r.a.createElement("div",Object.assign({},c,{style:{color:"var(--bg-cl)"}}),"Fetching ",e||"data"," ...");case!0:return r.a.createElement("div",Object.assign({},c,{style:{color:"green"}}),t||"Finished Fetching Data!");case!1:return r.a.createElement("div",Object.assign({},c,{style:{color:"red"}}),"Failed to Fetch ",e||"data",". Please retry later.")}}));function i(e){var t=Object.assign({},e);return r.a.createElement(u,Object.assign({isFetchSuccess:l},t))}return{isFetchSuccess:l,setIsFetchSuccess:s,FetchNotificationDiv:i}}var De=Object(ke.a)((function(){return{wrapper:{margin:"0 auto",display:"flex",alignContent:"space-around",height:"100%",flexDirection:"column",flexWrap:"nowrap"},itemWrapper:{margin:"0 auto",display:"flex",flexDirection:"column",alignContent:"space-around",justifyContent:"center"},header:{fontWeight:"var(--fw-md)",fontSize:"1.25rem"}}}));function _e(e){var t=e.selectedSchedule,n=e.schedules,a=e.onScheduleChecked,c=e.onScheduleSubmitted,l=e.selectedWeek,o=e.onWeekSelected,s=De();return r.a.createElement(X.a,{container:!0,className:s.wrapper},r.a.createElement(X.a,{item:!0,xs:8,md:6,lg:4,className:s.itemWrapper},r.a.createElement(he.a,{component:"header",className:s.header},t.programmeName)),r.a.createElement(X.a,{item:!0,xs:8,md:6,lg:4,className:s.itemWrapper,style:{background:"var(--txt-cl)"}},r.a.createElement(Ee,{schedules:n,onScheduleChecked:a,label:"Available Cycles",selectedSchedule:t}),r.a.createElement(Oe,{onWeekSelected:o,selectedSchedule:t,label:"Week",selectedWeek:l})),r.a.createElement(X.a,{item:!0,xs:8,md:6,lg:4,className:s.itemWrapper},r.a.createElement("button",{className:"submit-btn",style:{width:"100%",margin:"1rem",alignSelf:"center"},onClick:c},"Let's Go!")))}var Be=Object(ke.a)((function(e){return{formControl:{margin:e.spacing(1),maxWidth:"100%"},selectEmpty:{marginTop:e.spacing(2)},select:{paddingRight:e.spacing(4)}}}));function Te(e){var t=e.exercises,n=e.onDaySelected,a=e.selectedDay,c=e.label,l=Be();if(!t)return r.a.createElement(he.a,{component:"p"},"No ",c," Available");var o=Object.keys(t).map((function(e){return r.a.createElement(be.a,{value:e,key:e},e)}));return r.a.createElement(ge.a,{component:"fieldset",className:l.formControl},r.a.createElement(ye.a,{value:a,onChange:n,className:l.select},o))}var Ue=n(180),We=n(181),Je=n(182),Re=n(183),He=n(184),qe=n(185);function Me(e){var t=e.dailyExercises,n=e.pbs;return r.a.createElement(Ue.a,null,r.a.createElement(We.a,{className:"learner-table",size:"small","aria-label":"learner-exercise -table"},r.a.createElement(Je.a,null,r.a.createElement(Re.a,null,Object.keys(t[0]).map((function(e){return r.a.createElement(He.a,{key:e,className:"learner-table-cell head",align:"center"},y(e))})))),r.a.createElement(qe.a,null,t.map((function(e){return r.a.createElement(Re.a,{key:e.exerciseName,className:"timetable-row"},r.a.createElement(He.a,{className:"learner-table-cell",align:"center"},e.exerciseName),r.a.createElement(He.a,{className:"learner-table-cell",align:"center"},Y(e,n)))})))))}var ze=n(207),Ke=n(186),Ye=n(187),Ze=Object(ke.a)((function(){return{dialog:{width:"100vw",height:"100vh"},content:{background:"var(--secondary-cl)",paddingTop:"0"},form:{margin:"11% auto var(--mg-sm)",width:"100vw",height:"100vh"}}}));function Ge(e){var t=e.onDialogCloseClicked,n=e.open,a=Ze();return r.a.createElement(ze.a,{fullScreen:!0,open:n,onClose:t,"aria-labelledby":"form-dialog-title",className:a.dialog},r.a.createElement(Ke.a,{className:a.content},r.a.createElement("iframe",{title:"learner-feedback-form",style:{margin:"11% auto var(--mg-sm)",width:"90vw",height:"100vh"},src:"https://docs.google.com/forms/d/e/1FAIpQLSeBrxdCbRf1M0YvZVHp2n3taph7-pAS9mkbN99m2ZPeBrf0yQ/viewform?embedded=true"},"Loading\u2026")),r.a.createElement(Ye.a,{style:{display:"flex",justifyContent:"space-evenly",backgroundColor:"var(--txt-cl)"}},r.a.createElement("button",{onClick:t,style:{width:"max-content"}},"Close")))}var Qe=Object(ke.a)((function(){return{dialog:{width:"100vw",height:"100vh"},content:{background:"var(--txt-cl)",paddingTop:"0"},form:{margin:"11% auto var(--mg-sm)",width:"100vw",height:"100vh"}}}));function Xe(e){var t=e.onDialogCloseClicked,n=e.onPersonalBestsInputChange,a=e.pbs,c=e.open,l=Qe();return r.a.createElement(ze.a,{fullScreen:!0,open:c,onClose:t,"aria-labelledby":"form-dialog-title",className:l.dialog},r.a.createElement(Ke.a,{className:l.content},r.a.createElement(et,{pbs:a,onPersonalBestsInputChange:n,onDialogCloseClicked:t})))}var Ve=n(188);function $e(e){var t=e.label,n=Object(Q.a)(e,["label"]);return r.a.createElement(X.a,{item:!0},r.a.createElement(Ve.a,Object.assign({label:y(t),className:"text-input"},n)))}function et(e){var t=e.pbs,n=e.onPersonalBestsInputChange,a=e.onDialogCloseClicked,c=Object.keys(t).map((function(e){return"learnerId"===e?null:r.a.createElement($e,{label:e,name:e,type:"text",key:e,value:t[e],onChange:n})}));return r.a.createElement("div",{className:"pbs-form-wrapper"},r.a.createElement("h3",{style:{textTransform:"capitalize"}},"Personal Bests"),r.a.createElement("form",null,r.a.createElement(X.a,{container:!0,direction:"column",justify:"space-around",align:"center",style:{height:"80vh"}},c)),r.a.createElement(X.a,{item:!0,className:"pbs-form-btn-wrapper",style:{justifyContent:"center"}},r.a.createElement("button",{className:"pbs-btn",onClick:a,style:{width:"30%"}},r.a.createElement(re.a,{className:"pbs-btn-icon"}),"Save")))}function tt(e){var t=e.onInstructorLogIn;M.setCurrentPage("/instructor/login");var n=Object(a.useState)({email:"",password:""}),c=Object(o.a)(n,2),l=c[0],s=c[1],u=Object(a.useState)(null),i=Object(o.a)(u,2),d=i[0],m=i[1];function p(){return(p=Object(v.a)(g.a.mark((function e(n){var a,r,c,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!(a=x(l))){e.next=5;break}return m(a),e.abrupt("return");case 5:return m(null),console.log("Logging in with ",l),e.next=9,L.instructorLogin(l);case 9:if(r=e.sent,c=r.ok,o=r.payload,c){e.next=17;break}return m(o.message),e.abrupt("return");case 17:h.saveToken(o.token),t();case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-evenly",minHeight:"100%",margin:"0 auto"}},r.a.createElement(at,null),r.a.createElement(lt,{title:"Instructor Login",onFormSubmitted:function(e){return p.apply(this,arguments)},credentials:l,onInputChanged:function(e){var t=e.target.getAttribute("name"),n=e.target.value.trim();s((function(e){return e[t]=n,e}))},errorMessage:d,type:"instructor"}))}function nt(e){var t=e.onLearnerLogIn,n=e.isLearnerLoggedIn;M.setCurrentPage("/learner/login");var c=Object(ue.b)(),l=Object(a.useState)({username:"",password:""}),s=Object(o.a)(l,2),i=s[0],d=s[1],m=Object(a.useState)(null),p=Object(o.a)(m,2),f=p[0],b=p[1];function y(){return(y=Object(v.a)(g.a.mark((function e(n){var a,r,l,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!(a=N(i))){e.next=5;break}return b(a),e.abrupt("return");case 5:return b(null),console.log("Logging in with ",i),e.next=9,D.learnerLogin(i);case 9:if(r=e.sent,l=r.ok,o=r.payload,l){e.next=17;break}return b(o.message),e.abrupt("return");case 17:h.saveToken(o.token),delete o.token,c(pe(o.schedules)),c(xe(o.pbs)),t();case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return n?r.a.createElement(u.a,{to:"learner/schedules"}):r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"space-evenly",minHeight:"100%",margin:"0 auto"}},r.a.createElement(at,null),r.a.createElement(lt,{title:"Learner Login",onFormSubmitted:function(e){return y.apply(this,arguments)},credentials:i,onInputChanged:function(e){var t=e.target.getAttribute("name"),n=e.target.value.trim();d((function(e){return e[t]=n,e}))},errorMessage:f}))}function at(e){var t=e.style;return r.a.createElement("div",{className:"logo-wrapper"},r.a.createElement("img",{style:t,className:"logo",src:n(129),alt:"New Zealand Olympic Weight-Lifting Logo"}))}function rt(e){var t=e.customClassName,n=e.label,a=e.onClick;return r.a.createElement("button",{type:"submit",className:"submit-btn ".concat(t),onClick:a},n)}function ct(e){var t=e.errorMessage;return r.a.createElement("div",{className:"error-message-wrapper"},r.a.createElement("p",{className:"error-message",style:{visibility:t?"visible":"hidden"}},t))}function lt(e){var t=e.title,n=e.onFormSubmitted,a=e.errorMessage,c=e.type,l=e.credentials,o=e.onInputChanged;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{style:{fontSize:"calc(var(--fs-md) * 0.75)",marginBottom:"3rem"}},t),r.a.createElement("form",{className:"login-form",onSubmit:n},r.a.createElement(ot,{credentials:l,onInputChanged:o}),r.a.createElement(ct,{errorMessage:a}),r.a.createElement(st,{type:c})))}function ot(e){var t=e.credentials,n=e.onInputChanged,a=Object.keys(t).map((function(e){return r.a.createElement(X.a,{item:!0,xs:10,md:6,lg:4,style:{margin:"0 auto"},key:e},r.a.createElement(Ve.a,{style:{marginBottom:"1rem"},variant:"outlined",label:e,InputProps:{name:e,type:"password"===e?"password":"text"},onChange:n}))}));return r.a.createElement(r.a.Fragment,null,a)}function st(e){var t;return t="instructor"===e.type?r.a.createElement(rt,{customClassName:"login right",label:"Log In"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(rt,{customClassName:"login left",label:"Sign Up"}),r.a.createElement(rt,{customClassName:"login right",label:"Log In"})),r.a.createElement(X.a,{item:!0,xs:10,md:8,lg:4,style:{margin:"0 auto",display:"flex"}},t)}var ut={learner:[{to:"/learner/schedules",label:"Schedules",component:function(){M.setCurrentPage("/learner/schedules");var e=Object(ue.c)(me),t=Object(a.useState)(e?e[0]:null),n=Object(o.a)(t,2),c=n[0],l=n[1],s=Object(a.useState)(e?1:null),i=Object(o.a)(s,2),d=i[0],m=i[1],p=Object(a.useState)(!1),f=Object(o.a)(p,2),h=f[0],b=f[1];return h?r.a.createElement(u.a,{to:"/learner/".concat(c.scheduleId,"/").concat(d)}):r.a.createElement(_e,{selectedSchedule:c,schedules:e,onScheduleChecked:function(t){var n=parseInt(t.target.value);console.log(n),l(e.find((function(e){return e.scheduleId===n})))},onScheduleSubmitted:function(e){b(!0)},selectedWeek:d,onWeekSelected:function(e){m(parseInt(e.target.value))}})},isProtected:!0,display:!0},{to:"/logout",label:"Log Out",component:null,isProtected:!0,display:!0},{to:"/learner/:scheduleId/:week",label:"Exercises",component:function(){var e=Object(ue.b)(),t=Object(u.h)(),n=t.scheduleId,c=t.week,l=Object(ue.c)(Ie),s=l.prevWeek,i=l.prevScheduleId,d=l.exercises,m=Object(a.useState)("day 1"),p=Object(o.a)(m,2),f=p[0],h=p[1],b=Object(a.useState)(!1),y=Object(o.a)(b,2),k=y[0],E=y[1],w=Object(a.useState)(!1),O=Object(o.a)(w,2),j=O[0],C=O[1],x=Object(ue.c)(Ce),N=Object(a.useState)(Object(ue.c)(Ce)),P=Object(o.a)(N,2),I=P[0],A=P[1],F=Le("exercises"),L=F.setIsFetchSuccess,B=F.FetchNotificationDiv;function T(){return(T=Object(v.a)(g.a.mark((function t(){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(S(x,I)){t.next=6;break}return t.next=3,D.updateLearnerPbs(I);case 3:n=t.sent,n.ok;case 6:e(xe(I)),C(!1);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(a.useEffect)((function(){function t(){return(t=Object(v.a)(g.a.mark((function t(n,a){var r,c,l;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s!==a||i!==n){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,_.fetchExercises(n,a);case 4:r=t.sent,c=r.ok,l=r.payload,c?(L(!0),e(Ae({exercises:l,scheduleId:n,week:a}))):L(!1);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(e,n){t.apply(this,arguments)}(n,c)}),[n,c,L,i,s,e]),d?r.a.createElement(r.a.Fragment,null,r.a.createElement(X.a,{container:!0,direction:"column",justify:"space-around",style:{height:"100%"}},r.a.createElement(X.a,{item:!0},r.a.createElement(he.a,{variant:"h6",component:"div"},"Week ",c),r.a.createElement(Te,{exercises:d,onDaySelected:function(e){h(e.target.value)},selectedDay:f,label:"Day"}),r.a.createElement(Me,{dailyExercises:d[f],pbs:x})),r.a.createElement(X.a,{container:!0,justify:"space-evenly",item:!0},r.a.createElement(X.a,{item:!0},r.a.createElement(V,{className:"submit-btn",style:{fontSize:"0.75rem"},to:"/learner/schedules",label:"Schedules"},"Schedules")),r.a.createElement(X.a,{item:!0},r.a.createElement("button",{className:"submit-btn",style:{fontSize:"0.75rem"},onClick:function(){C(!0)}},"Edit PBs")),r.a.createElement(X.a,{item:!0},r.a.createElement("button",{className:"submit-btn",style:{fontSize:"0.75rem"},onClick:function(){E(!0)}},"Feedback")))),r.a.createElement(Ge,{onDialogCloseClicked:function(){E(!1)},open:k}),r.a.createElement(Xe,{onDialogCloseClicked:function(){return T.apply(this,arguments)},open:j,pbs:I,onPersonalBestsInputChange:function(e){var t=e.target.getAttribute("name"),n=e.target.value;console.log(t),A((function(e){var a=Object(G.a)({},e);return a["".concat(t)]=parseFloat(n)?parseFloat(n):0,a}))}})):r.a.createElement(B,null)},isProtected:!0,display:!1}],instructorApp:[{to:"/instructor/login",label:"Instructor Space",isProtected:!1,display:!0}]};function it(e){var t=e.onAppChange,n=Object(a.useState)(h.isAuthenticated()),c=Object(o.a)(n,2),l=c[0],i=c[1],p=Object(a.useState)(h.isAuthenticated()?ut.learner:ut.instructorApp),f=Object(o.a)(p,2),b=f[0],g=f[1];return r.a.createElement(s.a,null,r.a.createElement(d,{links:b,onLogOut:function(e){console.log("log me out!"),h.clearToken(),M.setCurrentPage("/learner/login"),g(ut.instructorApp),i(!1)},pageTitle:"Otago WeightLifting Learner Space",onAppChange:t}),r.a.createElement("div",{className:"App main"},l?r.a.createElement(u.a,{to:"/learner/login"!==M.getCurrentPage()&&null!==M.getCurrentPage()?M.getCurrentPage():"/learner/schedules"}):r.a.createElement(nt,{onLearnerLogIn:function(){g(ut.learner),i(!0)},isLearnerLoggedIn:l}),r.a.createElement(Z,{links:b})),r.a.createElement(m,null))}var dt=function e(t,n){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;Object(p.a)(this,e),this.reader=new FileReader,this.reader.programmeIds=t,this.reader.scheduleName=n,this.reader.isNew=a,this.reader.scheduleId=r,this.reader.makeTimeTable=function(e){var t={};return function(e){var t=[0,0];return e.reduce((function(e,n){var a=n.week,r=n.day;return t[0]===a&&t[1]===r||(t=[a,r],e.push([a,r])),e}),[])}(e).forEach((function(n){return a=n[0],r=n[1],void e.filter((function(e){var t=e.week,n=e.day;return t===a&&n===r})).reduce((function(e,t){var n=t.exerciseName,c=t.instruction;return void 0===e["week ".concat(a)]&&(e["week ".concat(a)]={}),void 0===e["week ".concat(a)]["day ".concat(r)]&&(e["week ".concat(a)]["day ".concat(r)]=[]),e["week ".concat(a)]["day ".concat(r)].push({exerciseName:n,instruction:c}),e}),t);var a,r})),t},this.reader.onload=function(){var e=Object(v.a)(g.a.mark((function e(t){var n,r,c,l,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target.result,r=W.a.read(n,{type:"buffer"}),c=[],r.SheetNames.forEach((function(e){var t=W.a.utils.sheet_to_json(r.Sheets[e]);c.push.apply(c,Object(T.a)(t))})),l={timetable:this.makeTimeTable(c)},!a){e.next=12;break}return l=Object(G.a)(Object(G.a)({},l),{},{scheduleName:this.scheduleName,programmeIds:this.programmeIds,weekCount:r.SheetNames.length}),e.next=9,_.postNewSchedule(l);case 9:o=e.sent,e.next=16;break;case 12:return l=Object(G.a)(Object(G.a)({},l),{},{scheduleId:this.scheduleId,weekCount:r.SheetNames.length}),e.next=15,_.repostSchedule(l);case 15:o=e.sent;case 16:return e.abrupt("return",o);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),this.reader.onerror=function(e){console.error("File could not be read! Code "+e.target.error.code)},this.reader.readAsArrayBufferPromise=function(e){return new Promise((function(t,n){var a=new FileReader;a.onload=function(e){return t(e.target.result)},a.onerror=n,a.readAsArrayBuffer(e)}))}},mt=n(138);function pt(e,t){var n=Object(a.useState)({action:null,isActionSuccess:!0}),c=Object(o.a)(n,2),l=c[0],s=c[1];function u(){return i.apply(this,arguments)}function i(){return(i=Object(v.a)(g.a.mark((function n(){var a,r=arguments;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s({action:e,isActionSuccess:null}),n.next=3,t.apply(void 0,r);case 3:return(a=n.sent).ok?(s({action:e,isActionSuccess:!0}),console.log("".concat(O(e)," Successful!"))):(s({action:e,isActionSuccess:!1}),console.log("".concat(O(e)," failed!"))),n.abrupt("return",a);case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function d(){s({action:null,isActionSuccess:null})}function m(){return r.a.createElement(te,{actionStatus:l,onCloseActionStatusDiv:d})}return function(e){var t={};return t["".concat(e,"ActionStatus")]=l,t["set".concat(O(e),"ActionStatus")]=s,t["callDecorated".concat(O(e),"Service")]=u,t["onClose".concat(O(e),"StatusDiv")]=d,t["".concat(O(e),"Snackbar")]=m,t}(e)}function ft(e){var t=e.onActionSuccess,n=Object(a.useState)(null),c=Object(o.a)(n,2),l=c[0],s=c[1],u=Object(a.useState)([]),i=Object(o.a)(u,2),d=i[0],m=i[1],p=Object(a.useState)(""),f=Object(o.a)(p,2),h=f[0],b=f[1],y=Le("programmes"),k=y.isFetchSuccess,S=y.setIsFetchSuccess,E=y.FetchNotificationDiv,w=pt("upload",_.postNewSchedule),O=w.callDecoratedUploadService,j=w.UploadSnackbar;function C(){return(C=Object(v.a)(g.a.mark((function e(n){var a,r,c,o,s,u,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.target.files[0],new dt(d,h).reader.readAsArrayBufferPromise(a),e.next=5,B(a);case 5:return r=e.sent,c=H(r,d,h,!0),e.next=9,O(c);case 9:if(o=e.sent,s=o.ok,u=o.payload,!s){e.next=17;break}return i=x(u,l),t("upload",{newScheduleInfoObject:i}),console.log("Upload Successful!"),e.abrupt("return");case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(e,t){return Object(G.a)(Object(G.a)({},e),{},{programmes:t.filter((function(e){return d.includes(e.programmeId)}))})}return Object(a.useEffect)((function(){function e(){return(e=Object(v.a)(g.a.mark((function e(){var t,n,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.fetchProgrammes();case 2:t=e.sent,n=t.ok,a=t.payload,n?(console.log(a),s(a.programmes),S(!0)):S(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[S]),r.a.createElement(X.a,{item:!0,xs:8,md:12,lg:12,style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},l?r.a.createElement(r.a.Fragment,null,r.a.createElement(Vt,{label:"Cycle Name",onClickedScheduleNameChanged:function(e){b(e.target.value)},scheduleName:h}),r.a.createElement(St,{programmes:l,isFetchSuccess:k,onProgrammeChecked:function(e){var t=parseInt(e.target.value);e.target.checked?(console.log(t),m([].concat(Object(T.a)(d),[t]))):m((function(e){var n=Object(T.a)(e);return q(t,n),n}))},label:"Publish to Team: "}),r.a.createElement(j,null),h.length>5?r.a.createElement(bt,{onFileUploaded:function(e){return C.apply(this,arguments)}}):r.a.createElement(mt.a,null,"Please Enter The Cycle's Name Before Uploading")):r.a.createElement(E,null))}var ht=n(189);function bt(e){var t=e.onFileUploaded;return r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:"var(--mg-sm)"}},r.a.createElement(ve.a,{style:{padding:"var(--pd-sm)",minWidth:"max-content",margin:"0 auto",border:"1px solid var(--txt-cl)"},htmlFor:"fileUploader"},r.a.createElement(ht.a,{style:{color:"var(--bg-cl)",fontSize:"var(--fs-lg)",margin:"0 calc(1 * var(--mg-lg))"}})),r.a.createElement("input",{style:{margin:"0 auto",display:"none"},type:"file",id:"fileUploader",name:"fileUploader",accept:".xls, .xlsx",onChange:t}))}var gt=n(190),vt=n(206),yt=n(134),kt=n(192);function St(e){var t,n=e.programmes,a=e.onProgrammeChecked,c=e.label;if(n.length>0){var l=n.map((function(e){var t=e.programmeName,n=e.programmeId;return r.a.createElement(gt.a,{key:n,control:r.a.createElement(vt.a,{onChange:a,name:t,value:n,color:"primary"}),label:t})}));t=r.a.createElement(r.a.Fragment,null,r.a.createElement(yt.a,{component:"legend"},c),r.a.createElement(kt.a,null,l))}else t=r.a.createElement(he.a,{component:"p"},"No Programme Available");return r.a.createElement(ge.a,{component:"fieldset",style:{marginBottom:"var(--mg-sm)"}},t)}var Et=function(){function e(){Object(p.a)(this,e)}return Object(f.a)(e,null,[{key:"_updateScheduleDetails",value:function(e,t){var n=e.scheduleId,a=e.scheduleName,r=e.weekCount,c=Object(T.a)(t),l=c.findIndex((function(e){return e.scheduleId===n}));return c[l]=Object(G.a)(Object(G.a)({},c[l]),{},{scheduleName:a,weekCount:r}),c}},{key:"_addPublishedProgramme",value:function(e,t){var n=e.scheduleId,a=e.programmes,r=Object(T.a)(t),c=r.find((function(e){return e.scheduleId===n}));return c.programmes=[].concat(Object(T.a)(c.programmes),Object(T.a)(a)),r}},{key:"_removeProgrammeFromSchedule",value:function(e,t){var n=e.scheduleId,a=e.targetProgramme,r=Object(T.a)(t),c=r.find((function(e){return e.scheduleId===n})),l=c.programmes.findIndex((function(e){return e.programmeId===a.programmeId}));return c.programmes.splice(l,1),r}},{key:"_deleteOneScheduleById",value:function(e,t){var n=e.scheduleId;return t.filter((function(e){return e.scheduleId!==n}))}},{key:"_addNewSchedule",value:function(e,t){var n=e.newScheduleInfoObject;return[].concat(Object(T.a)(t),[n])}},{key:"factory",value:function(t,n){return function(a,r){switch(a){case"delete":return void n(e._deleteOneScheduleById(r,t));case"upload":return void n(e._addNewSchedule(r,t));case"publish":return void n(e._addPublishedProgramme(r,t));case"unpublish":return void n(e._removeProgrammeFromSchedule(r,t));case"repost":return void n(e._updateScheduleDetails(r,t));default:return}}}}]),e}(),wt=Object(ke.a)((function(e){return{container:{justifyContent:"space-around"},item:{margin:"var(--mg-sm)",padding:0}}}));function Ot(e,t,n){e!==t&&n(t)}var jt=Object(ke.a)((function(e){return{container:{justifyContent:"space-around"},item:{margin:"var(--mg-sm)",padding:0}}}));function Ct(e){return(t=Ht,n=jt,function(e){var a=n();return r.a.createElement(X.a,{item:!0,xs:8,sm:6,md:3,className:a.item},r.a.createElement(t,e))})(e);var t,n}function xt(e){var t=e.schedules,n=(e.unPublishSnackbar,Object(Q.a)(e,["schedules","unPublishSnackbar"])),a=t?t.map((function(e){var t=e.scheduleId,a=e.scheduleName,c=e.weekCount,l=e.programmes;return r.a.createElement(Ct,Object.assign({key:t,scheduleId:t,scheduleName:a,weekCount:c,programmes:l},n))})):null;return r.a.createElement(r.a.Fragment,null,a)}var Nt=n(193),Pt=n(194),It=n(195),At=n(179),Ft=n(131),Lt=n(196),Dt=n(197),_t=n(199),Bt=n(191),Tt=n(78),Ut=n(198),Wt=n(200),Jt=Object(ke.a)((function(e){return{root:{background:"var(--txt-cl)",boxShadow:"var(--bsd-md)"},media:{},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:Tt.a[500]},actionBtnWrapper:{display:"flex",justifyContent:"space-evenly"},scheduleActionBtn:{border:"none",boxShadow:"none",padding:"var(--pd-sm)",width:"max-content","&:hover":{color:"var(--secondary-cl)",background:"#333"}}}}));function Rt(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?parseInt(e.currentTarget.getAttribute(t)):e.currentTarget.getAttribute(t)}function Ht(e){var t=e.onEditScheduleClicked,n=e.onPublishScheduleClicked,a=e.onDeleteScheduleClicked,c=(e.createdAt,e.weekCount),l=e.scheduleName,o=e.scheduleId,s=e.programmes,u=e.onActionSuccess,i=Jt(),d=pt("unpublish",_.unpublishSchedule),m=d.callDecoratedUnpublishService,p=d.UnpublishSnackbar;function f(e){return h.apply(this,arguments)}function h(){return(h=Object(v.a)(g.a.mark((function e(t){var n,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=s.find((function(e){return e.programmeId===Rt(t,"programmeId",!0)})),!window.confirm("Are you sure you want to remove cycle ".concat(l," from team ").concat(n.programmeName))){e.next=7;break}return e.next=4,m(o,n.programmeId);case 4:a=e.sent,a.ok&&u("unpublish",{scheduleId:o,targetProgramme:n});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(Nt.a,{className:i.root},r.a.createElement(Pt.a,{title:l||"Unnamed",subheader:c?"".concat(c," week(s)"):"No Exercises Added Yet"}),r.a.createElement(It.a,null,0===s.length?null:r.a.createElement(At.a,{style:{textAlign:"left"},className:"team-list"},r.a.createElement(he.a,{variant:"subtitle1"},"Currently Used by Team(s):"," "),s.map((function(e){return r.a.createElement(Ft.a,{button:!0,key:e.programmeId,onClick:f,programmeid:e.programmeId,scheduleid:o,programmename:e.programmeName,className:"team-list-item"},r.a.createElement(Lt.a,{className:"team-list-item-text",primary:e.programmeName}),r.a.createElement(Dt.a,null,r.a.createElement(Ut.a,{className:"unpublish-schedule-icon",fontSize:"small"})))}))),r.a.createElement(p,null)),r.a.createElement(_t.a,{disableSpacing:!0,className:i.actionBtnWrapper},r.a.createElement(Bt.a,{className:i.scheduleActionBtn,"aria-label":"edit",onClick:t,scheduleid:o},r.a.createElement(ae.a,null)),r.a.createElement(Bt.a,{className:i.scheduleActionBtn,"aria-label":"publish",onClick:n,scheduleid:o},r.a.createElement(Wt.a,null)),r.a.createElement(Bt.a,{className:i.scheduleActionBtn,"aria-label":"delete",onClick:a,scheduleid:o},r.a.createElement(ce.a,null))))}var qt=n(201),Mt=n(202);function zt(e){var t=e.onActionSuccess,n=r.a.useState(!1),a=Object(o.a)(n,2),c=a[0],l=a[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(qt.a,{onClick:function(){l(!0)},variant:"extended","aria-label":"add",style:{position:"absolute",left:"5%",top:"13.5%"}},r.a.createElement(Mt.a,null),r.a.createElement("span",{style:{textAlign:"center"},className:"add-schedule-btn-wrapper"},"New Cycle")),r.a.createElement(Yt,{open:c,handleClose:function(){l(!1)},onActionSuccess:t}))}var Kt=n(203);function Yt(e){var t=e.handleClose,n=e.open,a=e.onActionSuccess;return r.a.createElement(ze.a,{open:n,onClose:t,"aria-labelledby":"form-dialog-title"},r.a.createElement(Kt.a,{style:{backgroundColor:"var(--txt-cl)"}},r.a.createElement(he.a,{style:{fontWeight:"var(--fw-md)"}},"New Cycle")),r.a.createElement(Ke.a,{className:"add-new-schedule-dialog"},r.a.createElement(ft,{onActionSuccess:a})),r.a.createElement(Ye.a,{style:{justifyContent:"center",padding:"0",backgroundColor:"var(--txt-cl)"}},r.a.createElement("button",{onClick:t,style:{width:"max-content"}},"Close")))}function Zt(e){var t=e.onDialogCloseClicked,n=e.open,a=e.clickedSchedule,c=e.onClickedScheduleNameChanged,l=(e.currentClickedScheduleName,e.onActionSuccess),o=e.canUpdate,s=e.fileUploaded,u=e.onFileUploaded,i=e.buffer,d=Object(Q.a)(e,["onDialogCloseClicked","open","clickedSchedule","onClickedScheduleNameChanged","currentClickedScheduleName","onActionSuccess","canUpdate","fileUploaded","onFileUploaded","buffer"]),m=pt("repost",_.repostSchedule),p=m.callDecoratedRepostService,f=m.RepostSnackbar;function h(){return(h=Object(v.a)(g.a.mark((function e(){var t,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=H(i,[],a.scheduleName,!1,a.scheduleId),e.next=3,p(t);case 3:n=e.sent,n.ok&&(delete t.timetable,l("repost",t));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(ze.a,{open:n,onClose:t,"aria-labelledby":"form-dialog-title"},r.a.createElement(Kt.a,{style:{backgroundColor:"var(--txt-cl)"}},r.a.createElement(he.a,{style:{fontWeight:"var(--fw-md)"}},"Reupload Cycle")),r.a.createElement(Ke.a,{className:"add-new-schedule-dialog"},r.a.createElement(f,null),a&&r.a.createElement(Gt,Object.assign({},d,{onClickedScheduleNameChanged:c,onFileUploaded:u,scheduleName:a.scheduleName,fileUploaded:s}))),r.a.createElement(Ye.a,{style:{display:"flex",justifyContent:"space-evenly",padding:"0",backgroundColor:"var(--txt-cl)"}},r.a.createElement("button",{disabled:!o,onClick:function(){return h.apply(this,arguments)},style:{width:"max-content"}},"Save"),r.a.createElement("button",{onClick:t,style:{width:"max-content"}},"Close")))}function Gt(e){var t=e.onClickedScheduleNameChanged,n=e.onFileUploaded,c=e.scheduleName,l=e.isFileUploaded,s=Object(a.useState)({action:"File Upload",isActionSuccess:l}),u=Object(o.a)(s,2),i=u[0],d=u[1];return r.a.createElement(X.a,{container:!0,xs:8,md:12,lg:12,style:{display:"flex",flexDirection:"column",justifyContent:"space-around"}},r.a.createElement(Vt,{label:"Cycle Name",onClickedScheduleNameChanged:t,scheduleName:c}),r.a.createElement(te,{actionStatus:i,onCloseActionStatusDiv:function(){d({action:null,isActionSuccess:null})}}),c.length>0?r.a.createElement(bt,{onFileUploaded:n}):"Schedule Name Must Not Be Empty")}function Qt(e){var t=e.scheduleId,n=e.onDialogCloseClicked,c=e.open,l=e.onActionSuccess,s=Object(a.useState)([]),u=Object(o.a)(s,2),i=u[0],d=u[1],m=Object(a.useState)(null),p=Object(o.a)(m,2),f=p[0],h=p[1],b=Le("available programmes"),y=b.setIsFetchSuccess,k=b.FetchNotificationDiv,S=pt("publish",_.publishSchedule),E=S.publishActionStatus,w=S.callDecoratedPublishService,O=S.PublishSnackbar;function j(){return(j=Object(v.a)(g.a.mark((function e(){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t,i);case 2:n=e.sent,n.ok&&l("publish",{scheduleId:t,programmes:C(i,f)});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e,t){return t.filter((function(t){return e.includes(t.programmeId)}))}return Object(a.useEffect)((function(){function e(){return(e=Object(v.a)(g.a.mark((function e(t){var n,a,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.getAvailableProgrammesToPublish(t);case 2:if(n=e.sent,a=n.ok,r=n.payload,!a){e.next=9;break}return y(!0),h(r),e.abrupt("return");case 9:y(!1);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}c&&function(t){e.apply(this,arguments)}(t)}),[t,c,y]),r.a.createElement(X.a,{item:!0,xs:10,sm:8,md:6},r.a.createElement(ze.a,{open:c,onClose:n,"aria-labelledby":"form-dialog-title",style:{overflow:"hidden"}},r.a.createElement(Kt.a,{style:{backgroundColor:"var(--txt-cl)",fontWeight:"var(--fw-md)"}},"Publish Cycle"),r.a.createElement("div",{className:"publish-schedule-dialog"},f?r.a.createElement(St,{programmes:f,onProgrammeChecked:function(e){var t=parseInt(e.target.value);e.target.checked?d([].concat(Object(T.a)(i),[t])):d((function(e){var n=Object(T.a)(e);return q(t,n),n}))},label:"Publish to Team"}):r.a.createElement(k,null),E.action?r.a.createElement(O,null):null),r.a.createElement(Ye.a,{style:{justifyContent:"space-around",padding:"0",backgroundColor:"var(--txt-cl)",overflow:"hidden"}},r.a.createElement("button",{disabled:!(i.length>0||!f),onClick:function(){return j.apply(this,arguments)},style:{width:"max-content"}},"Publish"),r.a.createElement("button",{onClick:n,style:{width:"max-content"}},"Close"))))}var Xt=Object(ke.a)((function(e){return{scheduleName:{marginBottom:"var(--mg-sm)"},input:{fontFamily:"var(--ff)",color:"#001e18",marginBottom:"var(--mg-sm)"},formLabelRoot:{fontFamily:"var(--ff)",color:"var(--txt-cl)"},formLabelFocused:{fontFamily:"var(--ff)",color:"var(--txt-cl)","'& label.Mui-focused'":{fontFamily:"var(--ff)",color:"var(--txt-cl)"}}}}));function Vt(e){var t=e.onClickedScheduleNameChanged,n=e.scheduleName,a=e.label,c=Xt();return r.a.createElement(Ve.a,{label:a,className:c.scheduleName,onChange:t,value:n,InputProps:{className:c.input},InputLabelProps:{className:c.formLabelRoot}})}var $t={instructor:[{to:"/instructor/schedules",label:"Schedules",component:function(){M.setCurrentPage("/instructor/schedules");var e=Object(a.useState)(null),t=Object(o.a)(e,2),n=t[0],c=t[1],l=Object(a.useState)(null),s=Object(o.a)(l,2),u=s[0],i=s[1],d=Object(a.useState)(null),m=Object(o.a)(d,2),p=m[0],f=m[1],h=Object(a.useState)(null),b=Object(o.a)(h,2),y=b[0],k=b[1],S=Object(a.useState)(!1),E=Object(o.a)(S,2),w=E[0],O=E[1],j=Object(a.useState)(!1),C=Object(o.a)(j,2),x=C[0],N=C[1],P=Object(a.useState)(!1),I=Object(o.a)(P,2),A=I[0],F=I[1],L=Object(a.useState)(null),D=Object(o.a)(L,2),T=D[0],U=D[1],W=Object(a.useState)(!1),J=Object(o.a)(W,2),R=J[0],H=J[1],q=Le("schedules"),z=q.setIsFetchSuccess,K=q.FetchNotificationDiv,Y=pt("delete",_.deleteSchedule),Z=Y.callDecoratedDeleteService,Q=Y.DeleteSnackbar,V=Et.factory(n,c);function $(){return($=Object(v.a)(g.a.mark((function e(t){var n,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target.files[0],e.next=3,B(n);case 3:a=e.sent,U(a),H(!0),F(!0);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(e){return parseInt(e.currentTarget.getAttribute("scheduleId"))}function te(e){Ot(w,!1,O),Ot(x,!1,N),Ot(R,!1,H),Ot(A,!1,F),Ot(T,null,U),Ot(p,null,f),Ot(y,null,k)}function ne(){return(ne=Object(v.a)(g.a.mark((function e(t){var n,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=ee(t),i(ee(t)),!window.confirm("Are you sure you want to delete schedule id ".concat(n))){e.next=8;break}return e.next=5,Z(n);case 5:a=e.sent,a.ok&&V("delete",{scheduleId:n});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){function e(){return(e=Object(v.a)(g.a.mark((function e(){var t,n,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.fetchScheduleInfo();case 2:t=e.sent,n=t.ok,a=t.payload,n&&(z(!0),c(a)),z(!1);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[z]);var ae=wt();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Q,null),r.a.createElement(zt,{onActionSuccess:V}),r.a.createElement(X.a,{container:!0,className:ae.container},n?r.a.createElement(r.a.Fragment,null,r.a.createElement(xt,{schedules:n,onEditScheduleClicked:function(e){console.log(e.currentTarget.getAttribute("scheduleId")),O(!0),i(ee(e));var t=n.find((function(t){return t.scheduleId===ee(e)}));f(t),k(t.scheduleName)},onPublishScheduleClicked:function(e){console.log("Publish schedule id ".concat(e.currentTarget.getAttribute("scheduleId"))),N(!0),i(ee(e))},onDeleteScheduleClicked:function(e){return ne.apply(this,arguments)},onActionSuccess:V})):r.a.createElement(K,{style:{margin:"0 auto"}})),r.a.createElement(Zt,{open:w,onDialogCloseClicked:te,clickedSchedule:p,onActionSuccess:V,onClickedScheduleNameChanged:function(e){var t=e.target.value;f(Object(G.a)(Object(G.a)({},p),{},{scheduleName:t})),F(function(e,t,n){var a=e.length>0;return!n&&a&&e!==t||n&&a}(t,y,R))},canUpdate:A,buffer:T,isFileUploaded:R,onFileUploaded:function(e){return $.apply(this,arguments)}}),r.a.createElement(Qt,{open:x,onDialogCloseClicked:te,scheduleId:u,onActionSuccess:V}))},isProtected:!0,display:!0},{to:"/instructor/learners",label:"Learners Panel",component:function(){M.setCurrentPage("/instructor/learners");var e=Object(a.useState)([]),t=Object(o.a)(e,2),n=t[0],c=t[1],l=Object(a.useState)([]),s=Object(o.a)(l,2),u=s[0],i=s[1],d=Object(a.useState)(""),m=Object(o.a)(d,2),p=m[0],f=m[1],h=Object(a.useState)(null),b=Object(o.a)(h,2),y=b[0],k=b[1],E=Object(a.useState)(!1),w=Object(o.a)(E,2),O=w[0],j=w[1],C=Object(a.useState)({action:null,isActionSuccess:null}),x=Object(o.a)(C,2),N=x[0],P=x[1],I=Object(a.useState)(null),A=Object(o.a)(I,2),F=A[0],L=A[1],_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(n){var a=n.isFetchSuccess,c=Object(Q.a)(n,["isFetchSuccess"]);switch(a){default:return r.a.createElement("div",Object.assign({},c,{style:{color:"var(--bg-cl)"}}),"Loading ",e||"data"," ...");case!0:return r.a.createElement("div",Object.assign({},c,{style:{color:"green"}}),t||"Finished loading data!");case!1:return r.a.createElement("div",Object.assign({},c,{style:{color:"red"}}),"Failed to load ",e||"data")}}}("learners","Click On A Name");function B(e,t){var n=t.trim().toLowerCase();return 0===n.length?e:e.filter((function(e){var t=e.firstName,a=e.lastName;return t.toLowerCase().trim().startsWith(n)||a.toLowerCase().trim().startsWith(n)}))}function U(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"UPDATE",a=Object(T.a)(n);switch(t){default:a[e]=y,c(a),i(B(a,"".concat(y.firstName))),f("".concat(y.firstName));break;case"DELETE":a.splice(e,1),i(a),c(a),k(null),f("")}}function W(e,t){return e.findIndex((function(e){return e.learnerId===t.learnerId}))}function J(){return(J=Object(v.a)(g.a.mark((function e(t){var a,r,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=W(n,y),window.confirm("Are you sure you want to update ".concat(y.firstName,"'s record?"))){e.next=8;break}return k(null),i(n),f(""),e.abrupt("return");case 8:if(!S(n[a],y)){e.next=11;break}return console.log("No need to rerender or update!"),e.abrupt("return");case 11:return P({action:"update",isActionSuccess:null}),e.next=14,D.updateLearner(y);case 14:r=e.sent,(c=r.ok)?(U(a),P({action:"update",isActionSuccess:!0})):(console.log("Updating failed!",c),k(n[a]),f(y.firstName),P({action:"update",isActionSuccess:!1}));case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return(R=Object(v.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Are you sure you want to delete ".concat(y.firstName,"'s record?"))){e.next=3;break}return j(!1),e.abrupt("return");case 3:return P({action:"delete",isActionSuccess:null}),e.next=6,D.deleteLearner(y.learnerId);case 6:a=e.sent,a.ok?(P({action:"delete",isActionSuccess:!0}),U(W(n,y),"DELETE"),console.log("Deleting ... Success!")):(P({action:"delete",isActionSuccess:!1}),console.log("Deleting failed!"));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){function e(){return(e=Object(v.a)(g.a.mark((function e(){var t,n,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.fetchLearners();case 2:t=e.sent,n=t.ok,a=t.payload,n?(c(a),i(a),L(!0)):L(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(te,{actionStatus:N,onCloseActionStatusDiv:function(e){P({action:null,isActionSuccess:null})}}),r.a.createElement("div",{className:"learnerPanelWrapper",style:{display:"flex"}},F?r.a.createElement(se,{searchPhrase:p,onSearchPhraseChanged:function(e){var t=e.target.value;f(e.target.value),i(B(n,t))},learners:n,displayedLearners:u,onLearnerItemClicked:function(e){var t,a=(t=e.target.getAttribute("learnerId"),n.find((function(e){return e.learnerId===parseInt(t)})));k(a)}}):r.a.createElement(_,{isFetchSuccess:F}),y?r.a.createElement(oe,{selectedLearner:y,onPersonalBestsInputChange:function(e){var t=e.target.getAttribute("name"),n=e.target.value;k((function(e){var a=Object(G.a)({},e);return a[t]=n,a}))},onUpdatePersonalBests:function(e){return J.apply(this,arguments)},canEditAndUpdate:O,enableEditAndUpdate:function(){j(!O)},onDeleteLearner:function(e){return R.apply(this,arguments)}}):r.a.createElement(_,{isFetchSuccess:F})))},isProtected:!0,display:!0},{to:"/instructor/account",label:"Account",component:function(e){return e.onLogOutClicked,M.setCurrentPage("/instructor/account"),r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Under Construction"))},isProtected:!0,display:!0},{to:"/logout",label:"Log Out",component:null,isProtected:!0,display:!0}],learnerApp:[{to:"/learner/login",label:"Learner Space",isProtected:!1,display:!0}]};function en(e){var t=e.onAppChange,n=Object(a.useState)(h.isAuthenticated()),c=Object(o.a)(n,2),l=c[0],i=c[1],p=Object(a.useState)(h.isAuthenticated()?$t.instructor:$t.learnerApp),f=Object(o.a)(p,2),b=f[0],g=f[1];return r.a.createElement(s.a,null,r.a.createElement(d,{links:b,pageTitle:"Otago Weightlifting Instructor Space",onLogOut:function(e){console.log("log me out!"),h.clearToken(),M.setCurrentPage("/instructor/login"),g($t.learnerApp),i(!1)},onAppChange:t}),r.a.createElement("div",{className:"App main"},l?r.a.createElement(u.a,{to:"/instructor/login"!==M.getCurrentPage()?M.getCurrentPage():"/instructor/schedules"}):r.a.createElement(tt,{onInstructorLogIn:function(){g($t.instructor),i(!0)}}),r.a.createElement(Z,{links:b})),r.a.createElement(m,null))}function tn(e){var t=e.currentPage,n=e.onAppChange;return t.includes("/instructor")?r.a.createElement(en,{onAppChange:n}):r.a.createElement(it,{onAppChange:n})}var nn=n(99),an=n(204),rn=Object(nn.a)({typography:{fontFamily:["Montserrat","sans-serif"]},palette:{primary:{main:"#028090"},secondary:{main:"#f0f3bd"}}});function cn(){var e=Object(a.useState)(M.getCurrentPage()?M.getCurrentPage():"/learner/login"),t=Object(o.a)(e,2),n=t[0],c=t[1];return r.a.createElement(an.a,{theme:rn},r.a.createElement(tn,{currentPage:n,onAppChange:function(e){var t=e.target.getAttribute("to");console.log(t),M.currentApp=t,M.setCurrentPage(t),c(t)}}))}var ln=Object(ie.a)({reducer:{learnerSchedules:fe,learnerPbs:Ne,dailyExercises:Fe}});l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ue.a,{store:ln},r.a.createElement(cn,null))),document.getElementById("root"))},94:function(e,t){}},[[109,1,2]]]);
//# sourceMappingURL=main.56fa17ee.chunk.js.map