{"version":3,"sources":["assets/logo.jpg","app/Navbar.js","app/Footer.js","services/auth.js","app/ProtectedRoute.js","utils.js","services/http.js","services/validateCredentials.js","services/InstructorServiceSingleton.js","services/LearnerServiceSingleton.js","services/ProgrammeServiceSingleton.js","services/fileReaderPromise.js","services/makeSchedulePayload.js","services/array.js","services/NavHelpers.js","app/PageRoutes.js","components/ActionNotificationDiv.js","components/learners/LearnerNameList.js","components/learners/PersonalBestsForm.js","components/learners/LearnerSearchInput.js","components/home/InstructorLoginPage.js","components/home/LearnerLoginPage.js","components/home/Logo.js","components/home/LoginFormTextInput.js","components/home/LoginFormButton.js","components/home/LoginForm.js","LearnerApp.js","components/learners/LearnerSchedulePage.js","components/schedules/myExcelReader.js","hooks/useActionSnackbar.js","hooks/useFetchSnackbar.js","components/schedules/ScheduleUploader.js","components/schedules/FileUploader.js","components/schedules/ProgrammeOptions.js","components/schedules/ScheduleReducers.js","components/schedules/SchedulePanel.js","components/schedules/ScheduleCards.js","components/schedules/ScheduleCard.js","components/schedules/AddScheduleFloatingButton.js","components/schedules/AddScheduleFormDialog.js","components/schedules/ReuploadScheduleDialog.js","components/schedules/ScheduleReuploader.js","components/schedules/PublishScheduleDialog.js","components/schedules/ScheduleNameInput.js","InstructorApp.js","components/learners/LearnersPanel.js","components/factoryComponent.js","components/home/InstructorAccountPage.js","App.js","AppControl.js","app/store.js","index.js"],"names":["module","exports","NavLink","to","label","className","Navbar","navLinks","links","onLogOut","onAppChange","pageTitle","length","component","map","key","onClick","Footer","UserAuth","sessionStorage","getItem","token","setItem","removeItem","ProtectedRoute","Component","console","log","isAuthenticated","pathname","catchAsync","asyncFunc","errorHandler","a","toString","search","ok","payload","message","shallowEqual","obj1","obj2","Object","entries","every","obj1Key","obj1Value","hasOwnProperty","spinner","show","status","document","querySelector","style","display","safeSpinnerWrapper","func","res","capitalise","string","substring","toUpperCase","HttpServiceSingleton","this","postInstructorCredentials","_fetchPostFactory","_instance","resourceUrl","BASE_URL","timeout","url","_makeUrl","options","method","mode","headers","body","JSON","stringify","Authorization","getToken","_setFetchTimeout","fetch","_makePayload","resourceUrlAndId","ctl","AbortController","setTimeout","abort","signal","response","json","asyncFetchFunc","setInterval","window","location","href","split","includes","getInstance","isNotEmpty","str","trim","validateInstructorCredentials","email","password","test","isValidEmail","validateLearnerCredentials","username","InstructorServiceSingleton","instructorLogin","credentials","getInstructorInstance","LearnerServiceSingleton","updateLearner","deleteLearner","createLearner","learnerLogin","_fetchJsonFactory","selectedLearner","_fetchPutFactory","learner","learnerId","_fetchDeleteFactory","getLearnerInstance","ProgrammeServiceSingleton","fetchProgrammes","fetchSchedules","fetchScheduleInfo","deleteSchedule","publishSchedule","unpublishSchedule","repostSchedule","postNewSchedule","getAvailableProgrammesToPublish","scheduleId","programmeIds","programmeId","getProgrammeInstance","fileReaderPromise","file","Promise","resolve","reject","r","FileReader","onload","e","target","result","onerror","readAsArrayBuffer","parseRows","buffer","workbook","XLSX","read","type","rows","SheetNames","forEach","sheetName","XL_row_object","utils","sheet_to_json","Sheets","push","weekCount","makeTimeTable","exercisesArr","aggregate","prevPair","reduce","pairs","week","day","getWeekDayPair","dayInWeek","w","d","filter","acc","exerciseName","instruction","undefined","makeSchedulePayload","scheduleName","isNew","timetable","findIndexAndDelete","val","arr","splice","findIndex","v","NavHelpers","page","currentPage","PageRoute","isProtected","props","PageRoutes","routes","exact","path","getCurrentPage","ActionNotificationDiv","React","memo","actionStatus","onCloseActionStatusDiv","action","isActionSuccess","color","background","visibility","fontWeight","CheckCircleOutlineRounded","ErrorOutlineRounded","LearnerNameList","learners","onLearnerItemClicked","learnerItems","firstName","lastName","learnerid","PersonalBestInput","htmlFor","id","name","char","index","PersonalBestsForm","onPersonalBestsInputChange","onUpdatePersonalBests","enableEditAndUpdate","canEditAndUpdate","onDeleteLearner","inputs","keys","fieldName","value","onChange","readOnly","opacity","textTransform","onDoubleClick","Edit","disabled","Save","Delete","LearnerSearchInput","searchPhrase","onSearchPhraseChanged","displayedLearners","flexDirection","placeholder","InstructorLoginPage","onInstructorLogIn","useState","setCredentials","errorMessage","setErrorMessage","onInputChanged","changedField","getAttribute","newValue","c","preventDefault","error","httpService","saveToken","fields","LoginFormTextInput","Logo","LoginForm","title","onFormSubmitted","LearnerLoginPage","onLearnerLogIn","isLearnerLoggedIn","src","require","alt","fieldValue","LoginFormButton","customClassName","ErrorMessageDiv","onSubmit","theme","createMuiTheme","typography","fontFamily","allLinks","setCurrentPage","instructorApp","LearnerApp","setIsLearnerLoggedIn","setLinks","ThemeProvider","clearToken","myExcelReader","reader","event","data","code","readAsArrayBufferPromise","useActionSnackbar","serviceMethod","setActionStatus","callDecoratedService","returnedObj","makePayloadObjectWithCustomPropNames","useFetchSnackbar","resourceName","postFetchAction","isFetchSuccess","setIsFetchSuccess","FetchNotificationDiv","ScheduleUploader","onActionSuccess","programmes","setProgrammes","selectedProgrammeIds","setSelectedProgrammeIds","setScheduleName","callDecoratedUploadService","UploadSnackbar","selectedFile","files","newSchedule","newScheduleInfoObject","makeNewScheduleInfoObject","p","useEffect","Grid","item","xs","md","lg","justifyContent","ScheduleNameInput","onClickedScheduleNameChanged","ProgrammeOptions","onProgrammeChecked","checkedProgrammeId","parseInt","checked","newArr","FileUploader","onFileUploaded","FormHelperText","alignItems","marginTop","InputLabel","padding","minWidth","margin","border","CloudUploadRounded","fontSize","accept","content","checkboxes","programmeName","FormControlLabel","control","Checkbox","FormLabel","FormGroup","Typography","FormControl","marginBottom","ScheduleReducers","prevSchedules","newSchedules","targetIndex","s","updatedSchedule","find","targetProgramme","targetSchedule","removedProgrammeIndex","schedules","setSchedules","_deleteOneScheduleById","_addNewSchedule","_addPublishedProgramme","_removeProgrammeFromSchedule","_updateScheduleDetails","useStyles","makeStyles","container","resetState","currentState","initialState","setStateFunc","CustomScheduleCard","ScheduleCard","styleHook","classes","sm","ScheduleCards","unPublishSnackbar","cards","root","boxShadow","media","expand","transform","marginLeft","transition","transitions","create","duration","shortest","expandOpen","avatar","backgroundColor","red","actionBtnWrapper","scheduleActionBtn","width","attr","isNumber","currentTarget","onEditScheduleClicked","onPublishScheduleClicked","onDeleteScheduleClicked","createdAt","callDecoratedUnpublishService","UnpublishSnackbar","onUnpublishScheduleClicked","confirm","Card","CardHeader","subheader","CardContent","List","textAlign","variant","ListItem","button","programmeid","scheduleid","programmename","ListItemText","primary","ListItemIcon","Close","CardActions","disableSpacing","IconButton","aria-label","Share","AddScheduleFloatingButton","open","setOpen","Fab","position","left","top","CloudUpload","AddScheduleFormDialog","handleClose","Dialog","onClose","aria-labelledby","DialogTitle","DialogContent","DialogActions","ReuploadScheduleDialog","onDialogCloseClicked","clickedSchedule","currentClickedScheduleName","canUpdate","fileUploaded","callDecoratedRepostService","RepostSnackbar","ScheduleReuploader","isFileUploaded","PublishScheduleDialog","publishActionStatus","callDecoratedPublishService","PublishSnackbar","getAddedProgrammes","overflow","input","formLabelRoot","formLabelFocused","TextField","InputProps","InputLabelProps","instructor","clickedScheduleId","setClickedScheduleId","setClickedSchedule","currentScheduleName","setCurrentScheduleName","openReuploadDialog","setOpenReuploadDialog","openPublishDialog","setOpenPublishDialog","setCanUpdate","setBuffer","setIsFileUploaded","callDecoratedDeleteService","DeleteSnackbar","updateSchedulesList","factory","getClickedScheduleId","clicked","newName","currentName","isValidLength","checkCanUpdate","setLearners","setDisplayedLearners","setSearchPhrase","setSelectedLearner","setCanEditAndUpdate","FetchLearnersNotificationDiv","FetchNotificationDivFactory","filterLearners","phrase","processedPhrase","toLowerCase","startsWith","updateUILearnerList","updatedLearnerIndex","newLearnersList","getUpdatedLearnerIndex","fetchLearners","selected","newSelectedLearner","onLogOutClicked","learnerApp","InstructorApp","isInstructorLoggedIn","setIsInstructorLoggedIn","App","AppControl","targetPage","currentApp","configureStore","reducer","ReactDOM","render","StrictMode","store","getElementById"],"mappings":"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","file":"static/js/main.1f345cd7.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.226e3c4c.jpg\";","import React from \"react\"\nimport { Link } from \"react-router-dom\"\n\nfunction NavLink({ to, label }) {\n  return (\n    <Link to={to} className=\"nav-item\">\n      {label}\n    </Link>\n  )\n}\n\n//https://reactrouter.com/web/api/Redirect\nexport const Navbar = ({ links, onLogOut, onAppChange, pageTitle }) => {\n  let navLinks\n\n  if (links.length === 1 && !links[0].component) {\n    navLinks = [\n      <span\n        className=\"nav-item\"\n        key={links[0].to}\n        onClick={onAppChange}\n        to={links[0].to}\n      >\n        {links[0].label}\n      </span>,\n    ]\n  } else {\n    navLinks = links.map(({ to, label }) => {\n      return to !== \"/logout\" ? (\n        <NavLink key={to} to={to} label={label} />\n      ) : (\n        //basically need to make a fake link here!\n        <span className=\"nav-item\" key={to} label={label} onClick={onLogOut}>\n          {label}\n        </span>\n      )\n    })\n  }\n\n  return (\n    <nav className=\"header index\">\n      <section>\n        <div className=\"navContent\">\n          <header>\n            <h1 className=\"main-title\">{pageTitle}</h1>\n          </header>\n          <div className=\"navLinks\">{navLinks}</div>\n        </div>\n      </section>\n    </nav>\n  )\n}\n","import React from \"react\"\n\nexport function Footer() {\n  return (\n    <footer className=\"footer index\">\n      <div className=\"footer-text-wrapper\">\n        Otago Weightlifting 2020. All Rights Reserved\n      </div>\n    </footer>\n  )\n}\n","export class UserAuth {\n  static isAuthenticated() {\n    return sessionStorage.getItem(\"token\") !== null\n  }\n\n  static saveToken(token) {\n    sessionStorage.setItem(\"token\", token)\n  }\n\n  static getToken() {\n    return sessionStorage.getItem(\"token\")\n  }\n\n  static clearToken() {\n    sessionStorage.removeItem(\"token\")\n  }\n}\n","import React from \"react\"\nimport { Redirect } from \"react-router-dom\"\nimport { UserAuth } from \"../services/auth\"\n\nexport function ProtectedRoute({ component }) {\n  const Component = component\n  console.log(\"Checking\", UserAuth.isAuthenticated())\n  return UserAuth.isAuthenticated() ? (\n    <Component />\n  ) : (\n    <Redirect to={{ pathname: \"/\" }} />\n  )\n}\n","export function camelCaseToNormal(camelCaseStr) {\n  return camelCaseStr.split(\"\").reduce((str, char, index) => {\n    //first letter is uppercased and returned\n    if (index === 0) {\n      return char.toUpperCase()\n    }\n    //if a letter is uppercase, add a space in front\n    if (char === char.toUpperCase()) {\n      return str + \" \" + char\n    } else {\n      return str + char\n    }\n  }, \"\")\n}\n\n//async error handler decorator\nexport function catchAsync(asyncFunc, errorHandler = null) {\n  return async function (...args) {\n    try {\n      return await asyncFunc(...args)\n    } catch (error) {\n      errorHandler?.(error) ?? console.log(`Something went wrong: ${error}`)\n\n      if (error.toString().search(/AbortError/) !== -1) {\n        return { ok: false, payload: { message: `Server timeouts!` } }\n      } else if (error.toString().search(/NetworkError/) !== -1) {\n        return { ok: false, payload: { message: `Can't connect to Server!` } }\n      } else {\n        return { ok: false, payload: null }\n      }\n    }\n  }\n}\n\nexport function shallowEqual(obj1, obj2) {\n  return Object.entries(obj1).every(([obj1Key, obj1Value]) => {\n    return obj2.hasOwnProperty(obj1Key) && obj1Value === obj2[obj1Key]\n  })\n}\n\nexport const spinner = (function () {\n  function show(status) {\n    if (status === true) {\n      document.querySelector(\"#spinner\").style.display = \"block\"\n    } else {\n      document.querySelector(\"#spinner\").style.display = \"none\"\n    }\n  }\n  return { show }\n})()\n\nexport function safeSpinnerWrapper(func) {\n  return async function (...args) {\n    spinner.show(true)\n    const res = await catchAsync(func)(...args)\n    spinner.show(false)\n    return res\n  }\n}\n\nexport function capitalise(string) {\n  return string.substring(0, 1).toUpperCase() + string.substring(1)\n}\n","import { catchAsync } from \"../utils\"\nimport { UserAuth } from \"./auth\"\n\n//https://dmitripavlutin.com/javascript-fetch-async-await/\nexport class HttpServiceSingleton {\n  //TODO: these methods can be refactored into their own service class as well\n  constructor() {\n    //hide away implementation details from the client components\n    this.postInstructorCredentials = HttpServiceSingleton._fetchPostFactory(\n      \"instructor/login\"\n    )\n    //make sure that only an instance is created\n    this._instance = this\n    if (HttpServiceSingleton._instance) {\n      return this._instance\n    }\n  }\n\n  static BASE_URL = (function () {\n    const PROD = \"https://lifting-schedule-v2.herokuapp.com\"\n    const DEV = \"http://localhost:5000\"\n\n    return window.location.href.split(\".\").includes(\"herokuapp\") ? PROD : DEV\n  })()\n\n  static _makeUrl(resourceUrl) {\n    return `${this.BASE_URL}/${resourceUrl}`\n  }\n\n  //factory functions that makes use of closure\n  static _fetchPostFactory(resourceUrl, timeout = 10) {\n    const url = HttpServiceSingleton._makeUrl(resourceUrl)\n    return catchAsync(async function (payload) {\n      const options = {\n        method: \"POST\",\n        mode: \"cors\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(payload),\n      }\n\n      if (UserAuth.isAuthenticated()) {\n        options.headers.Authorization = `Bearer ${UserAuth.getToken()}`\n      }\n\n      HttpServiceSingleton._setFetchTimeout(timeout, options)\n      return HttpServiceSingleton._makePayload(await fetch(url, options))\n    })\n  }\n\n  static _fetchPutFactory(resourceUrl, timeout = 10) {\n    const url = HttpServiceSingleton._makeUrl(resourceUrl)\n    return catchAsync(async function (payload = null) {\n      const options = {\n        method: \"PUT\",\n        mode: \"cors\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${UserAuth.getToken()}`,\n        },\n      }\n\n      if (payload) {\n        options.body = JSON.stringify(payload)\n      }\n\n      HttpServiceSingleton._setFetchTimeout(timeout, options)\n\n      return HttpServiceSingleton._makePayload(await fetch(url, options))\n    })\n  }\n\n  static _fetchJsonFactory(resourceUrl, timeout = 10) {\n    const url = HttpServiceSingleton._makeUrl(resourceUrl)\n    return catchAsync(async function () {\n      const options = {\n        headers: {\n          Authorization: `Bearer ${UserAuth.getToken()}`,\n        },\n      }\n\n      HttpServiceSingleton._setFetchTimeout(timeout, options)\n\n      return HttpServiceSingleton._makePayload(await fetch(url, options))\n    })\n  }\n\n  static _fetchDeleteFactory(resourceUrlAndId, timeout = 10) {\n    const url = HttpServiceSingleton._makeUrl(resourceUrlAndId)\n    return catchAsync(async function () {\n      const options = {\n        method: \"DELETE\",\n        mode: \"cors\",\n        headers: {\n          Authorization: `Bearer ${UserAuth.getToken()}`,\n        },\n      }\n\n      HttpServiceSingleton._setFetchTimeout(timeout, options)\n\n      return HttpServiceSingleton._makePayload(await fetch(url, options))\n    })\n  }\n\n  static _setFetchTimeout(timeout, options) {\n    const ctl = new AbortController()\n    setTimeout(() => ctl.abort(), timeout * 1000)\n    options.signal = ctl.signal\n  }\n\n  static async _makePayload(response) {\n    if (!response) {\n      return { ok: false, payload: null }\n    }\n\n    const ok = response.ok\n\n    //FIXME: may need to switch based on status code!\n    switch (response.status) {\n      case 204:\n        console.log(\"No Content\")\n        return { ok, payload: null }\n      default:\n        break\n    }\n    const payload = await response.json()\n    console.log({ ok, payload })\n    return { ok, payload: payload ? payload : null }\n  }\n\n  //FIXME: how to implement retry?\n  static _retryFetch(asyncFetchFunc) {\n    setInterval(async () => {\n      console.log(\"Refetching ...\")\n      return catchAsync(asyncFetchFunc())\n    }, 5000)\n  }\n\n  static getInstance() {\n    return HttpServiceSingleton._instance || new HttpServiceSingleton()\n  }\n}\n\n//only export an instance (singleton)\nexport default HttpServiceSingleton.getInstance()\n","function isNotEmpty(str) {\n  return str && str.trim().length > 0\n}\n\nfunction isValidEmail(email) {\n  const pattern = /^([\\w_-]+|[\\w_-]+(.[\\w_-]+)+?)@([\\w_-]+|[\\w_-]+(.[\\w_-]+)+?)$/\n  return email && pattern.test(email)\n}\n\nexport function validateInstructorCredentials({ email, password }) {\n  if (isNotEmpty(email) && isNotEmpty(password)) {\n    return isValidEmail(email) ? null : \"Invalid email\"\n  } else {\n    return \"Missing Email or Password\"\n  }\n}\n\nexport function validateLearnerCredentials({ username, password }) {\n  return isNotEmpty(username) && isNotEmpty(password)\n    ? null\n    : \"Missing Email or Password\"\n}\n","import { HttpServiceSingleton } from \"./http\"\nimport { safeSpinnerWrapper } from \"../utils\"\n\nexport class InstructorServiceSingleton extends HttpServiceSingleton {\n  constructor() {\n    super()\n    this.instructorLogin = safeSpinnerWrapper(this.instructorLogin)\n    this._instance = this\n    if (InstructorServiceSingleton._instance) {\n      return this._instance\n    }\n  }\n\n  static getInstructorInstance() {\n    return (\n      InstructorServiceSingleton._instance || new InstructorServiceSingleton()\n    )\n  }\n\n  async instructorLogin(credentials) {\n    return await InstructorServiceSingleton._fetchPostFactory(\n      \"instructor/login\"\n    )(credentials)\n  }\n}\n\nexport default InstructorServiceSingleton.getInstructorInstance()\n","import { HttpServiceSingleton } from \"./http\"\nimport { safeSpinnerWrapper } from \"../utils\"\n\nexport class LearnerServiceSingleton extends HttpServiceSingleton {\n  constructor() {\n    super()\n    console.log(\"New LearnerServiceSingleton!\")\n    this.updateLearner = safeSpinnerWrapper(this.updateLearner)\n    this.deleteLearner = safeSpinnerWrapper(this.deleteLearner)\n    this.createLearner = safeSpinnerWrapper(this.createLearner)\n    this.learnerLogin = safeSpinnerWrapper(this.learnerLogin)\n    this._instance = this\n    if (LearnerServiceSingleton._instance) {\n      return this._instance\n    }\n  }\n\n  async fetchLearners() {\n    console.log(`Fetching Learners`)\n    return await LearnerServiceSingleton._fetchJsonFactory(\"learners\")()\n  }\n\n  async updateLearner(selectedLearner) {\n    console.log(`Sending ${JSON.stringify(selectedLearner)}`)\n    return await LearnerServiceSingleton._fetchPutFactory(\"learners/details\")({\n      learner: selectedLearner,\n    })\n  }\n\n  async deleteLearner(learnerId) {\n    console.log(\"Delete learner id \", learnerId)\n    return await LearnerServiceSingleton._fetchDeleteFactory(\n      `learners/${learnerId}`\n    )()\n  }\n\n  async createLearner(learner) {\n    console.log(`Sending new learner ${JSON.stringify(learner)}`)\n    return await LearnerServiceSingleton._fetchPostFactory(\"learners\")({\n      learner: learner,\n    })\n  }\n\n  async learnerLogin(credentials) {\n    return await LearnerServiceSingleton._fetchPostFactory(\"learners/login\")(\n      credentials\n    )\n  }\n\n  static getLearnerInstance() {\n    return LearnerServiceSingleton._instance || new LearnerServiceSingleton()\n  }\n}\n\nexport default LearnerServiceSingleton.getLearnerInstance()\n","import { HttpServiceSingleton } from \"./http\"\nimport { safeSpinnerWrapper } from \"../utils\"\n\nexport class ProgrammeServiceSingleton extends HttpServiceSingleton {\n  constructor() {\n    super()\n    console.log(\"I was created!\")\n    //TODO: have all components use hooks to move wrapper there\n    this.fetchProgrammes = safeSpinnerWrapper(this.fetchProgrammes)\n    this.fetchSchedules = safeSpinnerWrapper(this.fetchSchedules)\n    this.fetchScheduleInfo = safeSpinnerWrapper(this.fetchScheduleInfo)\n    this.deleteSchedule = safeSpinnerWrapper(this.deleteSchedule)\n    this.publishSchedule = safeSpinnerWrapper(this.publishSchedule)\n    this.unpublishSchedule = safeSpinnerWrapper(this.unpublishSchedule)\n    this.repostSchedule = safeSpinnerWrapper(this.repostSchedule)\n    this.postNewSchedule = safeSpinnerWrapper(this.postNewSchedule)\n    this.getAvailableProgrammesToPublish = safeSpinnerWrapper(\n      this.getAvailableProgrammesToPublish\n    )\n\n    this._instance = this\n    if (ProgrammeServiceSingleton._instance) {\n      return this._instance\n    }\n  }\n\n  //programmes\n  async fetchProgrammes() {\n    return await ProgrammeServiceSingleton._fetchJsonFactory(\"programmes\")()\n  }\n\n  async createProgramme() {}\n  async updateProgramme() {}\n\n  //schedules\n  async fetchSchedules() {\n    return await ProgrammeServiceSingleton._fetchJsonFactory(\n      \"programmes/schedules\"\n    )()\n  }\n\n  async deleteSchedule(scheduleId) {\n    return await ProgrammeServiceSingleton._fetchDeleteFactory(\n      `programmes/schedules/${scheduleId}`\n    )()\n  }\n\n  async postNewSchedule(payload) {\n    return await ProgrammeServiceSingleton._fetchPostFactory(\n      \"programmes/schedules\"\n    )(payload)\n  }\n\n  async repostSchedule(payload) {\n    return await ProgrammeServiceSingleton._fetchPutFactory(\n      \"programmes/schedules\"\n    )(payload)\n  }\n\n  async fetchScheduleInfo() {\n    return await ProgrammeServiceSingleton._fetchJsonFactory(\n      \"programmes/schedules/info\"\n    )()\n  }\n  //schedule and programme\n  async getAvailableProgrammesToPublish(scheduleId) {\n    return await ProgrammeServiceSingleton._fetchJsonFactory(\n      `programmes/schedules/${scheduleId}/publish/available.programmes`\n    )()\n  }\n\n  //TODO: can use req.params as well no need to serialize\n  async publishSchedule(scheduleId, programmeIds) {\n    return await ProgrammeServiceSingleton._fetchPostFactory(\n      `programmes/schedules/${scheduleId}/publish`\n    )({ programmeIds })\n  }\n\n  async unpublishSchedule(scheduleId, programmeId) {\n    console.log(programmeId)\n    return await ProgrammeServiceSingleton._fetchDeleteFactory(\n      `programmes/schedules/${scheduleId}/unpublish/${programmeId}`\n    )()\n  }\n\n  static getProgrammeInstance() {\n    return (\n      ProgrammeServiceSingleton._instance || new ProgrammeServiceSingleton()\n    )\n  }\n}\n\nexport default ProgrammeServiceSingleton.getProgrammeInstance()\n","export function fileReaderPromise(file) {\n  return new Promise((resolve, reject) => {\n    let r = new FileReader()\n    r.onload = (e) => resolve(e.target.result)\n    r.onerror = reject\n    r.readAsArrayBuffer(file)\n  })\n}\n","import XLSX from \"xlsx\"\n\nfunction parseRows(buffer) {\n  const workbook = XLSX.read(buffer, {\n    type: \"buffer\",\n  })\n\n  const rows = []\n\n  workbook.SheetNames.forEach(function (sheetName) {\n    //which is actually an array of rows\n    const XL_row_object = XLSX.utils.sheet_to_json(workbook.Sheets[sheetName])\n    rows.push(...XL_row_object)\n  })\n\n  return { rows, weekCount: workbook.SheetNames.length }\n}\n\nfunction makeTimeTable(exercisesArr) {\n  const aggregate = {}\n\n  function getWeekDayPair(exercisesArr) {\n    let prevPair = [0, 0]\n    return exercisesArr.reduce((pairs, { week, day }) => {\n      if (prevPair[0] !== week || prevPair[1] !== day) {\n        prevPair = [week, day]\n        pairs.push([week, day])\n      }\n      return pairs\n    }, [])\n  }\n\n  function extractDailyExercises(w, d) {\n    exercisesArr\n      .filter(({ week, day }) => week === w && day === d)\n      .reduce((acc, { exerciseName, instruction }) => {\n        //initialise prop week if not exist\n        if (acc[`week ${w}`] === undefined) {\n          acc[`week ${w}`] = {}\n        }\n\n        //initialise prop day of week if not exist\n        if (acc[`week ${w}`][`day ${d}`] === undefined) {\n          acc[`week ${w}`][`day ${d}`] = []\n        }\n\n        //push obj to proper week and day\n        acc[`week ${w}`][`day ${d}`].push({ exerciseName, instruction })\n\n        return acc\n      }, aggregate)\n  }\n\n  getWeekDayPair(exercisesArr).forEach((dayInWeek) =>\n    extractDailyExercises(dayInWeek[0], dayInWeek[1])\n  )\n  return aggregate\n}\n\nexport function makeSchedulePayload(\n  buffer,\n  programmeIds,\n  scheduleName,\n  isNew = true,\n  scheduleId = null\n) {\n  //if a file is uploaded\n  if (buffer) {\n    const { rows, weekCount } = parseRows(buffer)\n    const timetable = makeTimeTable(rows)\n    //a new schedule\n    if (isNew) {\n      return {\n        timetable,\n        weekCount,\n        scheduleName,\n        programmeIds,\n      }\n      //reposting the schedule\n    } else {\n      return {\n        scheduleId,\n        scheduleName,\n        weekCount,\n        timetable,\n      }\n    }\n    //if no file is uploaded, meaning there's a name change\n  } else {\n    return {\n      scheduleId,\n      scheduleName,\n    }\n  }\n}\n","export function findIndexAndDelete(val, arr) {\n  arr.splice(\n    arr.findIndex((v) => v === val),\n    1\n  )\n}\n","export class NavHelpers {\n  static setCurrentPage(page) {\n    if (page) {\n      sessionStorage.setItem(\"currentPage\", page)\n      return\n    }\n  }\n\n  static getCurrentPage() {\n    let currentPage = sessionStorage.getItem(\"currentPage\")\n    //redirects from login page if authenticated\n    if (currentPage === \"/instructor\") {\n      return \"/instructor/schedules\"\n    }\n    if (currentPage === \"/learner\") {\n      return \"/learner/schedules\"\n    } else {\n      return currentPage\n    }\n  }\n\n  static clearCurrentPage() {\n    return sessionStorage.removeItem(\"currentPage\")\n  }\n}\n","import React from \"react\"\nimport { ProtectedRoute } from \"./register\"\nimport { Route, Redirect, Switch } from \"react-router-dom\"\nimport { NavHelpers } from \"../services/register\"\n\nfunction PageRoute({ isProtected, ...props }) {\n  return isProtected ? <ProtectedRoute {...props} /> : <Route {...props} />\n}\n\nexport function PageRoutes({ links }) {\n  const routes = links.map(({ to, component, isProtected }) => {\n    return (\n      <PageRoute\n        key={to}\n        exact\n        path={to}\n        component={component}\n        isProtected={isProtected}\n      />\n    )\n  })\n\n  return (\n    <Switch>\n      {routes}\n      <Redirect\n        to={\n          NavHelpers.getCurrentPage()\n            ? NavHelpers.getCurrentPage()\n            : \"/learner/login\"\n        }\n      />\n    </Switch>\n  )\n}\n","import React from \"react\"\nimport {\n  CheckCircleOutlineRounded,\n  ErrorOutlineRounded,\n} from \"@material-ui/icons\"\n\nexport const ActionNotificationDiv = React.memo(\n  ({ actionStatus, onCloseActionStatusDiv }) => {\n    const { action, isActionSuccess } = actionStatus\n\n    let message = \"Action Status\"\n    let color = \"\"\n    let background = \"\"\n    let visibility = \"\"\n\n    if (!action) {\n      visibility = \"hidden\"\n    } else {\n      switch (isActionSuccess) {\n        default:\n          message = `Applying ${action.toUpperCase()} ...`\n          background = \"yellow\"\n          color = \"#111\"\n          break\n        case true:\n          message = `${action.toUpperCase()} Successful!`\n          color = \"green\"\n          background = \"rgb(107, 236, 172)\"\n          break\n        case false:\n          message = `${action.toUpperCase()} Failed!`\n          color = \"red\"\n          background = \"rgb(241, 162, 142)\"\n          break\n      }\n    }\n\n    return (\n      <div\n        className=\"action-status-div\"\n        style={{\n          visibility: visibility,\n          color,\n          fontWeight: \"600\",\n          background,\n        }}\n      >\n        {isActionSuccess ? (\n          <CheckCircleOutlineRounded />\n        ) : (\n          <ErrorOutlineRounded />\n        )}\n        <span>{message}</span>\n        <span className=\"action-status-close\" onClick={onCloseActionStatusDiv}>\n          X\n        </span>\n      </div>\n    )\n  }\n)\n","import React from \"react\"\n\nexport function LearnerNameList({ learners, onLearnerItemClicked }) {\n  const learnerItems = learners.map(({ learnerId, firstName, lastName }) => {\n    return (\n      <li\n        className=\"learner-name\"\n        key={learnerId} //this cannot be retrieved from getAttribute! need to be spelled lowercase\n        learnerid={learnerId}\n        onClick={onLearnerItemClicked}\n      >{`${firstName} ${lastName}`}</li>\n    )\n  })\n\n  return (\n    <ul>\n      {learners.length === 0 ? (\n        <li className=\"learner-name\">No Learner Found!</li>\n      ) : (\n        learnerItems\n      )}\n    </ul>\n  )\n}\n","import React from \"react\"\nimport { Edit, Delete, Save } from \"@material-ui/icons\"\n\nimport { camelCaseToNormal } from \"../../utils\"\n\nfunction PersonalBestInput({ label, ...props }) {\n  return (\n    <div className=\"pbs-field\">\n      <label htmlFor={props.id || props.name}>{camelCaseToNormal(label)}</label>\n      <input className=\"text-input\" {...props} />\n    </div>\n  )\n}\n\nexport function PersonalBestsForm({\n  selectedLearner = {},\n  onPersonalBestsInputChange,\n  onUpdatePersonalBests,\n  enableEditAndUpdate,\n  canEditAndUpdate,\n  onDeleteLearner,\n}) {\n  //it does changes, but doesn't show on the UI\n  const inputs = Object.keys(selectedLearner).map((fieldName) => {\n    if (fieldName === \"learnerId\") return null\n    return (\n      <PersonalBestInput\n        label={fieldName}\n        name={fieldName}\n        type=\"text\"\n        key={fieldName}\n        value={selectedLearner[fieldName]}\n        onChange={onPersonalBestsInputChange}\n        readOnly={!canEditAndUpdate}\n        style={{ opacity: canEditAndUpdate ? \"1\" : \"0.75\" }}\n      />\n    )\n  })\n\n  //use modal then\n  return (\n    <div className=\"pbs-form-wrapper\">\n      <h3 style={{ textTransform: \"capitalize\" }}>\n        {selectedLearner.firstName}\n      </h3>\n      <form readOnly={!canEditAndUpdate} onDoubleClick={enableEditAndUpdate}>\n        {inputs}\n      </form>\n      <div className=\"pbs-form-btn-wrapper\">\n        <button className=\"pbs-btn\" onClick={enableEditAndUpdate}>\n          <Edit className=\"pbs-btn-icon\" />\n          {!canEditAndUpdate ? \"Enable Edit \" : \"Disable Edit \"}\n        </button>\n        <button\n          className=\"pbs-btn\"\n          onClick={onUpdatePersonalBests}\n          disabled={!canEditAndUpdate}\n        >\n          <Save className=\"pbs-btn-icon\" />\n          {\"Save \"}\n        </button>\n        <button\n          className=\"pbs-btn\"\n          onClick={onDeleteLearner}\n          disabled={!canEditAndUpdate}\n        >\n          <Delete className=\"pbs-btn-icon\" />\n          {\"Delete \"}\n        </button>\n      </div>\n    </div>\n  )\n}\n","import React from \"react\"\nimport { LearnerNameList } from \"./register\"\n\nexport function LearnerSearchInput({\n  searchPhrase,\n  onSearchPhraseChanged,\n  learners,\n  displayedLearners,\n  onLearnerItemClicked,\n}) {\n  return (\n    <div className=\"learnerListPanel\" style={{ display: \"flex\" }}>\n      <div\n        className=\"searchInputWrapper\"\n        style={{ display: \"flex\", flexDirection: \"column\" }}\n      >\n        <input\n          className=\"learnerSearchInput\"\n          value={searchPhrase}\n          onChange={onSearchPhraseChanged}\n          placeholder={\n            learners.length === 0 ? \"No Learners Added Yet\" : \"Type to Filter\"\n          }\n          disabled={learners.length === 0 ? true : false}\n        />\n      </div>\n      <div className=\"learnerNameList\">\n        {learners.length === 0 ? (\n          <ul>\n            <li className=\"learner-name\">No Learners Added Yet</li>\n          </ul>\n        ) : (\n          <LearnerNameList\n            learners={displayedLearners}\n            onLearnerItemClicked={onLearnerItemClicked}\n          />\n        )}\n      </div>\n    </div>\n  )\n}\n","import React, { useState } from \"react\"\nimport { Logo, LoginForm, LoginFormTextInput } from \"./register\"\nimport {\n  UserAuth,\n  validateInstructorCredentials,\n} from \"../../services/register\"\nimport httpService from \"../../services/InstructorServiceSingleton\"\n\nexport function InstructorLoginPage({ onInstructorLogIn }) {\n  const [credentials, setCredentials] = useState({ email: \"\", password: \"\" })\n  const [errorMessage, setErrorMessage] = useState(null)\n\n  function onInputChanged(e) {\n    const changedField = e.target.getAttribute(\"name\")\n    const newValue = e.target.value.trim()\n    setCredentials((c) => {\n      c[changedField] = newValue\n      return c\n    })\n  }\n\n  async function onFormSubmitted(e) {\n    e.preventDefault()\n    const error = validateInstructorCredentials(credentials)\n    if (error) {\n      setErrorMessage(error)\n      return\n    }\n    setErrorMessage(null)\n    console.log(\"Logging in with \", credentials)\n\n    const { ok, payload } = await httpService.instructorLogin(credentials)\n\n    if (!ok) {\n      setErrorMessage(payload.message)\n      return\n    } else {\n      UserAuth.saveToken(payload.token)\n      onInstructorLogIn()\n    }\n  }\n\n  const fields = Object.keys(credentials).map((fieldName) => (\n    <LoginFormTextInput\n      key={fieldName}\n      label={fieldName}\n      onInputChanged={onInputChanged}\n      value={credentials[fieldName]}\n    />\n  ))\n\n  return (\n    <>\n      <Logo />\n      <LoginForm\n        title=\"Instructor Login\"\n        onFormSubmitted={onFormSubmitted}\n        fields={fields}\n        errorMessage={errorMessage}\n      />\n    </>\n  )\n}\n","import React, { useState } from \"react\"\nimport { Redirect } from \"react-router-dom\"\nimport { Logo, LoginForm, LoginFormTextInput } from \"./register\"\nimport { UserAuth, validateLearnerCredentials } from \"../../services/register\"\nimport httpService from \"../../services/LearnerServiceSingleton\"\n\nexport function LearnerLoginPage({ onLearnerLogIn, isLearnerLoggedIn }) {\n  const [credentials, setCredentials] = useState({ username: \"\", password: \"\" })\n  const [errorMessage, setErrorMessage] = useState(null)\n\n  function onInputChanged(e) {\n    const changedField = e.target.getAttribute(\"name\")\n    const newValue = e.target.value.trim()\n    setCredentials((c) => {\n      c[changedField] = newValue\n      return c\n    })\n  }\n\n  async function onFormSubmitted(e) {\n    e.preventDefault()\n    const error = validateLearnerCredentials(credentials)\n    if (error) {\n      setErrorMessage(error)\n      return\n    }\n    setErrorMessage(null)\n    console.log(\"Logging in with \", credentials)\n\n    const { ok, payload } = await httpService.learnerLogin(credentials)\n\n    if (!ok) {\n      setErrorMessage(payload.message)\n      return\n    } else {\n      UserAuth.saveToken(payload.token)\n      delete payload.token\n      //redux?\n      onLearnerLogIn()\n    }\n  }\n\n  const fields = Object.keys(credentials).map((fieldName) => (\n    <LoginFormTextInput\n      key={fieldName}\n      label={fieldName}\n      onInputChanged={onInputChanged}\n      value={credentials[fieldName]}\n    />\n  ))\n\n  return isLearnerLoggedIn ? (\n    <Redirect to=\"learner/schedules\" />\n  ) : (\n    <div>\n      <Logo />\n      <LoginForm\n        title=\"Learner Login\"\n        onFormSubmitted={onFormSubmitted}\n        fields={fields}\n        errorMessage={errorMessage}\n      />\n    </div>\n  )\n}\n","import React from \"react\"\n\nexport function Logo() {\n  return (\n    <div className=\"logo-wrapper\">\n      <img\n        className=\"logo\"\n        src={require(\"../../assets/logo.jpg\")}\n        alt=\"New Zealand Olympic Weight-Lifting Logo\"\n      />\n    </div>\n  )\n}\n","import React from \"react\"\n\nexport function LoginFormTextInput({ label, onInputChanged, fieldValue }) {\n  return (\n    <div className={`field-container ${label}`}>\n      <label htmlFor={label} className={`search-form-label index ${label}`}>\n        {label}\n      </label>\n      <input\n        id={label}\n        name={label}\n        className=\"text-input\"\n        type={label === \"password\" ? \"password\" : \"text\"}\n        onChange={onInputChanged}\n        value={fieldValue}\n      />\n    </div>\n  )\n}\n","import React from \"react\"\n\nexport function LoginFormButton({ customClassName, label, onClick }) {\n  return (\n    <button\n      type=\"submit\"\n      className={`submit-btn ${customClassName}`}\n      onClick={onClick}\n    >\n      {label}\n    </button>\n  )\n}\n","import React from \"react\"\nimport { LoginFormButton } from \"./register\"\n\nfunction ErrorMessageDiv({ errorMessage }) {\n  return (\n    <div className=\"error-message-wrapper\">\n      <p\n        className=\"error-message\"\n        style={{ visibility: errorMessage ? \"visible\" : \"hidden\" }}\n      >\n        {errorMessage}\n      </p>\n    </div>\n  )\n}\n\nexport function LoginForm({ title, onFormSubmitted, fields, errorMessage }) {\n  return (\n    <>\n      <h1 className=\"login-form-title\">{title}</h1>\n      <form className=\"login-form\" onSubmit={onFormSubmitted}>\n        {fields}\n        {<ErrorMessageDiv errorMessage={errorMessage} />}\n        <div className=\"submit-btn-container\">\n          <LoginFormButton customClassName=\"login right\" label=\"Log In\" />\n        </div>\n      </form>\n    </>\n  )\n}\n","import React, { useState } from \"react\"\nimport { BrowserRouter as Router, Redirect } from \"react-router-dom\"\n//https://reactrouter.com/web/api\n\nimport { Navbar, Footer, PageRoutes } from \"./app/register\"\n\nimport { LearnerSchedulePage } from \"./components/learners/register\"\nimport { LearnerLoginPage } from \"./components/home/register\"\n\nimport { UserAuth, NavHelpers } from \"./services/register\"\nimport { ThemeProvider, createMuiTheme } from \"@material-ui/core/styles\"\n\nconst theme = createMuiTheme({\n  typography: {\n    fontFamily: [\"Montserrat\", \"sans-serif\"],\n  },\n})\n\nconst allLinks = {\n  learner: [\n    {\n      to: \"/learner/schedules\",\n      label: \"Schedules\",\n      component: LearnerSchedulePage,\n      isProtected: true,\n    },\n    {\n      to: \"/logout\",\n      label: \"Log Out\",\n      component: null,\n      isProtected: true,\n    },\n  ],\n  instructorApp: [\n    {\n      to: \"/instructor/login\",\n      label: \"Instructor Space\",\n      isProtected: false,\n    },\n  ],\n}\n\nexport function LearnerApp({ onAppChange }) {\n  const [isLearnerLoggedIn, setIsLearnerLoggedIn] = useState(\n    UserAuth.isAuthenticated()\n  )\n\n  const [links, setLinks] = useState(\n    UserAuth.isAuthenticated() ? allLinks.learner : allLinks.instructorApp\n  )\n\n  function onLearnerLogIn() {\n    setLinks(allLinks.learner)\n    setIsLearnerLoggedIn(true)\n  }\n\n  function onLearnerLogOut(e) {\n    console.log(\"log me out!\")\n    UserAuth.clearToken()\n    NavHelpers.setCurrentPage(\"/learner/login\")\n    setLinks(allLinks.instructorApp)\n    setIsLearnerLoggedIn(false)\n  }\n\n  return (\n    <ThemeProvider theme={theme}>\n      <Router>\n        <Navbar\n          links={links}\n          onLogOut={onLearnerLogOut}\n          pageTitle=\"Otago WeightLifting Learner Space\"\n          onAppChange={onAppChange}\n        />\n        <div className=\"App main\">\n          {isLearnerLoggedIn ? (\n            <Redirect\n              to={\n                NavHelpers.getCurrentPage() !== \"/learner/login\"\n                  ? NavHelpers.getCurrentPage()\n                  : \"/learner/schedules\"\n              }\n            />\n          ) : (\n            <LearnerLoginPage\n              onLearnerLogIn={onLearnerLogIn}\n              isLearnerLoggedIn={isLearnerLoggedIn}\n            />\n          )}\n          <PageRoutes links={links} />\n        </div>\n        <Footer />\n      </Router>\n    </ThemeProvider>\n  )\n}\n\nexport default LearnerApp\n","import React, { useState } from \"react\"\nimport { NavHelpers } from \"../../services/register\"\n\nexport function LearnerSchedulePage() {\n  NavHelpers.setCurrentPage(\"/learner/schedules\")\n  const [schedules, setSchedules] = useState([])\n\n  return <div>Schedules</div>\n}\n","import XLSX from \"xlsx\"\nimport httpService from \"../../services/ProgrammeServiceSingleton\"\n\nexport class myExcelReader {\n  constructor(programmeIds, scheduleName, isNew = true, scheduleId = null) {\n    this.reader = new FileReader()\n    this.reader.programmeIds = programmeIds\n    this.reader.scheduleName = scheduleName\n    this.reader.isNew = isNew\n    this.reader.scheduleId = scheduleId\n    this.reader.makeTimeTable = function (exercisesArr) {\n      const aggregate = {}\n\n      function getWeekDayPair(exercisesArr) {\n        let prevPair = [0, 0]\n        return exercisesArr.reduce((pairs, { week, day }) => {\n          if (prevPair[0] !== week || prevPair[1] !== day) {\n            prevPair = [week, day]\n            pairs.push([week, day])\n          }\n          return pairs\n        }, [])\n      }\n\n      function extractDailyExercises(w, d) {\n        exercisesArr\n          .filter(({ week, day }) => week === w && day === d)\n          .reduce((acc, { exerciseName, instruction }) => {\n            //initialise prop week if not exist\n            if (acc[`week ${w}`] === undefined) {\n              acc[`week ${w}`] = {}\n            }\n\n            //initialise prop day of week if not exist\n            if (acc[`week ${w}`][`day ${d}`] === undefined) {\n              acc[`week ${w}`][`day ${d}`] = []\n            }\n\n            //push obj to proper week and day\n            acc[`week ${w}`][`day ${d}`].push({ exerciseName, instruction })\n\n            return acc\n          }, aggregate)\n      }\n\n      getWeekDayPair(exercisesArr).forEach((dayInWeek) =>\n        extractDailyExercises(dayInWeek[0], dayInWeek[1])\n      )\n      return aggregate\n    }\n    this.reader.onload = async function (event) {\n      const data = event.target.result\n      const workbook = XLSX.read(data, {\n        type: \"buffer\",\n      })\n\n      const rows = []\n\n      workbook.SheetNames.forEach(function (sheetName) {\n        //which is actually an array of rows\n        const XL_row_object = XLSX.utils.sheet_to_json(\n          workbook.Sheets[sheetName]\n        )\n        rows.push(...XL_row_object)\n      })\n\n      let payload = { timetable: this.makeTimeTable(rows) }\n      let isActionSuccess\n\n      if (isNew) {\n        payload = {\n          ...payload,\n          scheduleName: this.scheduleName,\n          programmeIds: this.programmeIds,\n          weekCount: workbook.SheetNames.length,\n        }\n        isActionSuccess = await httpService.postNewSchedule(payload)\n      } else {\n        payload = {\n          ...payload,\n          scheduleId: this.scheduleId,\n          weekCount: workbook.SheetNames.length,\n        }\n        isActionSuccess = await httpService.repostSchedule(payload)\n      }\n      return isActionSuccess\n    }\n\n    this.reader.onerror = (event) => {\n      console.error(\"File could not be read! Code \" + event.target.error.code)\n    }\n\n    this.reader.readAsArrayBufferPromise = (file) => {\n      return new Promise((resolve, reject) => {\n        let r = new FileReader()\n        r.onload = (e) => resolve(e.target.result)\n        r.onerror = reject\n        r.readAsArrayBuffer(file)\n      })\n    }\n  }\n}\n","import React, { useState } from \"react\"\nimport { capitalise } from \"../utils\"\nimport { ActionNotificationDiv } from \"../components/ActionNotificationDiv\"\n\nexport function useActionSnackbar(action, serviceMethod) {\n  const [actionStatus, setActionStatus] = useState({\n    action: null,\n    isActionSuccess: true,\n  })\n\n  // basically like a middleware that intercepts the response\n  async function callDecoratedService() {\n    setActionStatus({ action: action, isActionSuccess: null })\n    const res = await serviceMethod(...arguments)\n    if (res.ok) {\n      setActionStatus({ action: action, isActionSuccess: true })\n      console.log(`${capitalise(action)} Successful!`)\n    } else {\n      setActionStatus({ action: action, isActionSuccess: false })\n      console.log(`${capitalise(action)} failed!`)\n    }\n    //for custom side-effect outside of the component\n    return res\n  }\n\n  function onCloseActionStatusDiv() {\n    setActionStatus({ action: null, isActionSuccess: null })\n  }\n\n  function Component() {\n    return (\n      <ActionNotificationDiv\n        actionStatus={actionStatus}\n        onCloseActionStatusDiv={onCloseActionStatusDiv}\n      />\n    )\n  }\n\n  //this allows the hook to be used with different services in the same component\n  function makePayloadObjectWithCustomPropNames(action) {\n    let returnedObj = {}\n    returnedObj[`${action}ActionStatus`] = actionStatus\n    returnedObj[`set${capitalise(action)}ActionStatus`] = setActionStatus\n    returnedObj[\n      `callDecorated${capitalise(action)}Service`\n    ] = callDecoratedService\n    returnedObj[\n      `onClose${capitalise(action)}StatusDiv`\n    ] = onCloseActionStatusDiv\n\n    returnedObj[`${capitalise(action)}Snackbar`] = Component\n    return returnedObj\n  }\n\n  const propsAndHooks = makePayloadObjectWithCustomPropNames(action)\n\n  return propsAndHooks\n}\n","import React, { useState } from \"react\"\n\nexport function useFetchSnackbar(resourceName = null, postFetchAction = null) {\n  const [isFetchSuccess, setIsFetchSuccess] = useState(null)\n\n  const Component = React.memo(({ isFetchSuccess, ...props }) => {\n    //NOTE: a factory function for customizing a notification div based on the kind of payload\n    switch (isFetchSuccess) {\n      default:\n        return (\n          <div {...props} style={{ color: \"var(--bg-cl)\" }}>\n            Loading {resourceName ? resourceName : \"data\"} ...\n          </div>\n        )\n      case true:\n        return (\n          <div {...props} style={{ color: \"green\" }}>\n            {postFetchAction ? postFetchAction : \"Finished loading data!\"}\n          </div>\n        )\n      case false:\n        return (\n          <div {...props} style={{ color: \"red\" }}>\n            Failed to load {resourceName ? resourceName : \"data\"}. Please retry\n            later.\n          </div>\n        )\n    }\n  })\n\n  function FetchNotificationDiv({ ...props }) {\n    return <Component isFetchSuccess={isFetchSuccess} {...props} />\n  }\n\n  return { isFetchSuccess, setIsFetchSuccess, FetchNotificationDiv }\n}\n","import React, { useState, useEffect } from \"react\"\nimport { myExcelReader } from \"./myExcelReader\"\nimport {\n  fileReaderPromise,\n  makeSchedulePayload,\n  findIndexAndDelete,\n} from \"../../services/register\"\nimport { FileUploader, ProgrammeOptions, ScheduleNameInput } from \"./register\"\nimport { Grid, FormHelperText } from \"@material-ui/core\"\nimport { useFetchSnackbar, useActionSnackbar } from \"../../hooks/register\"\nimport httpService from \"../../services/ProgrammeServiceSingleton\"\n\n//a good candidate for Redux, since needed by many components, lets just do useState for now\nexport function ScheduleUploader({ onActionSuccess }) {\n  const [programmes, setProgrammes] = useState(null)\n  const [selectedProgrammeIds, setSelectedProgrammeIds] = useState([])\n  const [scheduleName, setScheduleName] = useState(\"\")\n  // const [isFetchSuccess, setIsFetchSuccess] = useState(null)\n\n  const {\n    isFetchSuccess,\n    setIsFetchSuccess,\n    FetchNotificationDiv,\n  } = useFetchSnackbar(\"programmes\")\n\n  const { callDecoratedUploadService, UploadSnackbar } = useActionSnackbar(\n    \"upload\",\n    httpService.postNewSchedule\n  )\n\n  function onProgrammeChecked(e) {\n    const checkedProgrammeId = parseInt(e.target.value)\n    if (e.target.checked) {\n      console.log(checkedProgrammeId)\n      setSelectedProgrammeIds([...selectedProgrammeIds, checkedProgrammeId])\n    } else {\n      setSelectedProgrammeIds((selectedProgrammeIds) => {\n        let newArr = [...selectedProgrammeIds]\n        findIndexAndDelete(checkedProgrammeId, newArr)\n        return newArr\n      })\n    }\n  }\n\n  function onClickedScheduleNameChanged(e) {\n    setScheduleName(e.target.value)\n  }\n\n  useEffect(() => {\n    //this should stay here unless all components have a status tracking feature, which makes sense\n    async function fetchProgrammes() {\n      const { ok, payload } = await httpService.fetchProgrammes()\n\n      if (ok) {\n        console.log(payload)\n        //effect here\n        setProgrammes(payload.programmes)\n        setIsFetchSuccess(true)\n      } else {\n        //another effect\n        setIsFetchSuccess(false)\n      }\n    }\n    fetchProgrammes()\n  }, [setIsFetchSuccess])\n\n  async function onFileUploaded(e) {\n    const selectedFile = e.target.files[0]\n    const r = new myExcelReader(selectedProgrammeIds, scheduleName)\n    //empty rows are skipped!\n    //this is async (oneload and onerror are defined inside the r instance)\n    r.reader.readAsArrayBufferPromise(selectedFile)\n\n    const buffer = await fileReaderPromise(selectedFile)\n    const newSchedule = makeSchedulePayload(\n      buffer,\n      selectedProgrammeIds,\n      scheduleName,\n      true\n    )\n\n    const { ok, payload } = await callDecoratedUploadService(newSchedule)\n    if (ok) {\n      const newScheduleInfoObject = makeNewScheduleInfoObject(\n        payload,\n        programmes\n      )\n      onActionSuccess(\"upload\", { newScheduleInfoObject })\n      console.log(\"Upload Successful!\")\n      return\n    }\n  }\n\n  function makeNewScheduleInfoObject(payload, programmes) {\n    return {\n      ...payload,\n      programmes: programmes.filter((p) =>\n        selectedProgrammeIds.includes(p.programmeId)\n      ),\n    }\n  }\n\n  return (\n    <Grid\n      item\n      xs={8}\n      md={12}\n      lg={12}\n      style={{\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyContent: \"space-around\",\n      }}\n    >\n      {programmes ? (\n        <>\n          <ScheduleNameInput\n            label=\"Cycle Name\"\n            onClickedScheduleNameChanged={onClickedScheduleNameChanged}\n            scheduleName={scheduleName}\n          />\n          <ProgrammeOptions\n            programmes={programmes}\n            isFetchSuccess={isFetchSuccess}\n            onProgrammeChecked={onProgrammeChecked}\n            label=\"Publish to Team: \"\n          />\n          <UploadSnackbar />\n          {scheduleName.length > 5 ? (\n            <FileUploader onFileUploaded={onFileUploaded} />\n          ) : (\n            <FormHelperText>\n              Please Enter The Cycle's Name Before Uploading\n            </FormHelperText>\n          )}\n        </>\n      ) : (\n        // <FetchProgrammesNotificationDiv isFetchSuccess={isFetchSuccess} />\n        <FetchNotificationDiv />\n      )}\n    </Grid>\n  )\n}\n","import React from \"react\"\nimport { InputLabel } from \"@material-ui/core\"\nimport { CloudUploadRounded } from \"@material-ui/icons\"\n\nexport function FileUploader({ onFileUploaded }) {\n  return (\n    <div\n      style={{\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignItems: \"center\",\n        marginTop: \"var(--mg-sm)\",\n      }}\n    >\n      <InputLabel\n        style={{\n          padding: \"var(--pd-sm)\",\n          minWidth: \"max-content\",\n          margin: \"0 auto\",\n          border: \"1px solid var(--txt-cl)\",\n        }}\n        htmlFor=\"fileUploader\"\n      >\n        <CloudUploadRounded\n          style={{\n            color: \"var(--bg-cl)\",\n            fontSize: \"var(--fs-lg)\",\n            margin: \"0 calc(1 * var(--mg-lg))\",\n          }}\n        />\n      </InputLabel>\n      <input\n        style={{ margin: \"0 auto\", display: \"none\" }}\n        type=\"file\"\n        id=\"fileUploader\"\n        name=\"fileUploader\"\n        accept=\".xls, .xlsx\"\n        onChange={onFileUploaded}\n      />\n      {/* <pre id=\"jsonObject\" style={{ fontSize: \"10px\", color: \"black\" }}>\n        {\" \"}\n        JSON :{\" \"}\n      </pre> */}\n    </div>\n  )\n}\n","import React from \"react\"\nimport {\n  FormControlLabel,\n  FormGroup,\n  FormLabel,\n  FormControl,\n  Checkbox,\n  Typography,\n} from \"@material-ui/core\"\n\nexport function ProgrammeOptions({ programmes, onProgrammeChecked, label }) {\n  let content\n  if (programmes.length > 0) {\n    const checkboxes = programmes.map(({ programmeName, programmeId }) => {\n      return (\n        <FormControlLabel\n          key={programmeId}\n          control={\n            <Checkbox\n              onChange={onProgrammeChecked}\n              name={programmeName}\n              value={programmeId}\n              color=\"primary\"\n            />\n          }\n          label={programmeName}\n        />\n      )\n    })\n    content = (\n      <>\n        <FormLabel component=\"legend\">{label}</FormLabel>\n        <FormGroup>{checkboxes}</FormGroup>\n      </>\n    )\n  } else {\n    content = <Typography component=\"p\">No Programme Available</Typography>\n  }\n\n  return (\n    <FormControl component=\"fieldset\" style={{ marginBottom: \"var(--mg-sm)\" }}>\n      {content}\n    </FormControl>\n  )\n}\n","class ScheduleReducers {\n  static _updateScheduleDetails(\n    { scheduleId, scheduleName, weekCount },\n    prevSchedules\n  ) {\n    const newSchedules = [...prevSchedules]\n    const targetIndex = newSchedules.findIndex(\n      (s) => s.scheduleId === scheduleId\n    )\n    newSchedules[targetIndex] = {\n      ...newSchedules[targetIndex],\n      scheduleName,\n      weekCount,\n    }\n    return newSchedules\n  }\n\n  static _addPublishedProgramme({ scheduleId, programmes }, prevSchedules) {\n    const newSchedules = [...prevSchedules]\n    //this returns a reference to the item in the array\n    const updatedSchedule = newSchedules.find(\n      (s) => s.scheduleId === scheduleId\n    )\n\n    updatedSchedule.programmes = [...updatedSchedule.programmes, ...programmes]\n    return newSchedules\n  }\n\n  static _removeProgrammeFromSchedule(\n    { scheduleId, targetProgramme },\n    prevSchedules\n  ) {\n    let newSchedules = [...prevSchedules]\n    let targetSchedule = newSchedules.find((s) => s.scheduleId === scheduleId)\n    let removedProgrammeIndex = targetSchedule.programmes.findIndex(\n      (p) => p.programmeId === targetProgramme.programmeId\n    )\n    targetSchedule.programmes.splice(removedProgrammeIndex, 1)\n    return newSchedules\n  }\n\n  static _deleteOneScheduleById({ scheduleId }, prevSchedules) {\n    return prevSchedules.filter((s) => s.scheduleId !== scheduleId)\n  }\n\n  static _addNewSchedule({ newScheduleInfoObject }, prevSchedules) {\n    return [...prevSchedules, newScheduleInfoObject]\n  }\n\n  //command & factory pattern\n  static factory(schedules, setSchedules) {\n    return function (action, payload) {\n      switch (action) {\n        case \"delete\":\n          setSchedules(\n            ScheduleReducers._deleteOneScheduleById(payload, schedules)\n          )\n          return\n        case \"upload\":\n          setSchedules(ScheduleReducers._addNewSchedule(payload, schedules))\n          return\n        case \"publish\":\n          setSchedules(\n            ScheduleReducers._addPublishedProgramme(payload, schedules)\n          )\n          return\n        case \"unpublish\":\n          setSchedules(\n            ScheduleReducers._removeProgrammeFromSchedule(payload, schedules)\n          )\n          return\n        case \"repost\":\n          setSchedules(\n            ScheduleReducers._updateScheduleDetails(payload, schedules)\n          )\n          return\n        default:\n          return\n      }\n    }\n  }\n}\n\nexport default ScheduleReducers\n","import React, { useState, useEffect } from \"react\"\nimport {\n  ScheduleCards,\n  AddScheduleFloatingButton,\n  ReuploadScheduleDialog,\n  PublishScheduleDialog,\n} from \"./register\"\nimport ScheduleReducers from \"./ScheduleReducers\"\n\nimport { Grid } from \"@material-ui/core\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport { useActionSnackbar, useFetchSnackbar } from \"../../hooks/register\"\nimport httpService from \"../../services/ProgrammeServiceSingleton\"\nimport { fileReaderPromise } from \"../../services/register\"\nimport { NavHelpers } from \"../../services/register\"\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    justifyContent: \"space-around\",\n  },\n  item: {\n    margin: \"var(--mg-sm)\",\n    padding: 0,\n  },\n}))\n\nfunction resetState(currentState, initialState, setStateFunc) {\n  if (currentState !== initialState) {\n    setStateFunc(initialState)\n  }\n}\n\nfunction checkCanUpdate(newName, currentName, isFileUploaded) {\n  const isValidLength = newName.length > 0\n  const isNewName = newName !== currentName\n  const caseOne = !isFileUploaded && isValidLength && isNewName\n  const caseTwo = isFileUploaded && isValidLength\n  return caseOne || caseTwo\n}\n\nexport function SchedulePanel() {\n  NavHelpers.setCurrentPage(\"/instructor/schedules\")\n  const [schedules, setSchedules] = useState(null)\n  const [clickedScheduleId, setClickedScheduleId] = useState(null)\n  const [clickedSchedule, setClickedSchedule] = useState(null)\n  const [currentScheduleName, setCurrentScheduleName] = useState(null)\n  const [openReuploadDialog, setOpenReuploadDialog] = useState(false)\n  const [openPublishDialog, setOpenPublishDialog] = useState(false)\n  const [canUpdate, setCanUpdate] = useState(false)\n  const [buffer, setBuffer] = useState(null)\n  const [isFileUploaded, setIsFileUploaded] = useState(false)\n\n  // ATTENTION: use object as API rather than array since we can pick and choose what to destructure. Downside is the prop name is fixed. That's why useState is [state, setState] rather than {state, setState}\n  const { setIsFetchSuccess, FetchNotificationDiv } = useFetchSnackbar(\n    \"schedules\"\n  )\n\n  const { callDecoratedDeleteService, DeleteSnackbar } = useActionSnackbar(\n    \"delete\",\n    httpService.deleteSchedule\n  )\n\n  const updateSchedulesList = ScheduleReducers.factory(schedules, setSchedules)\n\n  async function onFileUploaded(e) {\n    const selectedFile = e.target.files[0]\n    const buffer = await fileReaderPromise(selectedFile)\n    setBuffer(buffer)\n    setIsFileUploaded(true)\n    setCanUpdate(true)\n  }\n\n  function getClickedScheduleId(e) {\n    return parseInt(e.currentTarget.getAttribute(\"scheduleId\"))\n  }\n\n  function onEditScheduleClicked(e) {\n    //need to use currentTarget since it's a material icon component so need to get the reference to the underlying base DOM element\n    console.log(e.currentTarget.getAttribute(\"scheduleId\"))\n    setOpenReuploadDialog(true)\n    setClickedScheduleId(getClickedScheduleId(e))\n    const clicked = schedules.find(\n      (s) => s.scheduleId === getClickedScheduleId(e)\n    )\n\n    setClickedSchedule(clicked)\n    setCurrentScheduleName(clicked.scheduleName)\n  }\n\n  //shared by all dialogs since only one can be opened at the same time\n  function onDialogCloseClicked(e) {\n    resetState(openReuploadDialog, false, setOpenReuploadDialog)\n    resetState(openPublishDialog, false, setOpenPublishDialog)\n    resetState(isFileUploaded, false, setIsFileUploaded)\n    resetState(canUpdate, false, setCanUpdate)\n\n    resetState(buffer, null, setBuffer)\n    resetState(clickedSchedule, null, setClickedSchedule)\n    resetState(currentScheduleName, null, setCurrentScheduleName)\n  }\n\n  async function onDeleteScheduleClicked(e) {\n    const scheduleId = getClickedScheduleId(e)\n    setClickedScheduleId(getClickedScheduleId(e))\n    if (\n      window.confirm(\n        `Are you sure you want to delete schedule id ${scheduleId}`\n      )\n    ) {\n      const { ok } = await callDecoratedDeleteService(scheduleId)\n      if (ok) {\n        updateSchedulesList(\"delete\", { scheduleId })\n      }\n    }\n  }\n\n  function onPublishScheduleClicked(e) {\n    console.log(\n      `Publish schedule id ${e.currentTarget.getAttribute(\"scheduleId\")}`\n    )\n    setOpenPublishDialog(true)\n    setClickedScheduleId(getClickedScheduleId(e))\n  }\n\n  function onClickedScheduleNameChanged(e) {\n    const scheduleName = e.target.value\n    setClickedSchedule({ ...clickedSchedule, scheduleName })\n    setCanUpdate(\n      checkCanUpdate(scheduleName, currentScheduleName, isFileUploaded)\n    )\n  }\n\n  useEffect(() => {\n    async function fetchSchedules() {\n      const { ok, payload } = await httpService.fetchScheduleInfo()\n      if (ok) {\n        setIsFetchSuccess(true)\n        setSchedules(payload)\n      }\n      setIsFetchSuccess(false)\n    }\n    fetchSchedules()\n  }, [setIsFetchSuccess])\n\n  const classes = useStyles()\n\n  return (\n    <>\n      <DeleteSnackbar />\n      <AddScheduleFloatingButton onActionSuccess={updateSchedulesList} />\n      <Grid container className={classes.container}>\n        {!schedules ? (\n          <FetchNotificationDiv style={{ margin: \"0 auto\" }} />\n        ) : (\n          <>\n            <ScheduleCards\n              schedules={schedules}\n              onEditScheduleClicked={onEditScheduleClicked}\n              onPublishScheduleClicked={onPublishScheduleClicked}\n              onDeleteScheduleClicked={onDeleteScheduleClicked}\n              onActionSuccess={updateSchedulesList}\n              // something about closer/scope that prevents passing references here\n            />\n          </>\n        )}\n      </Grid>\n      <ReuploadScheduleDialog\n        open={openReuploadDialog}\n        onDialogCloseClicked={onDialogCloseClicked}\n        clickedSchedule={clickedSchedule}\n        onActionSuccess={updateSchedulesList}\n        onClickedScheduleNameChanged={onClickedScheduleNameChanged}\n        canUpdate={canUpdate}\n        buffer={buffer}\n        isFileUploaded={isFileUploaded}\n        onFileUploaded={onFileUploaded}\n      />\n      <PublishScheduleDialog\n        open={openPublishDialog}\n        onDialogCloseClicked={onDialogCloseClicked}\n        scheduleId={clickedScheduleId}\n        onActionSuccess={updateSchedulesList}\n      />\n    </>\n  )\n}\n","import React from \"react\"\nimport { Grid } from \"@material-ui/core\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport { ScheduleCard } from \"./register\"\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    justifyContent: \"space-around\",\n  },\n  item: {\n    margin: \"var(--mg-sm)\",\n    padding: 0,\n  },\n}))\n\n//can also make a more general wrapper\nfunction GridItemWrapper(Component, styleHook) {\n  return (props) => {\n    const classes = styleHook()\n    return (\n      <Grid item xs={8} sm={6} md={3} className={classes.item}>\n        <Component {...props} />\n      </Grid>\n    )\n  }\n}\n\nfunction CustomScheduleCard(props) {\n  return GridItemWrapper(ScheduleCard, useStyles)(props)\n}\n\nexport function ScheduleCards({ schedules, unPublishSnackbar, ...props }) {\n  const cards = schedules\n    ? schedules.map(({ scheduleId, scheduleName, weekCount, programmes }) => {\n        return (\n          <CustomScheduleCard\n            key={scheduleId}\n            scheduleId={scheduleId}\n            scheduleName={scheduleName}\n            weekCount={weekCount}\n            programmes={programmes}\n            {...props}\n          />\n        )\n      })\n    : null\n\n  return <>{cards}</>\n}\n","import React from \"react\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport { useActionSnackbar } from \"../../hooks/register\"\nimport httpService from \"../../services/ProgrammeServiceSingleton\"\n\nimport {\n  Card,\n  CardHeader,\n  List,\n  CardContent,\n  CardActions,\n  IconButton,\n  ListItem,\n  Typography,\n  ListItemText,\n  ListItemIcon,\n} from \"@material-ui/core\"\n\nimport { red } from \"@material-ui/core/colors\"\nimport { Delete, Edit, Share, Close } from \"@material-ui/icons\"\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    background: \"var(--txt-cl)\",\n    boxShadow: \"var(--bsd-md)\",\n  },\n  media: {},\n  expand: {\n    transform: \"rotate(0deg)\",\n    marginLeft: \"auto\",\n    transition: theme.transitions.create(\"transform\", {\n      duration: theme.transitions.duration.shortest,\n    }),\n  },\n  expandOpen: {\n    transform: \"rotate(180deg)\",\n  },\n  avatar: {\n    backgroundColor: red[500],\n  },\n  actionBtnWrapper: {\n    display: \"flex\",\n    justifyContent: \"space-evenly\",\n  },\n  scheduleActionBtn: {\n    border: \"none\",\n    boxShadow: \"none\",\n    padding: \"var(--pd-sm)\",\n    width: \"max-content\",\n    \"&:hover\": {\n      color: \"var(--secondary-cl)\",\n      background: \"#333\",\n    },\n  },\n}))\n\nfunction getAttribute(e, attr, isNumber = false) {\n  return isNumber\n    ? parseInt(e.currentTarget.getAttribute(attr))\n    : e.currentTarget.getAttribute(attr)\n}\n\nexport function ScheduleCard({\n  onEditScheduleClicked,\n  onPublishScheduleClicked,\n  onDeleteScheduleClicked,\n  createdAt,\n  weekCount,\n  scheduleName,\n  scheduleId,\n  programmes,\n  onActionSuccess,\n}) {\n  const classes = useStyles()\n\n  //think of a way to lazy load the hooks!\n  const {\n    callDecoratedUnpublishService,\n    UnpublishSnackbar,\n  } = useActionSnackbar(\"unpublish\", httpService.unpublishSchedule)\n\n  async function onUnpublishScheduleClicked(e) {\n    const targetProgramme = programmes.find(\n      ({ programmeId }) => programmeId === getAttribute(e, \"programmeId\", true)\n    )\n\n    if (\n      window.confirm(\n        `Are you sure you want to remove cycle ${scheduleName} from team ${targetProgramme.programmeName}`\n      )\n    ) {\n      //FIXME:\n      const { ok } = await callDecoratedUnpublishService(\n        scheduleId,\n        targetProgramme.programmeId\n      )\n      if (ok) {\n        onActionSuccess(\"unpublish\", { scheduleId, targetProgramme })\n      }\n    }\n  }\n\n  return (\n    <Card className={classes.root}>\n      <CardHeader\n        title={scheduleName ? scheduleName : \"Unnamed\"}\n        subheader={\n          weekCount ? `${weekCount} week(s)` : \"No Exercises Added Yet\"\n        } //TODO: should a created_at field be added?\n      />\n      <CardContent>\n        {programmes.length === 0 ? null : (\n          <List style={{ textAlign: \"left\" }} className=\"team-list\">\n            <Typography variant=\"subtitle1\">\n              Currently Used by Team(s):{\" \"}\n            </Typography>\n            {programmes.map((p) => (\n              <ListItem\n                button\n                key={p.programmeId}\n                onClick={onUnpublishScheduleClicked}\n                programmeid={p.programmeId}\n                scheduleid={scheduleId}\n                programmename={p.programmeName}\n                className=\"team-list-item\"\n              >\n                <ListItemText\n                  className=\"team-list-item-text\"\n                  primary={p.programmeName}\n                />\n                <ListItemIcon>\n                  <Close className=\"unpublish-schedule-icon\" fontSize=\"small\" />\n                </ListItemIcon>\n              </ListItem>\n            ))}\n          </List>\n        )}\n        <UnpublishSnackbar />\n      </CardContent>\n      <CardActions disableSpacing className={classes.actionBtnWrapper}>\n        <IconButton\n          className={classes.scheduleActionBtn}\n          aria-label=\"edit\"\n          onClick={onEditScheduleClicked}\n          scheduleid={scheduleId}\n        >\n          <Edit />\n        </IconButton>\n        <IconButton\n          className={classes.scheduleActionBtn}\n          aria-label=\"publish\"\n          onClick={onPublishScheduleClicked}\n          scheduleid={scheduleId}\n        >\n          <Share />\n        </IconButton>\n        <IconButton\n          className={classes.scheduleActionBtn}\n          aria-label=\"delete\"\n          onClick={onDeleteScheduleClicked}\n          scheduleid={scheduleId}\n        >\n          <Delete />\n        </IconButton>\n      </CardActions>\n    </Card>\n  )\n}\n","import React from \"react\"\nimport { Fab } from \"@material-ui/core\"\nimport { CloudUpload } from \"@material-ui/icons\"\nimport { AddScheduleFormDialog } from \"./register\"\n\nexport function AddScheduleFloatingButton({ onActionSuccess }) {\n  const [open, setOpen] = React.useState(false)\n\n  function onDialogOpenClicked() {\n    setOpen(true)\n  }\n\n  function handleClose() {\n    setOpen(false)\n  }\n  return (\n    <>\n      <Fab\n        onClick={onDialogOpenClicked}\n        variant=\"extended\"\n        aria-label=\"add\"\n        style={{ position: \"absolute\", left: \"5%\", top: \"13.5%\" }}\n      >\n        <CloudUpload />\n        <span\n          style={{ textAlign: \"center\" }}\n          className=\"add-schedule-btn-wrapper\"\n        >\n          New Cycle\n        </span>\n      </Fab>\n      <AddScheduleFormDialog\n        open={open}\n        handleClose={handleClose}\n        onActionSuccess={onActionSuccess}\n      />\n    </>\n  )\n}\n","import React from \"react\"\nimport { ScheduleUploader } from \"../schedules/register\"\nimport {\n  Dialog,\n  DialogActions,\n  DialogTitle,\n  DialogContent,\n  Typography,\n} from \"@material-ui/core\"\n\nexport function AddScheduleFormDialog({ handleClose, open, onActionSuccess }) {\n  return (\n    <Dialog\n      open={open}\n      onClose={handleClose}\n      aria-labelledby=\"form-dialog-title\"\n    >\n      <DialogTitle\n        style={{\n          backgroundColor: \"var(--txt-cl)\",\n        }}\n      >\n        <Typography style={{ fontWeight: \"var(--fw-md)\" }}>\n          New Cycle\n        </Typography>\n      </DialogTitle>\n      <DialogContent className=\"add-new-schedule-dialog\">\n        <ScheduleUploader onActionSuccess={onActionSuccess} />\n      </DialogContent>\n      <DialogActions\n        style={{\n          justifyContent: \"center\",\n          padding: \"0\",\n          backgroundColor: \"var(--txt-cl)\",\n        }}\n      >\n        <button onClick={handleClose} style={{ width: \"max-content\" }}>\n          Close\n        </button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n","import React from \"react\"\nimport { ScheduleReuploader } from \"../schedules/register\"\nimport { useActionSnackbar } from \"../../hooks/register\"\nimport {\n  Dialog,\n  DialogActions,\n  DialogTitle,\n  DialogContent,\n  Typography,\n} from \"@material-ui/core\"\nimport httpService from \"../../services/ProgrammeServiceSingleton\"\nimport { makeSchedulePayload } from \"../../services/register\"\n\nexport function ReuploadScheduleDialog({\n  onDialogCloseClicked,\n  open,\n  clickedSchedule,\n  onClickedScheduleNameChanged,\n  currentClickedScheduleName,\n  onActionSuccess,\n  canUpdate,\n  fileUploaded,\n  onFileUploaded,\n  buffer,\n  ...props\n}) {\n  const { callDecoratedRepostService, RepostSnackbar } = useActionSnackbar(\n    \"repost\",\n    httpService.repostSchedule\n  )\n\n  async function onSaveUpdateClicked() {\n    const data = makeSchedulePayload(\n      buffer,\n      [],\n      clickedSchedule.scheduleName,\n      false,\n      clickedSchedule.scheduleId\n    )\n\n    const { ok } = await callDecoratedRepostService(data)\n    if (ok) {\n      //don't need timetable to update UI\n      delete data.timetable\n      onActionSuccess(\"repost\", data)\n    }\n  }\n\n  return (\n    <Dialog\n      open={open}\n      onClose={onDialogCloseClicked}\n      aria-labelledby=\"form-dialog-title\"\n    >\n      <DialogTitle\n        style={{\n          backgroundColor: \"var(--txt-cl)\",\n        }}\n      >\n        <Typography style={{ fontWeight: \"var(--fw-md)\" }}>\n          Reupload Cycle\n        </Typography>\n      </DialogTitle>\n      <DialogContent className=\"add-new-schedule-dialog\">\n        <RepostSnackbar />\n        {clickedSchedule && (\n          <ScheduleReuploader\n            {...props}\n            onClickedScheduleNameChanged={onClickedScheduleNameChanged}\n            onFileUploaded={onFileUploaded}\n            scheduleName={clickedSchedule.scheduleName}\n            fileUploaded={fileUploaded}\n          />\n        )}\n      </DialogContent>\n      <DialogActions\n        style={{\n          display: \"flex\",\n          justifyContent: \"space-evenly\",\n          padding: \"0\",\n          backgroundColor: \"var(--txt-cl)\",\n        }}\n      >\n        <button\n          disabled={!canUpdate}\n          onClick={onSaveUpdateClicked}\n          style={{ width: \"max-content\" }}\n        >\n          Save\n        </button>\n        <button onClick={onDialogCloseClicked} style={{ width: \"max-content\" }}>\n          Close\n        </button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n","import React, { useState } from \"react\"\nimport { FileUploader, ScheduleNameInput } from \"./register\"\nimport { Grid } from \"@material-ui/core\"\nimport { ActionNotificationDiv } from \"../ActionNotificationDiv\"\n//a good candidate for Redux, since needed by many components, lets just do useState for now\n//snackBar good candidate for a factory function\n\nexport function ScheduleReuploader({\n  onClickedScheduleNameChanged,\n  onFileUploaded,\n  scheduleName,\n  isFileUploaded,\n}) {\n  const [actionStatus, setActionStatus] = useState({\n    action: \"File Upload\",\n    isActionSuccess: isFileUploaded,\n  })\n\n  function onCloseActionStatusDiv() {\n    setActionStatus({ action: null, isActionSuccess: null })\n  }\n\n  return (\n    <Grid\n      container\n      xs={8}\n      md={12}\n      lg={12}\n      style={{\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyContent: \"space-around\",\n      }}\n    >\n      <ScheduleNameInput\n        label=\"Cycle Name\"\n        onClickedScheduleNameChanged={onClickedScheduleNameChanged}\n        scheduleName={scheduleName}\n      />\n\n      <ActionNotificationDiv\n        actionStatus={actionStatus}\n        onCloseActionStatusDiv={onCloseActionStatusDiv}\n      />\n\n      {scheduleName.length > 0 ? (\n        <FileUploader onFileUploaded={onFileUploaded} />\n      ) : (\n        \"Schedule Name Must Not Be Empty\"\n      )}\n    </Grid>\n  )\n}\n","import React, { useState, useEffect } from \"react\"\nimport { ProgrammeOptions } from \"./register\"\nimport { Dialog, DialogActions, DialogTitle, Grid } from \"@material-ui/core\"\nimport { findIndexAndDelete } from \"../../services/register\"\nimport { useActionSnackbar, useFetchSnackbar } from \"../../hooks/register\"\nimport httpService from \"../../services/ProgrammeServiceSingleton\"\n\nexport function PublishScheduleDialog({\n  scheduleId,\n  onDialogCloseClicked,\n  open,\n  onActionSuccess,\n}) {\n  // const [isFetchSuccess, setIsFetchSuccess] = useState(null)\n  const [selectedProgrammeIds, setSelectedProgrammeIds] = useState([])\n  const [programmes, setProgrammes] = useState(null)\n\n  const { setIsFetchSuccess, FetchNotificationDiv } = useFetchSnackbar(\n    \"available programmes\"\n  )\n\n  const {\n    publishActionStatus,\n    callDecoratedPublishService,\n    PublishSnackbar,\n  } = useActionSnackbar(\"publish\", httpService.publishSchedule)\n\n  function onProgrammeChecked(e) {\n    const checkedProgrammeId = parseInt(e.target.value)\n    if (e.target.checked) {\n      setSelectedProgrammeIds([...selectedProgrammeIds, checkedProgrammeId])\n    } else {\n      setSelectedProgrammeIds((selectedProgrammeIds) => {\n        let newArr = [...selectedProgrammeIds]\n        findIndexAndDelete(checkedProgrammeId, newArr)\n        return newArr\n      })\n    }\n  }\n\n  async function onPublishScheduleClicked() {\n    const { ok } = await callDecoratedPublishService(\n      scheduleId,\n      selectedProgrammeIds\n    )\n\n    if (ok) {\n      onActionSuccess(\"publish\", {\n        scheduleId,\n        programmes: getAddedProgrammes(selectedProgrammeIds, programmes),\n      })\n    }\n  }\n\n  function getAddedProgrammes(selectedProgrammeIds, programmes) {\n    return programmes.filter((p) =>\n      selectedProgrammeIds.includes(p.programmeId)\n    )\n  }\n\n  useEffect(() => {\n    async function getAvailableProgrammesToPublish(scheduleId) {\n      const { ok, payload } = await httpService.getAvailableProgrammesToPublish(\n        scheduleId\n      )\n      if (ok) {\n        setIsFetchSuccess(true)\n        setProgrammes(payload)\n        return\n      }\n      setIsFetchSuccess(false)\n    }\n\n    if (open) {\n      getAvailableProgrammesToPublish(scheduleId)\n    }\n  }, [scheduleId, open, setIsFetchSuccess])\n\n  return (\n    <Grid item xs={10} sm={8} md={6}>\n      <Dialog\n        open={open}\n        onClose={onDialogCloseClicked}\n        aria-labelledby=\"form-dialog-title\"\n        style={{ overflow: \"hidden\" }}\n      >\n        <DialogTitle\n          style={{\n            backgroundColor: \"var(--txt-cl)\",\n            fontWeight: \"var(--fw-md)\",\n          }}\n        >\n          Publish Cycle\n        </DialogTitle>\n        <div className=\"publish-schedule-dialog\">\n          {programmes ? (\n            <ProgrammeOptions\n              programmes={programmes}\n              onProgrammeChecked={onProgrammeChecked}\n              label=\"Publish to Team\"\n            />\n          ) : (\n            <FetchNotificationDiv />\n          )}\n          {publishActionStatus.action ? <PublishSnackbar /> : null}\n        </div>\n        <DialogActions\n          style={{\n            justifyContent: \"space-around\",\n            padding: \"0\",\n            backgroundColor: \"var(--txt-cl)\",\n            overflow: \"hidden\",\n          }}\n        >\n          <button\n            disabled={\n              selectedProgrammeIds.length > 0 || !programmes ? false : true\n            }\n            onClick={onPublishScheduleClicked}\n            style={{ width: \"max-content\" }}\n          >\n            Publish\n          </button>\n          <button\n            onClick={onDialogCloseClicked}\n            style={{ width: \"max-content\" }}\n          >\n            Close\n          </button>\n        </DialogActions>\n      </Dialog>\n    </Grid>\n  )\n}\n","import React from \"react\"\nimport { TextField, makeStyles } from \"@material-ui/core\"\n\nconst useStyles = makeStyles((theme) => ({\n  scheduleName: {\n    marginBottom: \"var(--mg-sm)\",\n  },\n  input: {\n    fontFamily: \"var(--ff)\",\n    color: \"#001e18\",\n    marginBottom: \"var(--mg-sm)\",\n  },\n  formLabelRoot: {\n    fontFamily: \"var(--ff)\",\n    color: \"var(--txt-cl)\",\n  },\n  formLabelFocused: {\n    fontFamily: \"var(--ff)\",\n    color: \"var(--txt-cl)\",\n    \"'& label.Mui-focused'\": {\n      fontFamily: \"var(--ff)\",\n      color: \"var(--txt-cl)\",\n    },\n  },\n}))\n\nexport function ScheduleNameInput({\n  onClickedScheduleNameChanged,\n  scheduleName,\n  label,\n}) {\n  const classes = useStyles()\n  return (\n    <TextField\n      label={label}\n      className={classes.scheduleName}\n      onChange={onClickedScheduleNameChanged}\n      value={scheduleName}\n      InputProps={{ className: classes.input }}\n      InputLabelProps={{\n        className: classes.formLabelRoot,\n      }}\n    />\n  )\n}\n","import React, { useState } from \"react\"\nimport { BrowserRouter as Router, Redirect } from \"react-router-dom\"\n//https://reactrouter.com/web/api\n\nimport { Navbar, Footer, PageRoutes } from \"./app/register\"\n\nimport { LearnersPanel } from \"./components/learners/register\"\nimport { SchedulePanel } from \"./components/schedules/register\"\nimport {\n  InstructorLoginPage,\n  InstructorAccountPage,\n} from \"./components/home/register\"\n\nimport { UserAuth, NavHelpers } from \"./services/register\"\nimport { ThemeProvider, createMuiTheme } from \"@material-ui/core/styles\"\n\nconst theme = createMuiTheme({\n  typography: {\n    fontFamily: [\"Montserrat\", \"sans-serif\"],\n  },\n})\n\nconst allLinks = {\n  instructor: [\n    {\n      to: \"/instructor/schedules\",\n      label: \"Schedules\",\n      component: SchedulePanel,\n      isProtected: true,\n    },\n    {\n      to: \"/instructor/learners\",\n      label: \"Learners Panel\",\n      component: LearnersPanel,\n      isProtected: true,\n    },\n    {\n      to: \"/instructor/account\",\n      label: \"Account\",\n      component: InstructorAccountPage,\n      isProtected: true,\n    },\n    {\n      to: \"/logout\",\n      label: \"Log Out\",\n      component: null,\n      isProtected: true,\n    },\n  ],\n  learnerApp: [\n    {\n      to: \"/learner/login\",\n      label: \"Learner Space\",\n      isProtected: false,\n    },\n  ],\n}\n\nexport function InstructorApp({ onAppChange }) {\n  const [isInstructorLoggedIn, setIsInstructorLoggedIn] = useState(\n    UserAuth.isAuthenticated()\n  )\n\n  const [links, setLinks] = useState(\n    UserAuth.isAuthenticated() ? allLinks.instructor : allLinks.learnerApp\n  )\n\n  function onInstructorLogIn() {\n    setLinks(allLinks.instructor)\n    setIsInstructorLoggedIn(true)\n  }\n\n  //lets see if there's any difference\n  function onInstructorLogOut(e) {\n    console.log(\"log me out!\")\n    UserAuth.clearToken()\n    NavHelpers.setCurrentPage(\"/instructor/login\")\n    setLinks(allLinks.learnerApp)\n    setIsInstructorLoggedIn(false)\n  }\n\n  return (\n    <ThemeProvider theme={theme}>\n      <Router>\n        <Navbar\n          links={links}\n          pageTitle=\"Otago Weightlifting Instructor Space\"\n          onLogOut={onInstructorLogOut}\n          onAppChange={onAppChange}\n        />\n        <div className=\"App main\">\n          {isInstructorLoggedIn ? (\n            <Redirect\n              to={\n                NavHelpers.getCurrentPage() !== \"/instructor/login\"\n                  ? NavHelpers.getCurrentPage()\n                  : \"/instructor/schedules\"\n              }\n            />\n          ) : (\n            <InstructorLoginPage onInstructorLogIn={onInstructorLogIn} />\n          )}\n          <PageRoutes links={links} />\n        </div>\n        <Footer />\n      </Router>\n    </ThemeProvider>\n  )\n}\n\nexport default InstructorApp\n","import React, { useState, useEffect } from \"react\"\n\nimport { PersonalBestsForm, LearnerSearchInput } from \"./register\"\nimport { FetchNotificationDivFactory } from \"../factoryComponent\"\nimport { ActionNotificationDiv } from \"../ActionNotificationDiv\"\n\nimport httpService from \"../../services/LearnerServiceSingleton\"\nimport { shallowEqual } from \"../../utils\"\nimport { NavHelpers } from \"../../services/register\"\n\nexport function LearnersPanel() {\n  NavHelpers.setCurrentPage(\"/instructor/learners\")\n  const [learners, setLearners] = useState([])\n  const [displayedLearners, setDisplayedLearners] = useState([])\n  const [searchPhrase, setSearchPhrase] = useState(\"\")\n  const [selectedLearner, setSelectedLearner] = useState(null)\n  const [canEditAndUpdate, setCanEditAndUpdate] = useState(false)\n  const [actionStatus, setActionStatus] = useState({\n    action: null,\n    isActionSuccess: null,\n  })\n\n  //maybe these can be combined into a useNotification hook?\n  const [isFetchSuccess, setIsFetchSuccess] = useState(null)\n  const FetchLearnersNotificationDiv = FetchNotificationDivFactory(\n    \"learners\",\n    \"Click On A Name\"\n  )\n\n  function onCloseActionStatusDiv(e) {\n    setActionStatus({ action: null, isActionSuccess: null })\n  }\n\n  function filterLearners(learners, phrase) {\n    const processedPhrase = phrase.trim().toLowerCase()\n\n    if (processedPhrase.length === 0) return learners\n\n    return learners.filter(\n      ({ firstName, lastName }) =>\n        firstName.toLowerCase().trim().startsWith(processedPhrase) ||\n        lastName.toLowerCase().trim().startsWith(processedPhrase)\n    )\n  }\n\n  function getLearnerById(id) {\n    //avoid filter if ur searching for just one and all items are unique\n    return learners.find(({ learnerId }) => learnerId === parseInt(id))\n  }\n\n  function onSearchPhraseChanged(e) {\n    const phrase = e.target.value\n\n    //the two operations are not synchronous!\n    setSearchPhrase(e.target.value)\n    //dont set it using the searchPhrase because React may not have updated it with the new value\n    setDisplayedLearners(filterLearners(learners, phrase))\n  }\n\n  function onLearnerItemClicked(e) {\n    const selected = getLearnerById(e.target.getAttribute(\"learnerId\"))\n    setSelectedLearner(selected)\n  }\n\n  function onPersonalBestsInputChange(e) {\n    const changedField = e.target.getAttribute(\"name\")\n    const newValue = e.target.value\n\n    //console.log(e.target.getAttribute(\"name\"))\n\n    setSelectedLearner((selectedLearner) => {\n      let newSelectedLearner = { ...selectedLearner }\n      newSelectedLearner[changedField] = newValue\n      return newSelectedLearner\n    })\n  }\n\n  //FIXME: this may break if user's currently filtering!\n  function updateUILearnerList(updatedLearnerIndex, action = \"UPDATE\") {\n    const newLearnersList = [...learners]\n    switch (action) {\n      default:\n        newLearnersList[updatedLearnerIndex] = selectedLearner\n        //updated the list because name can be updated\n        setLearners(newLearnersList)\n        setDisplayedLearners(\n          filterLearners(newLearnersList, `${selectedLearner.firstName}`)\n        )\n        setSearchPhrase(`${selectedLearner.firstName}`)\n        break\n      case \"DELETE\":\n        //remove the deleted learner\n        newLearnersList.splice(updatedLearnerIndex, 1)\n        //should go back to the full list after deleting\n        setDisplayedLearners(newLearnersList)\n        setLearners(newLearnersList)\n        //reset form\n        setSelectedLearner(null)\n        //reset searchPhrase\n        setSearchPhrase(\"\")\n        break\n    }\n  }\n\n  function getUpdatedLearnerIndex(learners, selectedLearner) {\n    return learners.findIndex(({ learnerId }) => {\n      return learnerId === selectedLearner.learnerId\n    })\n  }\n\n  async function onUpdatePersonalBests(e) {\n    const updatedLearnerIndex = getUpdatedLearnerIndex(\n      learners,\n      selectedLearner\n    )\n\n    if (\n      !window.confirm(\n        `Are you sure you want to update ${selectedLearner.firstName}'s record?`\n      )\n    ) {\n      setSelectedLearner(null)\n      setDisplayedLearners(learners)\n      setSearchPhrase(\"\")\n      return\n    } else {\n      //check if the selectedLearner actually changes\n      if (shallowEqual(learners[updatedLearnerIndex], selectedLearner)) {\n        console.log(\"No need to rerender or update!\")\n        return\n      }\n\n      setActionStatus({ action: \"update\", isActionSuccess: null })\n\n      const { ok } = await httpService.updateLearner(selectedLearner)\n\n      if (ok) {\n        //...when should you update?\n        updateUILearnerList(updatedLearnerIndex)\n\n        setActionStatus({ action: \"update\", isActionSuccess: true })\n      } else {\n        console.log(\"Updating failed!\", ok)\n        //refill the form with the old information\n        setSelectedLearner(learners[updatedLearnerIndex])\n        setSearchPhrase(selectedLearner.firstName)\n\n        setActionStatus({ action: \"update\", isActionSuccess: false })\n      }\n    }\n  }\n\n  function enableEditAndUpdate() {\n    setCanEditAndUpdate(!canEditAndUpdate)\n  }\n\n  async function onDeleteLearner(e) {\n    if (\n      !window.confirm(\n        `Are you sure you want to delete ${selectedLearner.firstName}'s record?`\n      )\n    ) {\n      setCanEditAndUpdate(false)\n      return\n    }\n\n    setActionStatus({ action: \"delete\", isActionSuccess: null })\n\n    const { ok } = await httpService.deleteLearner(selectedLearner.learnerId)\n\n    if (ok) {\n      setActionStatus({ action: \"delete\", isActionSuccess: true })\n      const updatedLearnerIndex = getUpdatedLearnerIndex(\n        learners,\n        selectedLearner\n      )\n      updateUILearnerList(updatedLearnerIndex, \"DELETE\")\n      console.log(\"Deleting ... Success!\")\n    } else {\n      setActionStatus({ action: \"delete\", isActionSuccess: false })\n      console.log(\"Deleting failed!\")\n    }\n  }\n\n  useEffect(() => {\n    async function fetchLearners() {\n      const { ok, payload } = await httpService.fetchLearners()\n\n      if (ok) {\n        //the two operations are not synchronous!\n        setLearners(payload)\n        setDisplayedLearners(payload)\n        setIsFetchSuccess(true)\n      } else {\n        setIsFetchSuccess(false)\n      }\n    }\n    fetchLearners()\n  }, [])\n\n  return (\n    <>\n      <ActionNotificationDiv\n        actionStatus={actionStatus}\n        onCloseActionStatusDiv={onCloseActionStatusDiv}\n      />\n      <div className=\"learnerPanelWrapper\" style={{ display: \"flex\" }}>\n        {isFetchSuccess ? (\n          <LearnerSearchInput\n            searchPhrase={searchPhrase}\n            onSearchPhraseChanged={onSearchPhraseChanged}\n            learners={learners}\n            displayedLearners={displayedLearners}\n            onLearnerItemClicked={onLearnerItemClicked}\n          />\n        ) : (\n          <FetchLearnersNotificationDiv isFetchSuccess={isFetchSuccess} />\n        )}\n        {selectedLearner ? (\n          <PersonalBestsForm\n            selectedLearner={selectedLearner}\n            onPersonalBestsInputChange={onPersonalBestsInputChange}\n            onUpdatePersonalBests={onUpdatePersonalBests}\n            canEditAndUpdate={canEditAndUpdate}\n            enableEditAndUpdate={enableEditAndUpdate}\n            onDeleteLearner={onDeleteLearner}\n          />\n        ) : (\n          <FetchLearnersNotificationDiv isFetchSuccess={isFetchSuccess} />\n        )}\n      </div>\n    </>\n  )\n}\n","import React from \"react\"\n\nexport function FetchNotificationDivFactory(\n  resourceName = null,\n  postFetchAction = null\n) {\n  return function ({ isFetchSuccess, ...props }) {\n    //NOTE: a factory function for customizing a notification div based on the kind of payload\n    switch (isFetchSuccess) {\n      default:\n        return (\n          <div {...props} style={{ color: \"var(--bg-cl)\" }}>\n            Loading {resourceName ? resourceName : \"data\"} ...\n          </div>\n        )\n      case true:\n        return (\n          <div {...props} style={{ color: \"green\" }}>\n            {postFetchAction ? postFetchAction : \"Finished loading data!\"}\n          </div>\n        )\n      case false:\n        return (\n          <div {...props} style={{ color: \"red\" }}>\n            Failed to load {resourceName ? resourceName : \"data\"}\n          </div>\n        )\n    }\n  }\n}\n","import React from \"react\"\nimport { NavHelpers } from \"../../services/register\"\n\nexport function InstructorAccountPage({ onLogOutClicked }) {\n  NavHelpers.setCurrentPage(\"/instructor/account\")\n  return (\n    <>\n      <h1>Under Construction</h1>\n    </>\n  )\n}\n","import React from \"react\"\nimport { LearnerApp, InstructorApp } from \"./register\"\n\nexport function App({ currentPage, onAppChange }) {\n  return currentPage.includes(\"/instructor\") ? (\n    <InstructorApp onAppChange={onAppChange} />\n  ) : (\n    <LearnerApp onAppChange={onAppChange} />\n  )\n}\n","import React, { useState } from \"react\"\nimport { App } from \"./register\"\nimport { NavHelpers } from \"./services/register\"\n\nexport default function AppControl() {\n  //FIXME: this will always get back to instructor app and log the user in! Should have separate auth for different user. It could also be the routing as well, since refreshing instructor app pages work fine\n  const [currentPage, setCurrentPage] = useState(\n    NavHelpers.getCurrentPage() ? NavHelpers.getCurrentPage() : \"/learner/login\"\n  )\n\n  function onAppChange(e) {\n    const targetPage = e.target.getAttribute(\"to\")\n    console.log(targetPage)\n    NavHelpers.currentApp = targetPage\n    NavHelpers.setCurrentPage(targetPage)\n    setCurrentPage(targetPage)\n  }\n\n  return <App currentPage={currentPage} onAppChange={onAppChange} />\n}\n\n//if there is no current page, redirects to learner's login\n//learners should be redirect to schedule page after login\n//refreshing should reload the current page\n","import { configureStore } from \"@reduxjs/toolkit\";\n\nexport default configureStore({\n  reducer: {},\n});\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport \"./style/resetBrowserStyle.css\"\nimport \"./style/style.css\"\n// import App from \"./App\"\nimport AppControl from \"./AppControl\"\nimport store from \"./app/store\"\nimport { Provider } from \"react-redux\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <AppControl />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n)\n"],"sourceRoot":""}