{"version":3,"sources":["assets/logo.jpg","app/NavBarControl.js","app/Footer.js","services/auth.js","utils.js","services/http.js","services/validateCredentials.js","services/InstructorServiceSingleton.js","services/LearnerServiceSingleton.js","services/ProgrammeServiceSingleton.js","services/fileReaderPromise.js","services/makeSchedulePayload.js","services/array.js","services/NavHelpers.js","services/processInstruction.js","app/PageRoutes.js","app/DrawerLinks.js","app/DrawerNavBar.js","app/HorizontalNavBar.js","components/factoryComponent.js","components/ActionNotificationDiv.js","components/learners/LearnerNameList.js","components/learners/PersonalBestsForm.js","components/learners/LearnerSearchInput.js","reducers/learnerSchedulesSlice.js","components/learners/ScheduleOptions.js","components/learners/WeekOptions.js","reducers/learnerPbsSlice.js","reducers/dailyExercisesSlice.js","hooks/useFetchSnackbar.js","components/learners/ExercisePage.js","components/learners/ScheduleSelect.js","components/learners/DayOptions.js","components/learners/DailyExerciseTable.js","components/learners/FeedBackDialog.js","components/learners/PbsDialog.js","components/learners/LearnerPbsForm.js","components/home/InstructorLoginPage.js","components/home/LearnerLoginPage.js","components/home/Logo.js","components/home/LoginFormButton.js","components/home/LoginForm.js","components/home/LoginFields.js","components/home/LoginFormButtonPanel.js","LearnerApp.js","components/learners/LearnerSchedulePage.js","components/learners/LearnerPracticeBestsPage.js","components/schedules/myExcelReader.js","hooks/useActionSnackbar.js","components/schedules/ScheduleUploader.js","components/schedules/FileUploader.js","components/schedules/ProgrammeOptions.js","components/schedules/ScheduleReducers.js","components/schedules/SchedulePanel.js","components/schedules/ScheduleCards.js","components/schedules/ScheduleCard.js","components/schedules/AddScheduleFloatingButton.js","components/schedules/AddScheduleFormDialog.js","components/schedules/ReuploadScheduleDialog.js","components/schedules/ScheduleReuploader.js","components/schedules/PublishScheduleDialog.js","components/schedules/ScheduleNameInput.js","InstructorApp.js","components/learners/LearnersPanel.js","components/home/InstructorAccountPage.js","App.js","AppControl.js","app/store.js","index.js"],"names":["module","exports","NavLink","to","label","className","NavBarControl","navLinks","links","onLogOut","onAppChange","pageTitle","useState","window","innerWidth","currentWidth","setCurrentWidth","useEffect","saveCurrentWidth","addEventListener","removeEventListener","length","component","filter","display","map","key","onClick","DrawerNavBar","HorizontalNavBar","Footer","UserAuth","sessionStorage","getItem","token","setItem","removeItem","camelCaseToNormal","camelCaseStr","split","reduce","str","char","index","toUpperCase","catchAsync","asyncFunc","errorHandler","a","console","log","toString","search","ok","payload","message","shallowEqual","obj1","obj2","Object","entries","every","obj1Key","obj1Value","hasOwnProperty","spinner","show","status","document","querySelector","style","safeSpinnerWrapper","func","res","capitalise","string","substring","HttpServiceSingleton","this","postInstructorCredentials","_fetchPostFactory","_instance","resourceUrl","BASE_URL","timeout","url","_makeUrl","options","method","mode","headers","body","JSON","stringify","isAuthenticated","Authorization","getToken","_setFetchTimeout","fetch","_makePayload","resourceUrlAndId","ctl","AbortController","setTimeout","abort","signal","response","json","asyncFetchFunc","setInterval","location","href","includes","getInstance","isNotEmpty","trim","validateInstructorCredentials","email","password","test","isValidEmail","validateLearnerCredentials","username","InstructorServiceSingleton","instructorLogin","credentials","getInstructorInstance","LearnerServiceSingleton","updateLearner","deleteLearner","createLearner","learnerLogin","updateLearnerPbs","createNewPracticeBest","updatePracticeBest","getPracticeBestsByExerciseName","_fetchJsonFactory","selectedLearner","_fetchPutFactory","learner","learnerId","_fetchDeleteFactory","signupInfo","pbs","newPbs","exerciseName","repMax","weight","encodeURI","pbId","getLearnerInstance","ProgrammeServiceSingleton","fetchProgrammes","fetchSchedules","fetchScheduleInfo","deleteSchedule","publishSchedule","unpublishSchedule","repostSchedule","postNewSchedule","fetchExercises","fetchExerciseNames","getAvailableProgrammesToPublish","scheduleId","programmeIds","programmeId","week","getProgrammeInstance","fileReaderPromise","file","Promise","resolve","reject","r","FileReader","onload","e","target","result","onerror","readAsArrayBuffer","parseRows","buffer","workbook","XLSX","read","type","rows","SheetNames","forEach","sheetName","XL_row_object","utils","sheet_to_json","Sheets","push","weekCount","makeTimeTable","exercisesArr","aggregate","prevPair","pairs","day","getWeekDayPair","dayInWeek","w","d","acc","instruction","undefined","makeSchedulePayload","scheduleName","isNew","timetable","findIndexAndDelete","val","arr","splice","findIndex","v","NavHelpers","page","currentPage","pbsToExercises","snatch","clean","jerk","cleanAndJerk","backSquat","frontSquat","pushPress","RPEorRIR","calculateRealWeight","pb","part","indexOf","Math","abs","parseInt","toFixed","join","parsePercent","processInstruction","matchedPbValue","keys","k","toLowerCase","replace","getMatchedPbValue","PageRoutes","routes","exact","path","getCurrentPage","useStyles","makeStyles","btn","padding","color","boxShadow","borderRadius","flex","border","drawer","width","drawerPaper","background","navList","paddingTop","navItem","navItemText","fontSize","DrawerLinks","open","setOpen","toggleDrawer","state","classes","Icon","icon","Fragment","Divider","ListItem","button","Link","ListItemIcon","ListItemText","primary","IconButton","Menu","Drawer","anchor","onClose","paper","List","wrapper","title","fontWeight","Grid","container","item","xs","LinkButton","rest","history","useHistory","Button","ActionNotificationDiv","React","memo","actionStatus","onCloseActionStatusDiv","action","isActionSuccess","visibility","CheckCircleOutlineRounded","ErrorOutlineRounded","LearnerNameList","learners","onLearnerItemClicked","learnerItems","firstName","lastName","learnerid","PersonalBestInput","props","htmlFor","id","name","PersonalBestsForm","onPersonalBestsInputChange","onUpdatePersonalBests","enableEditAndUpdate","canEditAndUpdate","onDeleteLearner","inputs","fieldName","value","onChange","readOnly","opacity","textTransform","onDoubleClick","Edit","disabled","Save","Delete","LearnerSearchInput","searchPhrase","onSearchPhraseChanged","displayedLearners","flexDirection","placeholder","learnerSchedulesSlice","createSlice","initialState","schedules","programmeName","reducers","initSchedules","selectLearnerSchedules","learnerSchedules","actions","theme","formControl","margin","spacing","maxWidth","selectEmpty","marginTop","ScheduleOptions","onScheduleChecked","selectedSchedule","Typography","items","MenuItem","FormControl","InputLabel","Select","WeekOptions","onWeekSelected","selectedWeek","gap","Array","fill","element","range","learnerPbsSlice","initPbs","selectLearnerPbs","learnerPbs","dailyExercisesSlice","exercises","prevWeek","prevScheduleId","stale","initDailyExercises","parse","selectDailyExercises","dailyExercises","useFetchSnackbar","resourceName","postFetchAction","isFetchSuccess","setIsFetchSuccess","Component","FetchNotificationDiv","minWidth","alignContent","height","flexWrap","itemWrapper","justifyContent","header","ScheduleSelect","onScheduleSubmitted","md","lg","alignSelf","select","paddingRight","DayOptions","onDaySelected","selectedDay","DailyExerciseTable","TableContainer","Table","size","aria-label","TableHead","TableRow","TableCell","align","TableBody","dialog","content","form","FeedBackDialog","onDialogCloseClicked","Dialog","fullScreen","aria-labelledby","DialogContent","src","DialogActions","backgroundColor","PbsDialog","LearnerPbsForm","TextField","direction","justify","InstructorLoginPage","onInstructorLogIn","setCurrentPage","setCredentials","errorMessage","setErrorMessage","preventDefault","error","httpService","saveToken","minHeight","Logo","LoginForm","onFormSubmitted","onInputChanged","changedField","getAttribute","newValue","c","LearnerLoginPage","onLearnerLogIn","isLearnerLoggedIn","dispatch","useDispatch","require","alt","LoginFormButton","variant","ErrorMessageDiv","marginBottom","onSubmit","LoginFields","LoginFormButtonPanel","fields","InputProps","btns","customClassName","wrap","allLinks","useSelector","setSelectedschedule","setSelectedWeek","isSchedulePicked","setIsSchedulePicked","checkedScheduleId","find","s","isProtected","TodayOutlined","FitnessCenter","ExitToApp","useParams","setSelectedDay","openFeedbackDialog","setOpenFeedbackDialog","openPbsDialog","setOpenPbsDialog","tempPbs","setTempPbs","learnerHttpService","programmeHttpService","newTempPbs","parseFloat","instructorApp","LearnerApp","setIsLearnerLoggedIn","setLinks","clearToken","myExcelReader","reader","event","data","code","readAsArrayBufferPromise","useActionSnackbar","serviceMethod","setActionStatus","callDecoratedService","returnedObj","makePayloadObjectWithCustomPropNames","ScheduleUploader","onActionSuccess","programmes","setProgrammes","selectedProgrammeIds","setSelectedProgrammeIds","setScheduleName","callDecoratedUploadService","UploadSnackbar","selectedFile","files","newSchedule","newScheduleInfoObject","makeNewScheduleInfoObject","p","ScheduleNameInput","onClickedScheduleNameChanged","ProgrammeOptions","onProgrammeChecked","checkedProgrammeId","checked","newArr","FileUploader","onFileUploaded","FormHelperText","alignItems","CloudUploadRounded","accept","checkboxes","FormControlLabel","control","Checkbox","FormLabel","FormGroup","ScheduleReducers","prevSchedules","newSchedules","targetIndex","updatedSchedule","targetProgramme","targetSchedule","removedProgrammeIndex","setSchedules","_deleteOneScheduleById","_addNewSchedule","_addPublishedProgramme","_removeProgrammeFromSchedule","_updateScheduleDetails","resetState","currentState","setStateFunc","CustomScheduleCard","ScheduleCard","styleHook","sm","ScheduleCards","unPublishSnackbar","cards","root","media","expand","transform","marginLeft","transition","transitions","create","duration","shortest","expandOpen","avatar","red","actionBtnWrapper","scheduleActionBtn","attr","isNumber","currentTarget","onEditScheduleClicked","onPublishScheduleClicked","onDeleteScheduleClicked","createdAt","callDecoratedUnpublishService","UnpublishSnackbar","onUnpublishScheduleClicked","confirm","Card","CardHeader","subheader","CardContent","textAlign","programmeid","scheduleid","programmename","Close","CardActions","disableSpacing","Share","AddScheduleFloatingButton","Fab","position","left","top","CloudUpload","AddScheduleFormDialog","handleClose","DialogTitle","ReuploadScheduleDialog","clickedSchedule","currentClickedScheduleName","canUpdate","fileUploaded","callDecoratedRepostService","RepostSnackbar","ScheduleReuploader","isFileUploaded","PublishScheduleDialog","publishActionStatus","callDecoratedPublishService","PublishSnackbar","getAddedProgrammes","overflow","input","fontFamily","formLabelRoot","formLabelFocused","InputLabelProps","instructor","clickedScheduleId","setClickedScheduleId","setClickedSchedule","currentScheduleName","setCurrentScheduleName","openReuploadDialog","setOpenReuploadDialog","openPublishDialog","setOpenPublishDialog","setCanUpdate","setBuffer","setIsFileUploaded","callDecoratedDeleteService","DeleteSnackbar","updateSchedulesList","factory","getClickedScheduleId","clicked","newName","currentName","isValidLength","checkCanUpdate","setLearners","setDisplayedLearners","setSearchPhrase","setSelectedLearner","setCanEditAndUpdate","FetchLearnersNotificationDiv","FetchNotificationDivFactory","filterLearners","phrase","processedPhrase","startsWith","updateUILearnerList","updatedLearnerIndex","newLearnersList","getUpdatedLearnerIndex","fetchLearners","selected","newSelectedLearner","onLogOutClicked","learnerApp","InstructorApp","isInstructorLoggedIn","setIsInstructorLoggedIn","App","createMuiTheme","typography","palette","main","secondary","AppControl","ThemeProvider","targetPage","currentApp","configureStore","reducer","learnerSchedulesReducer","learnerPbsReducer","dailyExercisesReducer","ReactDOM","render","StrictMode","store","getElementById"],"mappings":"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P,IAA+BM,EAAGC,KAwB3BP,EAGF,SAASW,EACd5B,EACAlB,EACA+C,GAGC,IAFDC,IAEA,yDADAjD,EACA,uDADa,KAGb,GAAImB,EAAQ,CAAC,IAAD,EACkBD,EAAUC,GAA9BK,EADE,EACFA,KAAMS,EADJ,EACIA,UACRiB,EAAYhB,EAAcV,GAEhC,OAAIyB,EACK,CACLC,YACAjB,YACAe,eACA/C,gBAIK,CACLD,aACAgD,eACAf,YACAiB,aAKJ,MAAO,CACLlD,aACAgD,gBC3FC,SAASG,EAAmBC,EAAKC,GACtCA,EAAIC,OACFD,EAAIE,WAAU,SAACC,GAAD,OAAOA,IAAMJ,KAC3B,GCHG,IAAMK,EAAb,4GACwBC,GAChBA,GACF7L,eAAeG,QAAQ,cAAe0L,KAH5C,uCASI,IAAIC,EAAc9L,eAAeC,QAAQ,eAEzC,MAAoB,gBAAhB6L,EACK,wBAEW,aAAhBA,EACK,qBAEAA,IAjBb,yCAsBI,OAAO9L,eAAeI,WAAW,mBAtBrC,KCAM2L,EAAiB,CACrBC,OAAQ,CACN,SACA,eACA,cACA,mBACA,yBACA,+BACA,iCACA,oBACA,eACA,mBACA,qBACA,yBACA,gBACA,iBACA,iBACA,iBACA,cACA,kBACA,oBACA,2BACA,oBACA,oBACA,mDACA,oBACA,eACA,uBACA,0BACA,qCACA,sBACA,qBAEFC,MAAO,CACL,QACA,cACA,aACA,kBACA,yBACA,gCACA,mBACA,8BACA,cACA,kBACA,oBACA,wBACA,eACA,gBACA,aACA,iBACA,mBACA,0BACA,mBACA,oBACA,cACA,qBACA,sBACA,qBACA,4BAEFC,KAAM,CACJ,OACA,aACA,aACA,qBACA,2BAEFC,aAAc,CACZ,eACA,6BACA,2BACA,2BACA,kBAEFC,UAAW,CACT,aACA,mBACA,eACA,4BAEFC,WAAY,CAAC,cAAe,qBAC5BC,UAAW,CAAC,cACZC,SAAU,CACR,UACA,UACA,iBACA,SACA,YACA,cACA,YACA,wBACA,cACA,qBACA,OACA,uBACA,mBACA,iCACA,oBACA,yBACA,aACA,qBACA,wBACA,uBACA,0BAcJ,SAASC,EAAoB/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","file":"static/js/main.9bc83942.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.226e3c4c.jpg\";","import React, { useState, useEffect } from \"react\"\nimport { Link } from \"react-router-dom\"\nimport { HorizontalNavBar, DrawerNavBar } from \"./register\"\n\nfunction NavLink({ to, label }) {\n  return (\n    <Link to={to} className=\"nav-item\">\n      {label}\n    </Link>\n  )\n}\n\n//https://reactrouter.com/web/api/Redirect\nexport function NavBarControl({ links, onLogOut, onAppChange, pageTitle }) {\n  let navLinks\n\n  const [currentWidth, setCurrentWidth] = useState(window.innerWidth)\n\n  useEffect(() => {\n    function saveCurrentWidth() {\n      setCurrentWidth(window.innerWidth)\n    }\n\n    window.addEventListener(\"resize\", saveCurrentWidth)\n\n    return () => {\n      window.removeEventListener(\"resize\", saveCurrentWidth)\n    }\n  }, [currentWidth])\n\n  if (links.length === 1 && !links[0].component) {\n    navLinks = [\n      <span\n        className=\"nav-item\"\n        key={links[0].to}\n        onClick={onAppChange}\n        to={links[0].to}\n      >\n        {links[0].label}\n      </span>,\n    ]\n  } else {\n    navLinks = links\n      .filter(({ display }) => display === true)\n      .map(({ to, label }) => {\n        return to !== \"/logout\" ? (\n          <NavLink key={to} to={to} label={label} />\n        ) : (\n          //basically need to make a fake link here!\n          <span className=\"nav-item\" key={to} label={label} onClick={onLogOut}>\n            {label}\n          </span>\n        )\n      })\n  }\n\n  return (\n    <nav className=\"header index\">\n      <section>\n        {currentWidth <= 450 && links.length > 1 ? (\n          <DrawerNavBar\n            pageTitle={pageTitle}\n            navLinks={navLinks}\n            links={links}\n            onAppChange={onAppChange}\n            onLogOut={onLogOut}\n          />\n        ) : (\n          <HorizontalNavBar\n            pageTitle={pageTitle}\n            navLinks={navLinks}\n            links={links}\n            onAppChange={onAppChange}\n            onLogOut={onLogOut}\n          />\n        )}\n      </section>\n    </nav>\n  )\n}\n","import React from \"react\"\n\nexport function Footer() {\n  return (\n    <footer className=\"footer index\">\n      <div className=\"footer-text-wrapper\">\n        Otago Weightlifting 2020. All Rights Reserved\n      </div>\n    </footer>\n  )\n}\n","export class UserAuth {\n  static isAuthenticated() {\n    return sessionStorage.getItem(\"token\") !== null\n  }\n\n  static saveToken(token) {\n    sessionStorage.setItem(\"token\", token)\n  }\n\n  static getToken() {\n    return sessionStorage.getItem(\"token\")\n  }\n\n  static clearToken() {\n    sessionStorage.removeItem(\"token\")\n  }\n}\n","export function camelCaseToNormal(camelCaseStr) {\n  return camelCaseStr.split(\"\").reduce((str, char, index) => {\n    //first letter is uppercased and returned\n    if (index === 0) {\n      return char.toUpperCase()\n    }\n    //if a letter is uppercase, add a space in front\n    if (char === char.toUpperCase()) {\n      return str + \" \" + char\n    } else {\n      return str + char\n    }\n  }, \"\")\n}\n\n//async error handler decorator\nexport function catchAsync(asyncFunc, errorHandler = null) {\n  return async function (...args) {\n    try {\n      return await asyncFunc(...args)\n    } catch (error) {\n      errorHandler?.(error) ?? console.log(`Something went wrong: ${error}`)\n\n      if (error.toString().search(/AbortError/) !== -1) {\n        return { ok: false, payload: { message: `Server timeouts!` } }\n      } else if (error.toString().search(/NetworkError/) !== -1) {\n        return { ok: false, payload: { message: `Can't connect to Server!` } }\n      } else {\n        return { ok: false, payload: null }\n      }\n    }\n  }\n}\n\nexport function shallowEqual(obj1, obj2) {\n  return Object.entries(obj1).every(([obj1Key, obj1Value]) => {\n    return obj2.hasOwnProperty(obj1Key) && obj1Value === obj2[obj1Key]\n  })\n}\n\nexport const spinner = (function () {\n  function show(status) {\n    if (status === true) {\n      document.querySelector(\"#spinner\").style.display = \"block\"\n    } else {\n      document.querySelector(\"#spinner\").style.display = \"none\"\n    }\n  }\n  return { show }\n})()\n\nexport function safeSpinnerWrapper(func) {\n  return async function (...args) {\n    spinner.show(true)\n    const res = await catchAsync(func)(...args)\n    spinner.show(false)\n    return res\n  }\n}\n\nexport function capitalise(string) {\n  return string.substring(0, 1).toUpperCase() + string.substring(1)\n}\n\n//starting from 1!\nexport function range(length, gap = 1) {\n  return Array(length)\n    .fill()\n    .map((element, index) => index + gap)\n}\n","import { catchAsync } from \"../utils\"\nimport { UserAuth } from \"./auth\"\n\n//https://dmitripavlutin.com/javascript-fetch-async-await/\nexport class HttpServiceSingleton {\n  //TODO: these methods can be refactored into their own service class as well\n  constructor() {\n    //hide away implementation details from the client components\n    this.postInstructorCredentials = HttpServiceSingleton._fetchPostFactory(\n      \"instructor/login\"\n    )\n    //make sure that only an instance is created\n    this._instance = this\n    if (HttpServiceSingleton._instance) {\n      return this._instance\n    }\n  }\n\n  static BASE_URL = (function () {\n    const PROD = \"https://lifting-schedule-v2.herokuapp.com\"\n    const DEV = \"http://localhost:5000\"\n\n    return window.location.href.split(\".\").includes(\"herokuapp\") ? PROD : DEV\n  })()\n\n  static _makeUrl(resourceUrl) {\n    return `${this.BASE_URL}/${resourceUrl}`\n  }\n\n  //factory functions that makes use of closure\n  static _fetchPostFactory(resourceUrl, timeout = 10) {\n    const url = HttpServiceSingleton._makeUrl(resourceUrl)\n    return catchAsync(async function (payload) {\n      const options = {\n        method: \"POST\",\n        mode: \"cors\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify(payload),\n      }\n\n      if (UserAuth.isAuthenticated()) {\n        options.headers.Authorization = `Bearer ${UserAuth.getToken()}`\n      }\n\n      HttpServiceSingleton._setFetchTimeout(timeout, options)\n      return HttpServiceSingleton._makePayload(await fetch(url, options))\n    })\n  }\n\n  static _fetchPutFactory(resourceUrl, timeout = 10) {\n    const url = HttpServiceSingleton._makeUrl(resourceUrl)\n    return catchAsync(async function (payload = null) {\n      const options = {\n        method: \"PUT\",\n        mode: \"cors\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Authorization: `Bearer ${UserAuth.getToken()}`,\n        },\n      }\n\n      if (payload) {\n        options.body = JSON.stringify(payload)\n      }\n\n      HttpServiceSingleton._setFetchTimeout(timeout, options)\n\n      return HttpServiceSingleton._makePayload(await fetch(url, options))\n    })\n  }\n\n  static _fetchJsonFactory(resourceUrl, timeout = 10) {\n    const url = HttpServiceSingleton._makeUrl(resourceUrl)\n    return catchAsync(async function () {\n      const options = {\n        headers: {\n          Authorization: `Bearer ${UserAuth.getToken()}`,\n        },\n      }\n\n      HttpServiceSingleton._setFetchTimeout(timeout, options)\n\n      return HttpServiceSingleton._makePayload(await fetch(url, options))\n    })\n  }\n\n  static _fetchDeleteFactory(resourceUrlAndId, timeout = 10) {\n    const url = HttpServiceSingleton._makeUrl(resourceUrlAndId)\n    return catchAsync(async function () {\n      const options = {\n        method: \"DELETE\",\n        mode: \"cors\",\n        headers: {\n          Authorization: `Bearer ${UserAuth.getToken()}`,\n        },\n      }\n\n      HttpServiceSingleton._setFetchTimeout(timeout, options)\n\n      return HttpServiceSingleton._makePayload(await fetch(url, options))\n    })\n  }\n\n  static _setFetchTimeout(timeout, options) {\n    const ctl = new AbortController()\n    setTimeout(() => ctl.abort(), timeout * 1000)\n    options.signal = ctl.signal\n  }\n\n  static async _makePayload(response) {\n    if (!response) {\n      return { ok: false, payload: null }\n    }\n\n    const ok = response.ok\n\n    //FIXME: may need to switch based on status code!\n    switch (response.status) {\n      case 204:\n        console.log(\"No Content\")\n        return { ok, payload: null }\n      default:\n        break\n    }\n    const payload = await response.json()\n    console.log({ ok, payload })\n    return { ok, payload: payload ? payload : null }\n  }\n\n  //FIXME: how to implement retry?\n  static _retryFetch(asyncFetchFunc) {\n    setInterval(async () => {\n      console.log(\"Refetching ...\")\n      return catchAsync(asyncFetchFunc())\n    }, 5000)\n  }\n\n  static getInstance() {\n    return HttpServiceSingleton._instance || new HttpServiceSingleton()\n  }\n}\n\n//only export an instance (singleton)\nexport default HttpServiceSingleton.getInstance()\n","function isNotEmpty(str) {\n  return str && str.trim().length > 0\n}\n\nfunction isValidEmail(email) {\n  const pattern = /^([\\w_-]+|[\\w_-]+(.[\\w_-]+)+?)@([\\w_-]+|[\\w_-]+(.[\\w_-]+)+?)$/\n  return email && pattern.test(email)\n}\n\nexport function validateInstructorCredentials({ email, password }) {\n  if (isNotEmpty(email) && isNotEmpty(password)) {\n    return isValidEmail(email) ? null : \"Invalid email\"\n  } else {\n    return \"Missing Email or Password\"\n  }\n}\n\nexport function validateLearnerCredentials({ username, password }) {\n  return isNotEmpty(username) && isNotEmpty(password)\n    ? null\n    : \"Missing Email or Password\"\n}\n","import { HttpServiceSingleton } from \"./http\"\nimport { safeSpinnerWrapper } from \"../utils\"\n\nexport class InstructorServiceSingleton extends HttpServiceSingleton {\n  constructor() {\n    super()\n    this.instructorLogin = safeSpinnerWrapper(this.instructorLogin)\n    this._instance = this\n    if (InstructorServiceSingleton._instance) {\n      return this._instance\n    }\n  }\n\n  static getInstructorInstance() {\n    return (\n      InstructorServiceSingleton._instance || new InstructorServiceSingleton()\n    )\n  }\n\n  async instructorLogin(credentials) {\n    return await InstructorServiceSingleton._fetchPostFactory(\n      \"instructor/login\"\n    )(credentials)\n  }\n}\n\nexport default InstructorServiceSingleton.getInstructorInstance()\n","import { HttpServiceSingleton } from \"./http\"\nimport { safeSpinnerWrapper } from \"../utils\"\n\nexport class LearnerServiceSingleton extends HttpServiceSingleton {\n  constructor() {\n    super()\n    console.log(\"New LearnerServiceSingleton!\")\n    this.updateLearner = safeSpinnerWrapper(this.updateLearner)\n    this.deleteLearner = safeSpinnerWrapper(this.deleteLearner)\n    this.createLearner = safeSpinnerWrapper(this.createLearner)\n    this.learnerLogin = safeSpinnerWrapper(this.learnerLogin)\n    this.updateLearnerPbs = safeSpinnerWrapper(this.updateLearnerPbs)\n    this.createNewPracticeBest = safeSpinnerWrapper(this.createNewPracticeBest)\n    this.updatePracticeBest = safeSpinnerWrapper(this.updatePracticeBest)\n\n    this.getPracticeBestsByExerciseName = safeSpinnerWrapper(\n      this.getPracticeBestsByExerciseName\n    )\n\n    this._instance = this\n\n    if (LearnerServiceSingleton._instance) {\n      return this._instance\n    }\n  }\n\n  async fetchLearners() {\n    console.log(`Fetching Learners`)\n    return await LearnerServiceSingleton._fetchJsonFactory(\"learners\")()\n  }\n\n  async updateLearner(selectedLearner) {\n    console.log(`Sending ${JSON.stringify(selectedLearner)}`)\n    return await LearnerServiceSingleton._fetchPutFactory(\"learners/details\")({\n      learner: selectedLearner,\n    })\n  }\n\n  async deleteLearner(learnerId) {\n    console.log(\"Delete learner id \", learnerId)\n    return await LearnerServiceSingleton._fetchDeleteFactory(\n      `learners/${learnerId}`\n    )()\n  }\n\n  async createLearner(learner) {\n    console.log(`Sending new learner ${JSON.stringify(learner)}`)\n    return await LearnerServiceSingleton._fetchPostFactory(\"learners\")({\n      learner: learner,\n    })\n  }\n\n  async learnerLogin(credentials) {\n    return await LearnerServiceSingleton._fetchPostFactory(\"learners/login\")(\n      credentials\n    )\n  }\n\n  //expected payload: {firstName, lastName, email, programmeId}\n  async learnerSignup(signupInfo) {\n    return await LearnerServiceSingleton._fetchPostFactory(\"learners/signup\")(\n      signupInfo\n    )\n  }\n\n  //pbs => {exerciseName: number, ...}\n  async updateLearnerPbs(pbs) {\n    return await LearnerServiceSingleton._fetchPutFactory(\"learners/pbs\")({\n      newPbs: pbs,\n    })\n  }\n\n  async createNewPracticeBest(exerciseName, repMax, weight) {\n    return await LearnerServiceSingleton._fetchPostFactory(\n      \"learners/practice.bests\"\n    )({ exerciseName, repMax, weight })\n  }\n\n  async getPracticeBestsByExerciseName(learnerId, exerciseName) {\n    return await LearnerServiceSingleton._fetchJsonFactory(\n      `learners/${learnerId}/practice.bests/${encodeURI(exerciseName)}`\n    )()\n  }\n\n  async updatePracticeBest(pbId, weight) {\n    return await LearnerServiceSingleton._fetchPutFactory(\n      \"learners/practice.bests\"\n    )({ pbId, weight })\n  }\n\n  static getLearnerInstance() {\n    return LearnerServiceSingleton._instance || new LearnerServiceSingleton()\n  }\n}\n\nexport default LearnerServiceSingleton.getLearnerInstance()\n","import { HttpServiceSingleton } from \"./http\"\nimport { safeSpinnerWrapper } from \"../utils\"\n\nexport class ProgrammeServiceSingleton extends HttpServiceSingleton {\n  constructor() {\n    super()\n    console.log(\"I was created!\")\n    //TODO: have all components use hooks to move wrapper there\n    this.fetchProgrammes = safeSpinnerWrapper(this.fetchProgrammes)\n    this.fetchSchedules = safeSpinnerWrapper(this.fetchSchedules)\n    this.fetchScheduleInfo = safeSpinnerWrapper(this.fetchScheduleInfo)\n    this.deleteSchedule = safeSpinnerWrapper(this.deleteSchedule)\n    this.publishSchedule = safeSpinnerWrapper(this.publishSchedule)\n    this.unpublishSchedule = safeSpinnerWrapper(this.unpublishSchedule)\n    this.repostSchedule = safeSpinnerWrapper(this.repostSchedule)\n    this.postNewSchedule = safeSpinnerWrapper(this.postNewSchedule)\n    this.fetchExercises = safeSpinnerWrapper(this.fetchExercises)\n    this.fetchExerciseNames = safeSpinnerWrapper(this.fetchExerciseNames)\n    this.getAvailableProgrammesToPublish = safeSpinnerWrapper(\n      this.getAvailableProgrammesToPublish\n    )\n\n    this._instance = this\n    if (ProgrammeServiceSingleton._instance) {\n      return this._instance\n    }\n  }\n\n  //programmes (for signup)\n  async fetchProgrammes() {\n    return await ProgrammeServiceSingleton._fetchJsonFactory(\"programmes\")()\n  }\n\n  async createProgramme() {}\n  async updateProgramme() {}\n\n  //schedules\n  async fetchSchedules() {\n    return await ProgrammeServiceSingleton._fetchJsonFactory(\n      \"programmes/schedules\"\n    )()\n  }\n\n  async deleteSchedule(scheduleId) {\n    return await ProgrammeServiceSingleton._fetchDeleteFactory(\n      `programmes/schedules/${scheduleId}`\n    )()\n  }\n\n  async postNewSchedule(payload) {\n    return await ProgrammeServiceSingleton._fetchPostFactory(\n      \"programmes/schedules\"\n    )(payload)\n  }\n\n  async repostSchedule(payload) {\n    return await ProgrammeServiceSingleton._fetchPutFactory(\n      \"programmes/schedules\"\n    )(payload)\n  }\n\n  async fetchScheduleInfo() {\n    return await ProgrammeServiceSingleton._fetchJsonFactory(\n      \"programmes/schedules/info\"\n    )()\n  }\n  //schedule and programme\n  async getAvailableProgrammesToPublish(scheduleId) {\n    return await ProgrammeServiceSingleton._fetchJsonFactory(\n      `programmes/schedules/${scheduleId}/publish/available.programmes`\n    )()\n  }\n\n  //TODO: can use req.params as well no need to serialize\n  async publishSchedule(scheduleId, programmeIds) {\n    return await ProgrammeServiceSingleton._fetchPostFactory(\n      `programmes/schedules/${scheduleId}/publish`\n    )({ programmeIds })\n  }\n\n  async unpublishSchedule(scheduleId, programmeId) {\n    console.log(programmeId)\n    return await ProgrammeServiceSingleton._fetchDeleteFactory(\n      `programmes/schedules/${scheduleId}/unpublish/${programmeId}`\n    )()\n  }\n\n  //fetch weekly schedules {scheduleId, week}\n  async fetchExercises(scheduleId, week) {\n    return await ProgrammeServiceSingleton._fetchJsonFactory(\n      `programmes/schedules/${scheduleId}/weeks/${week}`\n    )()\n  }\n\n  //fetch weekly schedules {scheduleId, week}\n  async fetchExerciseNames() {\n    return await ProgrammeServiceSingleton._fetchJsonFactory(\n      `programmes/exercises`\n    )()\n  }\n\n  static getProgrammeInstance() {\n    return (\n      ProgrammeServiceSingleton._instance || new ProgrammeServiceSingleton()\n    )\n  }\n}\n\nexport default ProgrammeServiceSingleton.getProgrammeInstance()\n","export function fileReaderPromise(file) {\n  return new Promise((resolve, reject) => {\n    let r = new FileReader()\n    r.onload = (e) => resolve(e.target.result)\n    r.onerror = reject\n    r.readAsArrayBuffer(file)\n  })\n}\n","import XLSX from \"xlsx\"\n\nfunction parseRows(buffer) {\n  const workbook = XLSX.read(buffer, {\n    type: \"buffer\",\n  })\n\n  const rows = []\n\n  workbook.SheetNames.forEach(function (sheetName) {\n    //which is actually an array of rows\n    const XL_row_object = XLSX.utils.sheet_to_json(workbook.Sheets[sheetName])\n    rows.push(...XL_row_object)\n  })\n\n  return { rows, weekCount: workbook.SheetNames.length }\n}\n\nfunction makeTimeTable(exercisesArr) {\n  const aggregate = {}\n\n  function getWeekDayPair(exercisesArr) {\n    let prevPair = [0, 0]\n    return exercisesArr.reduce((pairs, { week, day }) => {\n      if (prevPair[0] !== week || prevPair[1] !== day) {\n        prevPair = [week, day]\n        pairs.push([week, day])\n      }\n      return pairs\n    }, [])\n  }\n\n  function extractDailyExercises(w, d) {\n    exercisesArr\n      .filter(({ week, day }) => week === w && day === d)\n      .reduce((acc, { exerciseName, instruction }) => {\n        //initialise prop week if not exist\n        if (acc[`week ${w}`] === undefined) {\n          acc[`week ${w}`] = {}\n        }\n\n        //initialise prop day of week if not exist\n        if (acc[`week ${w}`][`day ${d}`] === undefined) {\n          acc[`week ${w}`][`day ${d}`] = []\n        }\n\n        //push obj to proper week and day\n        acc[`week ${w}`][`day ${d}`].push({ exerciseName, instruction })\n\n        return acc\n      }, aggregate)\n  }\n\n  getWeekDayPair(exercisesArr).forEach((dayInWeek) =>\n    extractDailyExercises(dayInWeek[0], dayInWeek[1])\n  )\n  return aggregate\n}\n\nexport function makeSchedulePayload(\n  buffer,\n  programmeIds,\n  scheduleName,\n  isNew = true,\n  scheduleId = null\n) {\n  //if a file is uploaded\n  if (buffer) {\n    const { rows, weekCount } = parseRows(buffer)\n    const timetable = makeTimeTable(rows)\n    //a new schedule\n    if (isNew) {\n      return {\n        timetable,\n        weekCount,\n        scheduleName,\n        programmeIds,\n      }\n      //reposting the schedule\n    } else {\n      return {\n        scheduleId,\n        scheduleName,\n        weekCount,\n        timetable,\n      }\n    }\n    //if no file is uploaded, meaning there's a name change\n  } else {\n    return {\n      scheduleId,\n      scheduleName,\n    }\n  }\n}\n","export function findIndexAndDelete(val, arr) {\n  arr.splice(\n    arr.findIndex((v) => v === val),\n    1\n  )\n}\n","export class NavHelpers {\n  static setCurrentPage(page) {\n    if (page) {\n      sessionStorage.setItem(\"currentPage\", page)\n      return\n    }\n  }\n\n  static getCurrentPage() {\n    let currentPage = sessionStorage.getItem(\"currentPage\")\n    //redirects from login page if authenticated\n    if (currentPage === \"/instructor\") {\n      return \"/instructor/schedules\"\n    }\n    if (currentPage === \"/learner\") {\n      return \"/learner/schedules\"\n    } else {\n      return currentPage\n    }\n  }\n\n  static clearCurrentPage() {\n    return sessionStorage.removeItem(\"currentPage\")\n  }\n}\n","const pbsToExercises = {\n  snatch: [\n    \"Snatch\",\n    \"Power Snatch\",\n    \"Hang Snatch\",\n    \"High Hang Snatch\",\n    \"Hang Snatch Below Knee\",\n    \"Hang Power Snatch Below Knee\",\n    \"Hang Snatch Just Off the Floor\",\n    \"Hang Power Snatch\",\n    \"Block Snatch\",\n    \"Low Block Snatch\",\n    \"Block Power Snatch\",\n    \"Low Block Power Snatch\",\n    \"Muscle Snatch\",\n    \"Deficit Snatch\",\n    \"Snatch Balance\",\n    \"Overhead Squat\",\n    \"Snatch Pull\",\n    \"Snatch Deadlift\",\n    \"Block Snatch Pull\",\n    \"Snatch Romanian Deadlift\",\n    \"Snatch Push Press\",\n    \"3 Position Snatch\",\n    \"3 position snatch (High Hang, Below Knee, Floor)\",\n    \"2 Position Snatch\",\n    \"Pause Snatch\",\n    \"Snatch Pull + Snatch\",\n    \"Snatch + Overhead Squat\",\n    \"Snatch Push Press + Overhead Squat\",\n    \"Deficit Snatch Pull\",\n    \"Snatch Panda Pull\",\n  ],\n  clean: [\n    \"Clean\",\n    \"Power Clean\",\n    \"Hang Clean\",\n    \"High Hang Clean\",\n    \"Hang Snatch Below Knee\",\n    \"Hang Clean Just Off the Floor\",\n    \"Hang Power Clean\",\n    \"Hang Power Clean Below Knee\",\n    \"Block Clean\",\n    \"Low Block Clean\",\n    \"Block Power Clean\",\n    \"Low Block Power Clean\",\n    \"Muscle Clean\",\n    \"Deficit Clean\",\n    \"Clean Pull\",\n    \"Clean Deadlift\",\n    \"Block Clean Pull\",\n    \"Clean Romanian Deadlift\",\n    \"3 Position Clean\",\n    \"2 Position Snatch\",\n    \"Pause Clean\",\n    \"Clean Pull + Clean\",\n    \"Clean + Front Squat\",\n    \"Deficit Clean Pull\",\n    \"Power Clean + Push Press\",\n  ],\n  jerk: [\n    \"Jerk\",\n    \"Split Jerk\",\n    \"Power Jerk\",\n    \"Front Squat + Jerk\",\n    \"Power Jerk + Split Jerk\", //FIXME: how to deal with \"+\", some exercises are combos, some are not on the standard list. Maybe he should be able to update the list/add remove items from the list\n  ],\n  cleanAndJerk: [\n    \"Clean + Jerk\",\n    \"Clean + Front Squat + Jerk\",\n    \"Power Clean + Split Jerk\",\n    \"Power Clean + Power Jerk\",\n    \"Clean and Jerk\",\n  ],\n  backSquat: [\n    \"Back Squat\",\n    \"Pause Back Squat\",\n    \"Good Morning\",\n    \"Barbell Back Squat Jumps\",\n  ],\n  frontSquat: [\"Front Squat\", \"Pause Front Squat\"],\n  pushPress: [\"Push Press\"],\n  RPEorRIR: [\n    \"Pushups\",\n    \"Pullups\",\n    \"Back Extension\",\n    \"Situps\",\n    \"Cable Row\",\n    \"Bench Press\",\n    \"Box Jumps\",\n    \"Bent Over Barbell Row\",\n    \"Pendlay Row\",\n    \"Barbell Bicep Curl\",\n    \"Dips\",\n    \"Barbell Strict Press\",\n    \"Lu Xiaojun Raise\",\n    \"Bent Over Plate Rear Delt Flye\",\n    \"Abs (your choice)\",\n    \"Hanging Knee/Leg Raise\",\n    \"Calf Raise\",\n    \"1-Arm Dumbbell Row\",\n    \"Bulgarian Split Squat\",\n    \"Seated Barbell Press\",\n    \"Seated Dumbbell Press\",\n  ],\n}\n\nfunction getMatchedPbValue(exerciseName, pbs) {\n  const matchedPb = Object.keys(pbsToExercises).filter((k) => {\n    //console.log(exercise)\n    return pbsToExercises[k]\n      .map((exerciseName) => exerciseName.toLowerCase())\n      .includes(exerciseName.toLowerCase().replace(\"optional: \", \"\"))\n  })[0]\n  return pbs[matchedPb]\n}\n\nfunction calculateRealWeight(str, pb) {\n  function parsePercent(str, pb) {\n    const elements = str.split(\"-\").filter((str) => str !== \"\")\n    const result = elements\n      .map((str) => {\n        const percent = Math.abs(parseInt(str))\n        return ((percent * pb) / 100).toFixed() + \"kg\"\n      })\n      .join(\"-\")\n    return `${result} (${str})`\n  }\n\n  const result = str\n    .split(\" \")\n    .map((part) => {\n      if (part.indexOf(\"%\") > -1) {\n        return parsePercent(part, pb)\n      } else {\n        return part\n      }\n    })\n    .join(\" \")\n\n  return result\n}\n\nexport function processInstruction({ exerciseName, instruction }, pbs) {\n  const matchedPbValue = getMatchedPbValue(exerciseName, pbs)\n  //convert to % if there's a matched PB, otherwise return the instruction\n  return matchedPbValue\n    ? calculateRealWeight(instruction, matchedPbValue)\n    : instruction\n}\n","import React from \"react\"\n// import { ProtectedRoute } from \"./register\"\nimport { Route, Redirect, Switch } from \"react-router-dom\"\nimport { NavHelpers } from \"../services/register\"\n\n//isProtected ? <ProtectedRoute {...props} /> :\n\n// function PageRoute({ isProtected, ...props }) {\n//   return <Route {...props} />\n// }\n\nexport function PageRoutes({ links }) {\n  const routes = links.map(({ to, component }) => {\n    return <Route key={to} exact path={to} component={component} />\n  })\n\n  return (\n    <Switch>\n      {routes}\n      <Redirect\n        to={\n          NavHelpers.getCurrentPage()\n            ? NavHelpers.getCurrentPage()\n            : \"/learner/login\"\n        }\n      />\n    </Switch>\n  )\n}\n","import React, { useState } from \"react\"\nimport {\n  Drawer,\n  IconButton,\n  Divider,\n  List,\n  ListItem,\n  ListItemText,\n  ListItemIcon,\n} from \"@material-ui/core\"\nimport { Menu } from \"@material-ui/icons\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport { Link } from \"react-router-dom\"\n\nconst useStyles = makeStyles(() => ({\n  btn: {\n    padding: \"0 0.25rem\",\n    color: \"var(--txt-cl)\",\n    boxShadow: \"none\",\n    borderRadius: \"0\",\n    flex: \"0\",\n    border: \"none\",\n  },\n  drawer: {\n    width: \"max-content\",\n  },\n  drawerPaper: {\n    background: \"var(--secondary-cl)\",\n    width: \"70vw\",\n  },\n  navList: {\n    paddingTop: 0,\n  },\n  navItem: {\n    \"& :hover\": {\n      color: \"var(--txt-cl)\",\n    },\n    \"& :focus\": {\n      color: \"var(--txt-cl)\",\n    },\n  },\n  navItemText: {\n    fontSize: \"0.75rem\",\n  },\n}))\n\nexport function DrawerLinks({ links, onLogOut }) {\n  const [open, setOpen] = useState(false)\n\n  function toggleDrawer(state) {\n    setOpen(state)\n  }\n\n  const classes = useStyles()\n\n  const navLinks = links\n    .filter(({ display }) => display === true)\n    .map(({ to, label, icon }) => {\n      const Icon = icon\n      return to !== \"/logout\" ? (\n        <React.Fragment key={to}>\n          {\" \"}\n          <Divider />\n          <ListItem\n            button\n            component={Link}\n            to={to}\n            onClick={() => toggleDrawer(false)}\n            className={classes.navItem}\n          >\n            <ListItemIcon>\n              <Icon />\n            </ListItemIcon>\n            <ListItemText\n              primary={label}\n              classes={{ primary: classes.navItemText }}\n            />\n          </ListItem>\n        </React.Fragment>\n      ) : (\n        //basically need to make a fake link here!\n        <React.Fragment key={to}>\n          <Divider />\n          <ListItem button className={classes.navItem}>\n            <ListItemIcon>\n              <Icon />\n            </ListItemIcon>\n            <ListItemText\n              primary={label}\n              onClick={onLogOut}\n              classes={{ primary: classes.navItemText }}\n            />\n          </ListItem>\n          <Divider />\n        </React.Fragment>\n      )\n    })\n\n  return (\n    <>\n      <IconButton className={classes.btn} onClick={() => toggleDrawer(true)}>\n        <Menu />\n      </IconButton>\n      <Drawer\n        className={classes.drawer}\n        anchor=\"left\"\n        open={open}\n        onClose={() => toggleDrawer(false)}\n        classes={{\n          paper: classes.drawerPaper,\n        }}\n      >\n        <List className={classes.navList}>{navLinks}</List>\n      </Drawer>\n    </>\n  )\n}\n","import React from \"react\"\nimport { Grid } from \"@material-ui/core\"\nimport { DrawerLinks } from \"./DrawerLinks\"\nimport { makeStyles } from \"@material-ui/core/styles\"\n\nconst useStyles = makeStyles(() => ({\n  wrapper: {\n    padding: \"0 0.25rem\",\n  },\n  title: {\n    fontWeight: \"var(--fw-lg)\",\n    fontSize: \"calc(0.35 * var(--fs-md))\",\n  },\n}))\n\nexport function DrawerNavBar({ pageTitle, links, onLogOut }) {\n  const classes = useStyles()\n\n  return (\n    <header>\n      <Grid container className={classes.wrapper}>\n        <Grid item className=\"navLinks\" xs={1}>\n          <DrawerLinks links={links} onLogOut={onLogOut} />\n        </Grid>\n        <Grid item xs={11}>\n          <h1 className={classes.title}>{pageTitle}</h1>\n        </Grid>\n      </Grid>\n    </header>\n  )\n}\n","import React from \"react\"\nimport { Link } from \"react-router-dom\"\n\nexport function HorizontalNavBar({ pageTitle, links, onAppChange, onLogOut }) {\n  let navLinks\n\n  if (links.length === 1 && !links[0].component) {\n    navLinks = [\n      <span\n        className=\"nav-item\"\n        key={links[0].to}\n        onClick={onAppChange}\n        to={links[0].to}\n      >\n        {links[0].label}\n      </span>,\n    ]\n  } else {\n    navLinks = links\n      .filter(({ display }) => display === true)\n      .map(({ to, label }) => {\n        return to !== \"/logout\" ? (\n          <Link key={to} to={to} className=\"nav-item\">\n            {label}\n          </Link>\n        ) : (\n          //basically need to make a fake link here!\n          <span className=\"nav-item\" key={to} label={label} onClick={onLogOut}>\n            {label}\n          </span>\n        )\n      })\n  }\n\n  return (\n    <div className=\"navContent\">\n      <header>\n        <h1\n          style={{\n            fontWeight: \"var(--fw-lg)\",\n            fontSize: \"calc(0.35 * var(--fs-md))\",\n          }}\n        >\n          {pageTitle}\n        </h1>\n        <div className=\"navLinks\">{navLinks}</div>\n      </header>\n    </div>\n  )\n}\n","import React from \"react\"\nimport { Grid, Button } from \"@material-ui/core\"\nimport { useHistory } from \"react-router-dom\"\n\nexport function FetchNotificationDivFactory(\n  resourceName = null,\n  postFetchAction = null\n) {\n  return function ({ isFetchSuccess, ...props }) {\n    //NOTE: a factory function for customizing a notification div based on the kind of payload\n    switch (isFetchSuccess) {\n      default:\n        return (\n          <div {...props} style={{ color: \"var(--bg-cl)\" }}>\n            Loading {resourceName ? resourceName : \"data\"} ...\n          </div>\n        )\n      case true:\n        return (\n          <div {...props} style={{ color: \"green\" }}>\n            {postFetchAction ? postFetchAction : \"Finished loading data!\"}\n          </div>\n        )\n      case false:\n        return (\n          <div {...props} style={{ color: \"red\" }}>\n            Failed to load {resourceName ? resourceName : \"data\"}\n          </div>\n        )\n    }\n  }\n}\n\nexport function CustomGridFactory({ sizes, ...rest }) {\n  return (\n    <Grid item {...sizes}>\n      {rest}\n    </Grid>\n  )\n}\n\nexport function LinkButton({ to, label, ...rest }) {\n  const history = useHistory()\n  return (\n    <Button onClick={() => history.push(to)} {...rest}>\n      {label}\n    </Button>\n  )\n}\n","import React from \"react\"\nimport {\n  CheckCircleOutlineRounded,\n  ErrorOutlineRounded,\n} from \"@material-ui/icons\"\n\nexport const ActionNotificationDiv = React.memo(\n  ({ actionStatus, onCloseActionStatusDiv }) => {\n    const { action, isActionSuccess } = actionStatus\n\n    let message = \"Action Status\"\n    let color = \"\"\n    let background = \"\"\n    let visibility = \"\"\n\n    if (!action) {\n      visibility = \"hidden\"\n    } else {\n      switch (isActionSuccess) {\n        default:\n          message = `Applying ${action.toUpperCase()} ...`\n          background = \"yellow\"\n          color = \"#111\"\n          break\n        case true:\n          message = `${action.toUpperCase()} Successful!`\n          color = \"green\"\n          background = \"rgb(107, 236, 172)\"\n          break\n        case false:\n          message = `${action.toUpperCase()} Failed!`\n          color = \"red\"\n          background = \"rgb(241, 162, 142)\"\n          break\n      }\n    }\n\n    return (\n      <div\n        className=\"action-status-div\"\n        style={{\n          visibility: visibility,\n          color,\n          fontWeight: \"600\",\n          background,\n        }}\n      >\n        {isActionSuccess ? (\n          <CheckCircleOutlineRounded />\n        ) : (\n          <ErrorOutlineRounded />\n        )}\n        <span>{message}</span>\n        <span className=\"action-status-close\" onClick={onCloseActionStatusDiv}>\n          X\n        </span>\n      </div>\n    )\n  }\n)\n","import React from \"react\"\n\nexport function LearnerNameList({ learners, onLearnerItemClicked }) {\n  const learnerItems = learners.map(({ learnerId, firstName, lastName }) => {\n    return (\n      <li\n        className=\"learner-name\"\n        key={learnerId} //this cannot be retrieved from getAttribute! need to be spelled lowercase\n        learnerid={learnerId}\n        onClick={onLearnerItemClicked}\n      >{`${firstName} ${lastName}`}</li>\n    )\n  })\n\n  return (\n    <ul>\n      {learners.length === 0 ? (\n        <li className=\"learner-name\">No Learner Found!</li>\n      ) : (\n        learnerItems\n      )}\n    </ul>\n  )\n}\n","import React from \"react\"\nimport { Edit, Delete, Save } from \"@material-ui/icons\"\n\nimport { camelCaseToNormal } from \"../../utils\"\n\nfunction PersonalBestInput({ label, ...props }) {\n  return (\n    <div className=\"pbs-field\">\n      <label htmlFor={props.id || props.name}>{camelCaseToNormal(label)}</label>\n      <input className=\"text-input\" {...props} />\n    </div>\n  )\n}\n\nexport function PersonalBestsForm({\n  selectedLearner = {},\n  onPersonalBestsInputChange,\n  onUpdatePersonalBests,\n  enableEditAndUpdate,\n  canEditAndUpdate,\n  onDeleteLearner,\n}) {\n  //it does changes, but doesn't show on the UI\n  const inputs = Object.keys(selectedLearner).map((fieldName) => {\n    if (fieldName === \"learnerId\") return null\n    return (\n      <PersonalBestInput\n        label={fieldName}\n        name={fieldName}\n        type=\"text\"\n        key={fieldName}\n        value={selectedLearner[fieldName]}\n        onChange={onPersonalBestsInputChange}\n        readOnly={!canEditAndUpdate}\n        style={{ opacity: canEditAndUpdate ? \"1\" : \"0.75\" }}\n      />\n    )\n  })\n\n  //use modal then\n  return (\n    <div className=\"pbs-form-wrapper\">\n      <h3 style={{ textTransform: \"capitalize\" }}>\n        {selectedLearner.firstName}\n      </h3>\n      <form readOnly={!canEditAndUpdate} onDoubleClick={enableEditAndUpdate}>\n        {inputs}\n      </form>\n      <div className=\"pbs-form-btn-wrapper\">\n        <button className=\"pbs-btn\" onClick={enableEditAndUpdate}>\n          <Edit className=\"pbs-btn-icon\" />\n          {!canEditAndUpdate ? \"Enable Edit \" : \"Disable Edit \"}\n        </button>\n        <button\n          className=\"pbs-btn\"\n          onClick={onUpdatePersonalBests}\n          disabled={!canEditAndUpdate}\n        >\n          <Save className=\"pbs-btn-icon\" />\n          {\"Save \"}\n        </button>\n        <button\n          className=\"pbs-btn\"\n          onClick={onDeleteLearner}\n          disabled={!canEditAndUpdate}\n        >\n          <Delete className=\"pbs-btn-icon\" />\n          {\"Delete \"}\n        </button>\n      </div>\n    </div>\n  )\n}\n","import React from \"react\"\nimport { LearnerNameList } from \"./register\"\n\nexport function LearnerSearchInput({\n  searchPhrase,\n  onSearchPhraseChanged,\n  learners,\n  displayedLearners,\n  onLearnerItemClicked,\n}) {\n  return (\n    <div className=\"learnerListPanel\" style={{ display: \"flex\" }}>\n      <div\n        className=\"searchInputWrapper\"\n        style={{ display: \"flex\", flexDirection: \"column\" }}\n      >\n        <input\n          className=\"learnerSearchInput\"\n          value={searchPhrase}\n          onChange={onSearchPhraseChanged}\n          placeholder={\n            learners.length === 0 ? \"No Learners Added Yet\" : \"Type to Filter\"\n          }\n          disabled={learners.length === 0 ? true : false}\n        />\n      </div>\n      <div className=\"learnerNameList\">\n        {learners.length === 0 ? (\n          <ul>\n            <li className=\"learner-name\">No Learners Added Yet</li>\n          </ul>\n        ) : (\n          <LearnerNameList\n            learners={displayedLearners}\n            onLearnerItemClicked={onLearnerItemClicked}\n          />\n        )}\n      </div>\n    </div>\n  )\n}\n","import { createSlice } from \"@reduxjs/toolkit\"\n\nconst initialState = {\n  schedules: [\n    {\n      scheduleId: 12,\n      scheduleName: \"October 2020 Peaking Cycle\",\n      weekCount: 6,\n      programmeName: \"Youth and Junior\",\n    },\n    {\n      scheduleId: 6,\n      scheduleName: \"September 2020 Strength\",\n      weekCount: 5,\n      programmeName: \"Youth and Junior\",\n    },\n  ],\n}\n\nexport const learnerSchedulesSlice = createSlice({\n  name: \"learnerschedules\",\n  initialState,\n  reducers: {\n    initSchedules: (state, action) => {\n      state.schedules = [...action.payload]\n    },\n  },\n})\n\n//selector\nexport const selectLearnerSchedules = (state) =>\n  state.learnerSchedules.schedules\n\n//action type\nexport const { initSchedules } = learnerSchedulesSlice.actions\n\n//reducer to register with global store\nexport default learnerSchedulesSlice.reducer\n","import React from \"react\"\nimport {\n  FormControl,\n  Typography,\n  InputLabel,\n  Select,\n  MenuItem,\n} from \"@material-ui/core\"\nimport { makeStyles } from \"@material-ui/core/styles\"\n\nconst useStyles = makeStyles((theme) => ({\n  formControl: {\n    margin: theme.spacing(1),\n    maxWidth: \"100%\",\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2),\n  },\n  label: {\n    fontWeight: \"var(--fw-md)\",\n  },\n}))\n\nexport function ScheduleOptions({\n  schedules,\n  onScheduleChecked,\n  label,\n  selectedSchedule,\n}) {\n  const classes = useStyles()\n\n  if (!schedules)\n    return <Typography component=\"p\">No Cycle Available</Typography>\n\n  const items = schedules.map(({ scheduleName, scheduleId }) => {\n    return (\n      <MenuItem value={scheduleId} key={scheduleId}>\n        {scheduleName}\n      </MenuItem>\n    )\n  })\n\n  return (\n    <FormControl component=\"fieldset\" className={classes.formControl}>\n      <InputLabel id=\"cycle\" className={classes.label}>\n        {label}\n      </InputLabel>\n      <Select value={selectedSchedule.scheduleId} onChange={onScheduleChecked}>\n        {items}\n      </Select>\n    </FormControl>\n  )\n}\n","import React from \"react\"\nimport { FormControl, InputLabel, Select, MenuItem } from \"@material-ui/core\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport { range } from \"../../utils\"\n\nconst useStyles = makeStyles((theme) => ({\n  formControl: {\n    margin: theme.spacing(1),\n    maxWidth: \"100%\",\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2),\n  },\n}))\n\nexport function WeekOptions({\n  selectedSchedule,\n  onWeekSelected,\n  selectedWeek,\n  label,\n}) {\n  const classes = useStyles()\n\n  if (!selectedSchedule) return null\n\n  const items = range(selectedSchedule.weekCount).map((v) => {\n    return (\n      <MenuItem value={v} key={v}>\n        {v}\n      </MenuItem>\n    )\n  })\n\n  return (\n    <FormControl component=\"fieldset\" className={classes.formControl}>\n      <InputLabel id=\"week\">{label}</InputLabel>\n      <Select value={selectedWeek} onChange={onWeekSelected}>\n        {items}\n      </Select>\n    </FormControl>\n  )\n}\n","import { createSlice } from \"@reduxjs/toolkit\"\n\nconst initialState = {\n  pbs: {\n    backSquat: 100,\n    clean: 100,\n    cleanAndJerk: 100,\n    frontSquat: 100,\n    jerk: 100,\n    pushPress: 100,\n    snatch: 100,\n  },\n}\n\nexport const learnerPbsSlice = createSlice({\n  name: \"learnerPbs\",\n  initialState,\n  reducers: {\n    initPbs: (state, action) => {\n      state.pbs = action.payload\n    },\n  },\n})\n\n//selector\nexport const selectLearnerPbs = (state) => state.learnerPbs.pbs\n\n//action type\nexport const { initPbs } = learnerPbsSlice.actions\n\n//reducer to register with global store\nexport default learnerPbsSlice.reducer\n","import { createSlice } from \"@reduxjs/toolkit\"\n\nconst initialState = {\n  exercises: null,\n  prevWeek: null,\n  prevScheduleId: null,\n  stale: false,\n}\n\nexport const dailyExercisesSlice = createSlice({\n  name: \"dailyExercises\",\n  initialState,\n  reducers: {\n    initDailyExercises: (state, action) => {\n      state.exercises = JSON.parse(action.payload.exercises)\n      state.prevWeek = action.payload.week\n      state.prevScheduleId = action.payload.scheduleId\n    },\n  },\n})\n\n//selector\nexport const selectDailyExercises = (state) => state.dailyExercises\n\n//action type\nexport const { initDailyExercises } = dailyExercisesSlice.actions\n\n//reducer to register with global store\nexport default dailyExercisesSlice.reducer\n","import React, { useState } from \"react\"\n\nexport function useFetchSnackbar(resourceName = null, postFetchAction = null) {\n  const [isFetchSuccess, setIsFetchSuccess] = useState(null)\n\n  const Component = React.memo(({ isFetchSuccess, ...props }) => {\n    //NOTE: a factory function for customizing a notification div based on the kind of payload\n    switch (isFetchSuccess) {\n      default:\n        return (\n          <div {...props} style={{ color: \"var(--bg-cl)\" }}>\n            Fetching {resourceName ? resourceName : \"data\"} ...\n          </div>\n        )\n      case true:\n        return (\n          <div {...props} style={{ color: \"green\" }}>\n            {postFetchAction ? postFetchAction : \"Finished Fetching Data!\"}\n          </div>\n        )\n      case false:\n        return (\n          <div {...props} style={{ color: \"red\" }}>\n            Failed to Fetch {resourceName ? resourceName : \"data\"}. Please retry\n            later.\n          </div>\n        )\n    }\n  })\n\n  function FetchNotificationDiv({ ...props }) {\n    return <Component isFetchSuccess={isFetchSuccess} {...props} />\n  }\n\n  return { isFetchSuccess, setIsFetchSuccess, FetchNotificationDiv }\n}\n","import React, { useState, useEffect } from \"react\"\nimport { useSelector, useDispatch } from \"react-redux\"\nimport { initPbs, selectLearnerPbs } from \"../../reducers/learnerPbsSlice\"\nimport {\n  initDailyExercises,\n  selectDailyExercises,\n} from \"../../reducers/dailyExercisesSlice\"\nimport { useParams } from \"react-router-dom\"\nimport { LinkButton } from \"../factoryComponent\"\nimport { useFetchSnackbar } from \"../../hooks/useFetchSnackbar\"\nimport {\n  DayOptions,\n  DailyExerciseTable,\n  FeedBackDialog,\n  PbsDialog,\n} from \"./register\"\nimport { Grid, Typography, Button } from \"@material-ui/core\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport { shallowEqual } from \"../../utils\"\nimport programmeHttpService from \"../../services/ProgrammeServiceSingleton\"\nimport learnerHttpService from \"../../services/LearnerServiceSingleton\"\n\nconst useStyles = makeStyles(() => ({\n  btn: {\n    fontSize: \"0.5rem\",\n    minWidth: \"max-content\",\n    color: \"var(--txt-cl)\",\n    padding: \"0.5rem\",\n  },\n}))\n\nexport function ExercisePage() {\n  const dispatch = useDispatch()\n  const { scheduleId, week } = useParams()\n  const { prevWeek, prevScheduleId, exercises } = useSelector(\n    selectDailyExercises\n  )\n\n  const [selectedDay, setSelectedDay] = useState(\"day 1\")\n  const [openFeedbackDialog, setOpenFeedbackDialog] = useState(false)\n  const [openPbsDialog, setOpenPbsDialog] = useState(false)\n  // const [pbs, setPbs] = useState(useSelector(selectLearnerPbs))\n  const pbs = useSelector(selectLearnerPbs)\n  const [tempPbs, setTempPbs] = useState(useSelector(selectLearnerPbs))\n\n  const { setIsFetchSuccess, FetchNotificationDiv } = useFetchSnackbar(\n    \"exercises\"\n  )\n\n  function onFeedbackDialogCloseClicked() {\n    setOpenFeedbackDialog(false)\n  }\n\n  function onFeedbackDialogOpenClicked() {\n    setOpenFeedbackDialog(true)\n  }\n\n  async function onPbsDialogCloseClicked() {\n    if (!shallowEqual(pbs, tempPbs)) {\n      //does this auto update UI ? like setState? (yes it does)\n      const { ok } = await learnerHttpService.updateLearnerPbs(tempPbs)\n      if (ok) {\n      }\n    }\n    dispatch(initPbs(tempPbs))\n    setOpenPbsDialog(false)\n  }\n\n  function onPbsDialogOpenClicked() {\n    setOpenPbsDialog(true)\n  }\n\n  function onPersonalBestsInputChange(e) {\n    const changedField = e.target.getAttribute(\"name\")\n    const newValue = e.target.value\n    console.log(changedField)\n    setTempPbs((tempPbs) => {\n      let newTempPbs = { ...tempPbs }\n      newTempPbs[`${changedField}`] = parseFloat(newValue)\n        ? parseFloat(newValue)\n        : 0\n      return newTempPbs\n    })\n  }\n\n  useEffect(() => {\n    async function fetchExercises(scheduleId, week) {\n      //if it's the same week, don't fetch (this logic can be hidden away in asyncThunk)\n      if (prevWeek === week && prevScheduleId === scheduleId) {\n        return\n      }\n      const { ok, payload } = await programmeHttpService.fetchExercises(\n        scheduleId,\n        week\n      )\n      if (ok) {\n        setIsFetchSuccess(true)\n        dispatch(initDailyExercises({ exercises: payload, scheduleId, week }))\n      } else {\n        setIsFetchSuccess(false)\n      }\n    }\n    fetchExercises(scheduleId, week)\n  }, [scheduleId, week, setIsFetchSuccess, prevScheduleId, prevWeek, dispatch])\n\n  function onDaySelected(e) {\n    setSelectedDay(e.target.value)\n  }\n\n  const classes = useStyles()\n\n  return exercises ? (\n    <>\n      <Grid\n        container\n        direction=\"column\"\n        justify=\"space-around\"\n        style={{ height: \"100%\" }}\n      >\n        <Grid item>\n          <Typography variant=\"h6\" component=\"div\">\n            Week {week}\n          </Typography>\n          <DayOptions\n            exercises={exercises}\n            onDaySelected={onDaySelected}\n            selectedDay={selectedDay}\n            label=\"Day\"\n          />\n          <DailyExerciseTable\n            dailyExercises={exercises[selectedDay]}\n            pbs={pbs}\n          />\n        </Grid>\n        <Grid\n          item\n          container\n          justify=\"space-between\"\n          wrap=\"nowrap\"\n          style={{ margin: \"1rem auto\", width: \"100%\", padding: \"0 0.25rem\" }}\n        >\n          <Grid item>\n            <LinkButton\n              variant=\"contained\"\n              color=\"primary\"\n              className={classes.btn}\n              to=\"/learner/schedules\"\n              label=\"Schedules\"\n            >\n              Schedules\n            </LinkButton>\n          </Grid>\n          <Grid item>\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              className={classes.btn}\n              onClick={onPbsDialogOpenClicked}\n            >\n              Edit PBs\n            </Button>\n          </Grid>\n          <Grid item>\n            <Button\n              variant=\"contained\"\n              color=\"primary\"\n              className={classes.btn}\n              onClick={onFeedbackDialogOpenClicked}\n            >\n              Feedback\n            </Button>\n          </Grid>\n        </Grid>\n      </Grid>\n      <FeedBackDialog\n        onDialogCloseClicked={onFeedbackDialogCloseClicked}\n        open={openFeedbackDialog}\n      />\n      <PbsDialog\n        onDialogCloseClicked={onPbsDialogCloseClicked}\n        open={openPbsDialog}\n        pbs={tempPbs}\n        onPersonalBestsInputChange={onPersonalBestsInputChange}\n      />\n    </>\n  ) : (\n    <Grid\n      container\n      direction=\"column\"\n      justify=\"space-around\"\n      style={{ height: \"100%\" }}\n    >\n      <FetchNotificationDiv />\n    </Grid>\n  )\n}\n","import React from \"react\"\nimport { ScheduleOptions, WeekOptions } from \"./register\"\nimport { Grid, Typography } from \"@material-ui/core\"\nimport { makeStyles } from \"@material-ui/core/styles\"\n\nconst useStyles = makeStyles(() => ({\n  wrapper: {\n    margin: \"0 auto\",\n    display: \"flex\",\n    alignContent: \"space-around\",\n    height: \"100%\",\n    flexDirection: \"column\",\n    flexWrap: \"nowrap\",\n  },\n  itemWrapper: {\n    margin: \"0 auto\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignContent: \"space-around\",\n    justifyContent: \"center\",\n  },\n  header: {\n    fontWeight: \"var(--fw-md)\",\n    fontSize: \"1.25rem\",\n  },\n}))\n\nexport function ScheduleSelect({\n  selectedSchedule,\n  schedules,\n  onScheduleChecked,\n  onScheduleSubmitted,\n  selectedWeek,\n  onWeekSelected,\n}) {\n  const classes = useStyles()\n\n  return (\n    <Grid container className={classes.wrapper}>\n      <Grid item xs={8} md={6} lg={4} className={classes.itemWrapper}>\n        <Typography component=\"header\" className={classes.header}>\n          {selectedSchedule.programmeName}\n        </Typography>\n      </Grid>\n      <Grid\n        item\n        xs={8}\n        md={6}\n        lg={4}\n        className={classes.itemWrapper}\n        style={{ background: \"var(--txt-cl)\" }}\n      >\n        <ScheduleOptions\n          schedules={schedules}\n          onScheduleChecked={onScheduleChecked}\n          label=\"Available Cycles\"\n          selectedSchedule={selectedSchedule}\n        />\n        <WeekOptions\n          onWeekSelected={onWeekSelected}\n          selectedSchedule={selectedSchedule}\n          label=\"Week\"\n          selectedWeek={selectedWeek}\n        />\n      </Grid>\n      <Grid item xs={8} md={6} lg={4} className={classes.itemWrapper}>\n        <button\n          className={`submit-btn`}\n          style={{ width: \"100%\", margin: \"1rem\", alignSelf: \"center\" }}\n          onClick={onScheduleSubmitted}\n        >\n          Let's Go!\n        </button>\n      </Grid>\n    </Grid>\n  )\n}\n","import React from \"react\"\nimport {\n  FormControl,\n  InputLabel,\n  Select,\n  MenuItem,\n  Typography,\n} from \"@material-ui/core\"\nimport { makeStyles } from \"@material-ui/core/styles\"\n\nconst useStyles = makeStyles((theme) => ({\n  formControl: {\n    margin: theme.spacing(1),\n    maxWidth: \"100%\",\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2),\n  },\n  select: {\n    paddingRight: theme.spacing(4),\n  },\n}))\n\nexport function DayOptions({ exercises, onDaySelected, selectedDay, label }) {\n  const classes = useStyles()\n\n  if (!exercises)\n    return <Typography component=\"p\">No {label} Available</Typography>\n\n  const items = Object.keys(exercises).map((v) => {\n    return (\n      <MenuItem value={v} key={v}>\n        {v}\n      </MenuItem>\n    )\n  })\n\n  return (\n    <FormControl component=\"fieldset\" className={classes.formControl}>\n      <Select\n        value={selectedDay}\n        onChange={onDaySelected}\n        className={classes.select}\n      >\n        {items}\n      </Select>\n    </FormControl>\n  )\n}\n","import React from \"react\"\nimport { camelCaseToNormal } from \"../../utils\"\nimport { processInstruction } from \"../../services/register\"\nimport {\n  Table,\n  TableRow,\n  TableBody,\n  TableCell,\n  TableContainer,\n  TableHead,\n} from \"@material-ui/core\"\n\nexport function DailyExerciseTable({ dailyExercises, pbs }) {\n  return (\n    <TableContainer>\n      <Table\n        className=\"learner-table\"\n        size=\"small\"\n        aria-label=\"learner-exercise -table\"\n      >\n        <TableHead>\n          <TableRow>\n            {Object.keys(dailyExercises[0]).map((k) => {\n              return (\n                <TableCell\n                  key={k}\n                  className=\"learner-table-cell head\"\n                  align=\"center\"\n                >\n                  {camelCaseToNormal(k)}\n                </TableCell>\n              )\n            })}\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {dailyExercises.map((e) => (\n            <TableRow key={e.exerciseName} className=\"timetable-row\">\n              <TableCell className=\"learner-table-cell\" align=\"center\">\n                {e.exerciseName}\n              </TableCell>\n              <TableCell className=\"learner-table-cell\" align=\"center\">\n                {processInstruction(e, pbs)}\n              </TableCell>\n            </TableRow>\n          ))}\n        </TableBody>\n      </Table>\n    </TableContainer>\n  )\n}\n","import React from \"react\"\nimport { Dialog, DialogActions, DialogContent } from \"@material-ui/core\"\nimport { makeStyles } from \"@material-ui/core/styles\"\n\nconst useStyles = makeStyles(() => ({\n  dialog: {\n    width: \"90vw\",\n    height: \"90%\",\n    margin: \"1rem auto\",\n  },\n  content: {\n    background: \"var(--secondary-cl)\",\n    paddingTop: \"0\",\n  },\n  form: {\n    margin: \"11% auto var(--mg-sm)\",\n    width: \"100vw\",\n    height: \"100vh\",\n  },\n}))\n\nexport function FeedBackDialog({ onDialogCloseClicked, open }) {\n  const classes = useStyles()\n\n  return (\n    <Dialog\n      fullScreen={true}\n      open={open}\n      onClose={onDialogCloseClicked}\n      aria-labelledby=\"form-dialog-title\"\n      className={classes.dialog}\n    >\n      <DialogContent className={classes.content}>\n        <iframe\n          title=\"learner-feedback-form\"\n          style={{\n            margin: \"11% auto var(--mg-sm)\",\n            width: \"90vw\",\n            height: \"100vh\",\n          }}\n          src=\"https://docs.google.com/forms/d/e/1FAIpQLSeBrxdCbRf1M0YvZVHp2n3taph7-pAS9mkbN99m2ZPeBrf0yQ/viewform?embedded=true\"\n        >\n          Loading…\n        </iframe>\n      </DialogContent>\n      <DialogActions\n        style={{\n          display: \"flex\",\n          justifyContent: \"space-evenly\",\n          backgroundColor: \"var(--txt-cl)\",\n        }}\n      >\n        <button onClick={onDialogCloseClicked} style={{ width: \"max-content\" }}>\n          Close\n        </button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n","import React from \"react\"\nimport { LearnerPbsForm } from \"./register\"\nimport { Dialog, DialogContent } from \"@material-ui/core\"\nimport { makeStyles } from \"@material-ui/core/styles\"\n\nconst useStyles = makeStyles(() => ({\n  dialog: {\n    width: \"90vw\",\n    height: \"90%\",\n    margin: \"1rem auto\",\n  },\n  content: {\n    background: \"var(--txt-cl)\",\n    paddingTop: \"0\",\n  },\n  form: {\n    margin: \"11% auto var(--mg-sm)\",\n    width: \"100vw\",\n    height: \"100%\",\n  },\n}))\n\nexport function PbsDialog({\n  onDialogCloseClicked,\n  onPersonalBestsInputChange,\n  pbs,\n  open,\n}) {\n  const classes = useStyles()\n\n  return (\n    <Dialog\n      fullScreen={true}\n      open={open}\n      onClose={onDialogCloseClicked}\n      aria-labelledby=\"form-dialog-title\"\n      className={classes.dialog}\n    >\n      <DialogContent className={classes.content}>\n        <LearnerPbsForm\n          pbs={pbs}\n          onPersonalBestsInputChange={onPersonalBestsInputChange}\n          onDialogCloseClicked={onDialogCloseClicked}\n        />\n      </DialogContent>\n    </Dialog>\n  )\n}\n","import React from \"react\"\nimport { Save } from \"@material-ui/icons\"\nimport { camelCaseToNormal } from \"../../utils\"\nimport { TextField, Grid } from \"@material-ui/core\"\n\nfunction PersonalBestInput({ label, ...props }) {\n  return (\n    <Grid item>\n      <TextField\n        label={camelCaseToNormal(label)}\n        className=\"text-input\"\n        {...props}\n      />\n    </Grid>\n  )\n}\n\n//for learnerApp\nexport function LearnerPbsForm({\n  pbs,\n  onPersonalBestsInputChange,\n  onDialogCloseClicked,\n}) {\n  //it does changes, but doesn't show on the UI\n  const inputs = Object.keys(pbs).map((fieldName) => {\n    if (fieldName === \"learnerId\") return null\n    return (\n      <PersonalBestInput\n        label={fieldName}\n        name={fieldName}\n        type=\"text\"\n        key={fieldName}\n        value={pbs[fieldName]}\n        onChange={onPersonalBestsInputChange}\n      />\n    )\n  })\n\n  //use modal then\n  return (\n    <div className=\"pbs-form-wrapper\">\n      <h3 style={{ textTransform: \"capitalize\" }}>Personal Bests</h3>\n      <form>\n        <Grid\n          container\n          direction=\"column\"\n          justify=\"space-around\"\n          align=\"center\"\n          style={{ height: \"80vh\" }}\n        >\n          {inputs}\n        </Grid>\n      </form>\n      <Grid\n        item\n        className=\"pbs-form-btn-wrapper\"\n        style={{ justifyContent: \"center\" }}\n      >\n        <button\n          className=\"pbs-btn\"\n          onClick={onDialogCloseClicked}\n          style={{ width: \"30%\" }}\n        >\n          <Save className=\"pbs-btn-icon\" />\n          {\"Save\"}\n        </button>\n      </Grid>\n    </div>\n  )\n}\n","import React, { useState } from \"react\"\nimport { Logo, LoginForm } from \"./register\"\nimport {\n  UserAuth,\n  validateInstructorCredentials,\n  NavHelpers,\n} from \"../../services/register\"\nimport httpService from \"../../services/InstructorServiceSingleton\"\n\nexport function InstructorLoginPage({ onInstructorLogIn }) {\n  NavHelpers.setCurrentPage(\"/instructor/login\")\n\n  const [credentials, setCredentials] = useState({ email: \"\", password: \"\" })\n  const [errorMessage, setErrorMessage] = useState(null)\n\n  function onInputChanged(e) {\n    const changedField = e.target.getAttribute(\"name\")\n    const newValue = e.target.value.trim()\n    setCredentials((c) => {\n      c[changedField] = newValue\n      return c\n    })\n  }\n\n  async function onFormSubmitted(e) {\n    e.preventDefault()\n    const error = validateInstructorCredentials(credentials)\n    if (error) {\n      setErrorMessage(error)\n      return\n    }\n    setErrorMessage(null)\n    console.log(\"Logging in with \", credentials)\n\n    const { ok, payload } = await httpService.instructorLogin(credentials)\n\n    if (!ok) {\n      setErrorMessage(payload.message)\n      return\n    } else {\n      UserAuth.saveToken(payload.token)\n      onInstructorLogIn()\n    }\n  }\n\n  return (\n    <div\n      style={{\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyContent: \"space-evenly\",\n        minHeight: \"100%\",\n        margin: \"0 auto\",\n      }}\n    >\n      <Logo />\n      <LoginForm\n        title=\"Instructor Login\"\n        onFormSubmitted={onFormSubmitted}\n        credentials={credentials}\n        onInputChanged={onInputChanged}\n        errorMessage={errorMessage}\n        type=\"instructor\"\n      />\n    </div>\n  )\n}\n","import React, { useState } from \"react\"\nimport { Redirect } from \"react-router-dom\"\nimport { Logo, LoginForm } from \"./register\"\nimport {\n  NavHelpers,\n  UserAuth,\n  validateLearnerCredentials,\n} from \"../../services/register\"\nimport httpService from \"../../services/LearnerServiceSingleton\"\nimport { initSchedules } from \"../../reducers/learnerSchedulesSlice\"\nimport { initPbs } from \"../../reducers/learnerPbsSlice\"\nimport { useDispatch } from \"react-redux\"\n\nexport function LearnerLoginPage({ onLearnerLogIn, isLearnerLoggedIn }) {\n  NavHelpers.setCurrentPage(\"/learner/login\")\n\n  const dispatch = useDispatch()\n\n  const [credentials, setCredentials] = useState({ username: \"\", password: \"\" })\n  const [errorMessage, setErrorMessage] = useState(null)\n\n  function onInputChanged(e) {\n    const changedField = e.target.getAttribute(\"name\")\n    const newValue = e.target.value.trim()\n    setCredentials((c) => {\n      c[changedField] = newValue\n      return c\n    })\n  }\n\n  async function onFormSubmitted(e) {\n    e.preventDefault()\n    const error = validateLearnerCredentials(credentials)\n    if (error) {\n      setErrorMessage(error)\n      return\n    }\n    setErrorMessage(null)\n    console.log(\"Logging in with \", credentials)\n\n    const { ok, payload } = await httpService.learnerLogin(credentials)\n\n    if (!ok) {\n      setErrorMessage(payload.message)\n      return\n    } else {\n      UserAuth.saveToken(payload.token)\n      delete payload.token\n      //redux?\n      //hard-code for now\n      dispatch(initSchedules(payload.schedules))\n      dispatch(initPbs(payload.pbs))\n      onLearnerLogIn()\n    }\n  }\n\n  return isLearnerLoggedIn ? (\n    <Redirect to=\"learner/schedules\" />\n  ) : (\n    <div\n      style={{\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyContent: \"space-evenly\",\n        minHeight: \"100%\",\n        margin: \"0 auto\",\n      }}\n    >\n      <Logo />\n      <LoginForm\n        title=\"Learner Login\"\n        onFormSubmitted={onFormSubmitted}\n        credentials={credentials}\n        onInputChanged={onInputChanged}\n        errorMessage={errorMessage}\n      />\n    </div>\n  )\n}\n","import React from \"react\"\n\nexport function Logo({ style }) {\n  return (\n    <div className=\"logo-wrapper\">\n      <img\n        style={style}\n        className=\"logo\"\n        src={require(\"../../assets/logo.jpg\")}\n        alt=\"New Zealand Olympic Weight-Lifting Logo\"\n      />\n    </div>\n  )\n}\n","import React from \"react\"\nimport { Button } from \"@material-ui/core\"\n\nexport function LoginFormButton({ label, onClick }) {\n  return (\n    <Button\n      type=\"submit\"\n      onClick={onClick}\n      variant=\"contained\"\n      color=\"secondary\"\n      style={{ fontSize: \"0.65rem\", maxWidth: \"max-content\" }}\n    >\n      {label}\n    </Button>\n  )\n}\n","import React from \"react\"\nimport { LoginFormButtonPanel, LoginFields } from \"./register\"\n\nfunction ErrorMessageDiv({ errorMessage }) {\n  return (\n    <div className=\"error-message-wrapper\">\n      <p\n        className=\"error-message\"\n        style={{ visibility: errorMessage ? \"visible\" : \"hidden\" }}\n      >\n        {errorMessage}\n      </p>\n    </div>\n  )\n}\n\nexport function LoginForm({\n  title,\n  onFormSubmitted,\n  errorMessage,\n  type,\n  credentials,\n  onInputChanged,\n}) {\n  return (\n    <>\n      <h1\n        style={{\n          fontSize: \"calc(var(--fs-md) * 0.75)\",\n          marginBottom: \"3rem\",\n        }}\n      >\n        {title}\n      </h1>\n      <form className=\"login-form\" onSubmit={onFormSubmitted}>\n        <LoginFields\n          credentials={credentials}\n          onInputChanged={onInputChanged}\n        />\n        {<ErrorMessageDiv errorMessage={errorMessage} />}\n        <LoginFormButtonPanel type={type} />\n      </form>\n    </>\n  )\n}\n","import React from \"react\"\nimport { Grid, TextField } from \"@material-ui/core\"\n\nexport function LoginFields({ credentials, onInputChanged }) {\n  const fields = Object.keys(credentials).map((fieldName) => (\n    <Grid\n      item\n      xs={10}\n      md={6}\n      lg={4}\n      style={{ margin: \"0 auto\" }}\n      key={fieldName}\n    >\n      <TextField\n        style={{ marginBottom: \"1rem\" }}\n        variant=\"outlined\"\n        label={fieldName}\n        InputProps={{\n          // value: credentials[fieldName],\n          name: fieldName,\n          type: fieldName === \"password\" ? \"password\" : \"text\",\n        }}\n        onChange={onInputChanged}\n      />\n    </Grid>\n  ))\n  return <>{fields}</>\n}\n","import React from \"react\"\nimport { LoginFormButton } from \"./register\"\nimport { Grid } from \"@material-ui/core\"\n\nexport function LoginFormButtonPanel({ type }) {\n  let btns\n\n  if (type === \"instructor\") {\n    btns = <LoginFormButton customClassName=\"login right\" label=\"Log In\" />\n  } else {\n    btns = (\n      <>\n        <LoginFormButton customClassName=\"login left\" label=\"Sign Up\" />\n        <LoginFormButton customClassName=\"login right\" label=\"Log In\" />\n      </>\n    )\n  }\n  return (\n    <Grid\n      item\n      container\n      xs={10}\n      md={8}\n      lg={4}\n      justify=\"space-evenly\"\n      wrap=\"nowrap\"\n      style={{ margin: \"0 auto\", width: \"100%\" }}\n      // className=\"submit-btn-container\"\n    >\n      {btns}\n    </Grid>\n  )\n}\n","import React, { useState } from \"react\"\nimport { BrowserRouter as Router, Redirect } from \"react-router-dom\"\n//https://reactrouter.com/web/api\n\nimport { NavBarControl, Footer, PageRoutes } from \"./app/register\"\n\nimport { FitnessCenter, ExitToApp, TodayOutlined } from \"@material-ui/icons\"\nimport {\n  ExercisePage,\n  LearnerSchedulePage,\n} from \"./components/learners/register\"\nimport { LearnerLoginPage } from \"./components/home/register\"\nimport { LearnerPracticeBestsPage } from \"./components/learners/LearnerPracticeBestsPage\"\n\nimport { UserAuth, NavHelpers } from \"./services/register\"\n\nconst allLinks = {\n  learner: [\n    {\n      to: \"/learner/schedules\",\n      label: \"Schedules\",\n      component: LearnerSchedulePage,\n      isProtected: true,\n      display: true,\n      icon: TodayOutlined,\n    },\n    {\n      to: \"/learner/practice.bests\",\n      label: \"Practice Bests\",\n      component: LearnerPracticeBestsPage,\n      isProtected: true,\n      display: true,\n      icon: FitnessCenter,\n    },\n    {\n      to: \"/logout\",\n      label: \"Log Out\",\n      component: null,\n      isProtected: true,\n      display: true,\n      icon: ExitToApp,\n    },\n    {\n      to: \"/learner/:scheduleId/:week\",\n      label: \"Exercises\",\n      component: ExercisePage,\n      isProtected: true,\n      display: false,\n    },\n  ],\n  instructorApp: [\n    {\n      to: \"/instructor/login\",\n      label: \"Instructor Space\",\n      isProtected: false,\n      display: true,\n    },\n  ],\n}\n\nexport function LearnerApp({ onAppChange }) {\n  const [isLearnerLoggedIn, setIsLearnerLoggedIn] = useState(\n    UserAuth.isAuthenticated()\n  )\n\n  const [links, setLinks] = useState(\n    UserAuth.isAuthenticated() ? allLinks.learner : allLinks.instructorApp\n  )\n\n  function onLearnerLogIn() {\n    setLinks(allLinks.learner)\n    setIsLearnerLoggedIn(true)\n  }\n\n  function onLearnerLogOut(e) {\n    console.log(\"log me out!\")\n    UserAuth.clearToken()\n    NavHelpers.setCurrentPage(\"/learner/login\")\n    setLinks(allLinks.instructorApp) //this also makes sure that only the login page is registered as a route when user's logged out\n    setIsLearnerLoggedIn(false)\n  }\n\n  return (\n    <Router>\n      <NavBarControl\n        links={links}\n        onLogOut={onLearnerLogOut}\n        pageTitle=\"Otago WeightLifting Learner Space\"\n        onAppChange={onAppChange}\n      />\n      <div className=\"App main\">\n        {isLearnerLoggedIn ? (\n          <Redirect\n            to={\n              NavHelpers.getCurrentPage() !== \"/learner/login\" &&\n              NavHelpers.getCurrentPage() !== null\n                ? NavHelpers.getCurrentPage()\n                : \"/learner/schedules\"\n            }\n          />\n        ) : (\n          <LearnerLoginPage\n            onLearnerLogIn={onLearnerLogIn}\n            isLearnerLoggedIn={isLearnerLoggedIn}\n          />\n        )}\n        <PageRoutes links={links} />\n      </div>\n      <Footer />\n    </Router>\n  )\n}\n\nexport default LearnerApp\n","import React, { useState } from \"react\"\nimport { useSelector } from \"react-redux\"\nimport { selectLearnerSchedules } from \"../../reducers/learnerSchedulesSlice\"\nimport { ScheduleSelect } from \"./register\"\nimport { NavHelpers } from \"../../services/register\"\nimport { Redirect } from \"react-router-dom\"\n\nexport function LearnerSchedulePage() {\n  NavHelpers.setCurrentPage(\"/learner/schedules\")\n  const schedules = useSelector(selectLearnerSchedules)\n  const [selectedSchedule, setSelectedschedule] = useState(\n    schedules ? schedules[0] : null\n  )\n  const [selectedWeek, setSelectedWeek] = useState(schedules ? 1 : null)\n  const [isSchedulePicked, setIsSchedulePicked] = useState(false)\n\n  function onScheduleChecked(e) {\n    const checkedScheduleId = parseInt(e.target.value)\n    console.log(checkedScheduleId)\n    setSelectedschedule(\n      schedules.find((s) => s.scheduleId === checkedScheduleId)\n    )\n  }\n\n  function onWeekSelected(e) {\n    setSelectedWeek(parseInt(e.target.value))\n  }\n\n  function onScheduleSubmitted(e) {\n    setIsSchedulePicked(true)\n  }\n\n  return isSchedulePicked ? (\n    <Redirect to={`/learner/${selectedSchedule.scheduleId}/${selectedWeek}`} />\n  ) : (\n    <ScheduleSelect\n      selectedSchedule={selectedSchedule}\n      schedules={schedules}\n      onScheduleChecked={onScheduleChecked}\n      onScheduleSubmitted={onScheduleSubmitted}\n      selectedWeek={selectedWeek}\n      onWeekSelected={onWeekSelected}\n    />\n  )\n}\n","import React from \"react\"\n\nexport function LearnerPracticeBestsPage() {\n  return <div>LearnerPracticeBestsPage</div>\n}\n","import XLSX from \"xlsx\"\nimport httpService from \"../../services/ProgrammeServiceSingleton\"\n\nexport class myExcelReader {\n  constructor(programmeIds, scheduleName, isNew = true, scheduleId = null) {\n    this.reader = new FileReader()\n    this.reader.programmeIds = programmeIds\n    this.reader.scheduleName = scheduleName\n    this.reader.isNew = isNew\n    this.reader.scheduleId = scheduleId\n    this.reader.makeTimeTable = function (exercisesArr) {\n      const aggregate = {}\n\n      function getWeekDayPair(exercisesArr) {\n        let prevPair = [0, 0]\n        return exercisesArr.reduce((pairs, { week, day }) => {\n          if (prevPair[0] !== week || prevPair[1] !== day) {\n            prevPair = [week, day]\n            pairs.push([week, day])\n          }\n          return pairs\n        }, [])\n      }\n\n      function extractDailyExercises(w, d) {\n        exercisesArr\n          .filter(({ week, day }) => week === w && day === d)\n          .reduce((acc, { exerciseName, instruction }) => {\n            //initialise prop week if not exist\n            if (acc[`week ${w}`] === undefined) {\n              acc[`week ${w}`] = {}\n            }\n\n            //initialise prop day of week if not exist\n            if (acc[`week ${w}`][`day ${d}`] === undefined) {\n              acc[`week ${w}`][`day ${d}`] = []\n            }\n\n            //push obj to proper week and day\n            acc[`week ${w}`][`day ${d}`].push({ exerciseName, instruction })\n\n            return acc\n          }, aggregate)\n      }\n\n      getWeekDayPair(exercisesArr).forEach((dayInWeek) =>\n        extractDailyExercises(dayInWeek[0], dayInWeek[1])\n      )\n      return aggregate\n    }\n    this.reader.onload = async function (event) {\n      const data = event.target.result\n      const workbook = XLSX.read(data, {\n        type: \"buffer\",\n      })\n\n      const rows = []\n\n      workbook.SheetNames.forEach(function (sheetName) {\n        //which is actually an array of rows\n        const XL_row_object = XLSX.utils.sheet_to_json(\n          workbook.Sheets[sheetName]\n        )\n        rows.push(...XL_row_object)\n      })\n\n      let payload = { timetable: this.makeTimeTable(rows) }\n      let isActionSuccess\n\n      if (isNew) {\n        payload = {\n          ...payload,\n          scheduleName: this.scheduleName,\n          programmeIds: this.programmeIds,\n          weekCount: workbook.SheetNames.length,\n        }\n        isActionSuccess = await httpService.postNewSchedule(payload)\n      } else {\n        payload = {\n          ...payload,\n          scheduleId: this.scheduleId,\n          weekCount: workbook.SheetNames.length,\n        }\n        isActionSuccess = await httpService.repostSchedule(payload)\n      }\n      return isActionSuccess\n    }\n\n    this.reader.onerror = (event) => {\n      console.error(\"File could not be read! Code \" + event.target.error.code)\n    }\n\n    this.reader.readAsArrayBufferPromise = (file) => {\n      return new Promise((resolve, reject) => {\n        let r = new FileReader()\n        r.onload = (e) => resolve(e.target.result)\n        r.onerror = reject\n        r.readAsArrayBuffer(file)\n      })\n    }\n  }\n}\n","import React, { useState } from \"react\"\nimport { capitalise } from \"../utils\"\nimport { ActionNotificationDiv } from \"../components/ActionNotificationDiv\"\n\nexport function useActionSnackbar(action, serviceMethod) {\n  const [actionStatus, setActionStatus] = useState({\n    action: null,\n    isActionSuccess: true,\n  })\n\n  // basically like a middleware that intercepts the response\n  async function callDecoratedService() {\n    setActionStatus({ action: action, isActionSuccess: null })\n    const res = await serviceMethod(...arguments)\n    if (res.ok) {\n      setActionStatus({ action: action, isActionSuccess: true })\n      console.log(`${capitalise(action)} Successful!`)\n    } else {\n      setActionStatus({ action: action, isActionSuccess: false })\n      console.log(`${capitalise(action)} failed!`)\n    }\n    //for custom side-effect outside of the component\n    return res\n  }\n\n  function onCloseActionStatusDiv() {\n    setActionStatus({ action: null, isActionSuccess: null })\n  }\n\n  function Component() {\n    return (\n      <ActionNotificationDiv\n        actionStatus={actionStatus}\n        onCloseActionStatusDiv={onCloseActionStatusDiv}\n      />\n    )\n  }\n\n  //this allows the hook to be used with different services in the same component\n  function makePayloadObjectWithCustomPropNames(action) {\n    let returnedObj = {}\n    returnedObj[`${action}ActionStatus`] = actionStatus\n    returnedObj[`set${capitalise(action)}ActionStatus`] = setActionStatus\n    returnedObj[\n      `callDecorated${capitalise(action)}Service`\n    ] = callDecoratedService\n    returnedObj[\n      `onClose${capitalise(action)}StatusDiv`\n    ] = onCloseActionStatusDiv\n\n    returnedObj[`${capitalise(action)}Snackbar`] = Component\n    return returnedObj\n  }\n\n  const propsAndHooks = makePayloadObjectWithCustomPropNames(action)\n\n  return propsAndHooks\n}\n","import React, { useState, useEffect } from \"react\"\nimport { myExcelReader } from \"./myExcelReader\"\nimport {\n  fileReaderPromise,\n  makeSchedulePayload,\n  findIndexAndDelete,\n} from \"../../services/register\"\nimport { FileUploader, ProgrammeOptions, ScheduleNameInput } from \"./register\"\nimport { Grid, FormHelperText } from \"@material-ui/core\"\nimport { useFetchSnackbar, useActionSnackbar } from \"../../hooks/register\"\nimport httpService from \"../../services/ProgrammeServiceSingleton\"\n\n//a good candidate for Redux, since needed by many components, lets just do useState for now\nexport function ScheduleUploader({ onActionSuccess }) {\n  const [programmes, setProgrammes] = useState(null)\n  const [selectedProgrammeIds, setSelectedProgrammeIds] = useState([])\n  const [scheduleName, setScheduleName] = useState(\"\")\n  // const [isFetchSuccess, setIsFetchSuccess] = useState(null)\n\n  const {\n    isFetchSuccess,\n    setIsFetchSuccess,\n    FetchNotificationDiv,\n  } = useFetchSnackbar(\"programmes\")\n\n  const { callDecoratedUploadService, UploadSnackbar } = useActionSnackbar(\n    \"upload\",\n    httpService.postNewSchedule\n  )\n\n  function onProgrammeChecked(e) {\n    const checkedProgrammeId = parseInt(e.target.value)\n    if (e.target.checked) {\n      console.log(checkedProgrammeId)\n      setSelectedProgrammeIds([...selectedProgrammeIds, checkedProgrammeId])\n    } else {\n      setSelectedProgrammeIds((selectedProgrammeIds) => {\n        let newArr = [...selectedProgrammeIds]\n        findIndexAndDelete(checkedProgrammeId, newArr)\n        return newArr\n      })\n    }\n  }\n\n  function onClickedScheduleNameChanged(e) {\n    setScheduleName(e.target.value)\n  }\n\n  useEffect(() => {\n    //this should stay here unless all components have a status tracking feature, which makes sense\n    async function fetchProgrammes() {\n      const { ok, payload } = await httpService.fetchProgrammes()\n\n      if (ok) {\n        console.log(payload)\n        //effect here\n        setProgrammes(payload.programmes)\n        setIsFetchSuccess(true)\n      } else {\n        //another effect\n        setIsFetchSuccess(false)\n      }\n    }\n    fetchProgrammes()\n  }, [setIsFetchSuccess])\n\n  async function onFileUploaded(e) {\n    const selectedFile = e.target.files[0]\n    const r = new myExcelReader(selectedProgrammeIds, scheduleName)\n    //empty rows are skipped!\n    //this is async (oneload and onerror are defined inside the r instance)\n    r.reader.readAsArrayBufferPromise(selectedFile)\n\n    const buffer = await fileReaderPromise(selectedFile)\n    const newSchedule = makeSchedulePayload(\n      buffer,\n      selectedProgrammeIds,\n      scheduleName,\n      true\n    )\n\n    const { ok, payload } = await callDecoratedUploadService(newSchedule)\n    if (ok) {\n      const newScheduleInfoObject = makeNewScheduleInfoObject(\n        payload,\n        programmes\n      )\n      onActionSuccess(\"upload\", { newScheduleInfoObject })\n      console.log(\"Upload Successful!\")\n      return\n    }\n  }\n\n  function makeNewScheduleInfoObject(payload, programmes) {\n    return {\n      ...payload,\n      programmes: programmes.filter((p) =>\n        selectedProgrammeIds.includes(p.programmeId)\n      ),\n    }\n  }\n\n  return (\n    <Grid\n      item\n      xs={8}\n      md={12}\n      lg={12}\n      style={{\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyContent: \"space-around\",\n      }}\n    >\n      {programmes ? (\n        <>\n          <ScheduleNameInput\n            label=\"Cycle Name\"\n            onClickedScheduleNameChanged={onClickedScheduleNameChanged}\n            scheduleName={scheduleName}\n          />\n          <ProgrammeOptions\n            programmes={programmes}\n            isFetchSuccess={isFetchSuccess}\n            onProgrammeChecked={onProgrammeChecked}\n            label=\"Publish to Team: \"\n          />\n          <UploadSnackbar />\n          {scheduleName.length > 5 ? (\n            <FileUploader onFileUploaded={onFileUploaded} />\n          ) : (\n            <FormHelperText>\n              Please Enter The Cycle's Name Before Uploading\n            </FormHelperText>\n          )}\n        </>\n      ) : (\n        // <FetchProgrammesNotificationDiv isFetchSuccess={isFetchSuccess} />\n        <FetchNotificationDiv />\n      )}\n    </Grid>\n  )\n}\n","import React from \"react\"\nimport { InputLabel } from \"@material-ui/core\"\nimport { CloudUploadRounded } from \"@material-ui/icons\"\n\nexport function FileUploader({ onFileUploaded }) {\n  return (\n    <div\n      style={{\n        display: \"flex\",\n        flexDirection: \"column\",\n        alignItems: \"center\",\n        marginTop: \"var(--mg-sm)\",\n      }}\n    >\n      <InputLabel\n        style={{\n          padding: \"var(--pd-sm)\",\n          minWidth: \"max-content\",\n          margin: \"0 auto\",\n          border: \"1px solid var(--txt-cl)\",\n        }}\n        htmlFor=\"fileUploader\"\n      >\n        <CloudUploadRounded\n          style={{\n            color: \"var(--bg-cl)\",\n            fontSize: \"var(--fs-lg)\",\n            margin: \"0 calc(1 * var(--mg-lg))\",\n          }}\n        />\n      </InputLabel>\n      <input\n        style={{ margin: \"0 auto\", display: \"none\" }}\n        type=\"file\"\n        id=\"fileUploader\"\n        name=\"fileUploader\"\n        accept=\".xls, .xlsx\"\n        onChange={onFileUploaded}\n      />\n      {/* <pre id=\"jsonObject\" style={{ fontSize: \"10px\", color: \"black\" }}>\n        {\" \"}\n        JSON :{\" \"}\n      </pre> */}\n    </div>\n  )\n}\n","import React from \"react\"\nimport {\n  FormControlLabel,\n  FormGroup,\n  FormLabel,\n  FormControl,\n  Checkbox,\n  Typography,\n} from \"@material-ui/core\"\n\nexport function ProgrammeOptions({ programmes, onProgrammeChecked, label }) {\n  let content\n  if (programmes.length > 0) {\n    const checkboxes = programmes.map(({ programmeName, programmeId }) => {\n      return (\n        <FormControlLabel\n          key={programmeId}\n          control={\n            <Checkbox\n              onChange={onProgrammeChecked}\n              name={programmeName}\n              value={programmeId}\n              color=\"primary\"\n            />\n          }\n          label={programmeName}\n        />\n      )\n    })\n    content = (\n      <>\n        <FormLabel component=\"legend\">{label}</FormLabel>\n        <FormGroup>{checkboxes}</FormGroup>\n      </>\n    )\n  } else {\n    content = <Typography component=\"p\">No Programme Available</Typography>\n  }\n\n  return (\n    <FormControl component=\"fieldset\" style={{ marginBottom: \"var(--mg-sm)\" }}>\n      {content}\n    </FormControl>\n  )\n}\n","class ScheduleReducers {\n  static _updateScheduleDetails(\n    { scheduleId, scheduleName, weekCount },\n    prevSchedules\n  ) {\n    const newSchedules = [...prevSchedules]\n    const targetIndex = newSchedules.findIndex(\n      (s) => s.scheduleId === scheduleId\n    )\n    newSchedules[targetIndex] = {\n      ...newSchedules[targetIndex],\n      scheduleName,\n      weekCount,\n    }\n    return newSchedules\n  }\n\n  static _addPublishedProgramme({ scheduleId, programmes }, prevSchedules) {\n    const newSchedules = [...prevSchedules]\n    //this returns a reference to the item in the array\n    const updatedSchedule = newSchedules.find(\n      (s) => s.scheduleId === scheduleId\n    )\n\n    updatedSchedule.programmes = [...updatedSchedule.programmes, ...programmes]\n    return newSchedules\n  }\n\n  static _removeProgrammeFromSchedule(\n    { scheduleId, targetProgramme },\n    prevSchedules\n  ) {\n    let newSchedules = [...prevSchedules]\n    let targetSchedule = newSchedules.find((s) => s.scheduleId === scheduleId)\n    let removedProgrammeIndex = targetSchedule.programmes.findIndex(\n      (p) => p.programmeId === targetProgramme.programmeId\n    )\n    targetSchedule.programmes.splice(removedProgrammeIndex, 1)\n    return newSchedules\n  }\n\n  static _deleteOneScheduleById({ scheduleId }, prevSchedules) {\n    return prevSchedules.filter((s) => s.scheduleId !== scheduleId)\n  }\n\n  static _addNewSchedule({ newScheduleInfoObject }, prevSchedules) {\n    return [...prevSchedules, newScheduleInfoObject]\n  }\n\n  //command & factory pattern\n  static factory(schedules, setSchedules) {\n    return function (action, payload) {\n      switch (action) {\n        case \"delete\":\n          setSchedules(\n            ScheduleReducers._deleteOneScheduleById(payload, schedules)\n          )\n          return\n        case \"upload\":\n          setSchedules(ScheduleReducers._addNewSchedule(payload, schedules))\n          return\n        case \"publish\":\n          setSchedules(\n            ScheduleReducers._addPublishedProgramme(payload, schedules)\n          )\n          return\n        case \"unpublish\":\n          setSchedules(\n            ScheduleReducers._removeProgrammeFromSchedule(payload, schedules)\n          )\n          return\n        case \"repost\":\n          setSchedules(\n            ScheduleReducers._updateScheduleDetails(payload, schedules)\n          )\n          return\n        default:\n          return\n      }\n    }\n  }\n}\n\nexport default ScheduleReducers\n","import React, { useState, useEffect } from \"react\"\nimport {\n  ScheduleCards,\n  AddScheduleFloatingButton,\n  ReuploadScheduleDialog,\n  PublishScheduleDialog,\n} from \"./register\"\nimport ScheduleReducers from \"./ScheduleReducers\"\n\nimport { Grid } from \"@material-ui/core\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport { useActionSnackbar, useFetchSnackbar } from \"../../hooks/register\"\nimport httpService from \"../../services/ProgrammeServiceSingleton\"\nimport { fileReaderPromise } from \"../../services/register\"\nimport { NavHelpers } from \"../../services/register\"\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    justifyContent: \"space-around\",\n  },\n  item: {\n    margin: \"var(--mg-sm)\",\n    padding: 0,\n  },\n}))\n\nfunction resetState(currentState, initialState, setStateFunc) {\n  if (currentState !== initialState) {\n    setStateFunc(initialState)\n  }\n}\n\nfunction checkCanUpdate(newName, currentName, isFileUploaded) {\n  const isValidLength = newName.length > 0\n  const isNewName = newName !== currentName\n  const caseOne = !isFileUploaded && isValidLength && isNewName\n  const caseTwo = isFileUploaded && isValidLength\n  return caseOne || caseTwo\n}\n\nexport function SchedulePanel() {\n  NavHelpers.setCurrentPage(\"/instructor/schedules\")\n  const [schedules, setSchedules] = useState(null)\n  const [clickedScheduleId, setClickedScheduleId] = useState(null)\n  const [clickedSchedule, setClickedSchedule] = useState(null)\n  const [currentScheduleName, setCurrentScheduleName] = useState(null)\n  const [openReuploadDialog, setOpenReuploadDialog] = useState(false)\n  const [openPublishDialog, setOpenPublishDialog] = useState(false)\n  const [canUpdate, setCanUpdate] = useState(false)\n  const [buffer, setBuffer] = useState(null)\n  const [isFileUploaded, setIsFileUploaded] = useState(false)\n\n  // ATTENTION: use object as API rather than array since we can pick and choose what to destructure. Downside is the prop name is fixed. That's why useState is [state, setState] rather than {state, setState}\n  const { setIsFetchSuccess, FetchNotificationDiv } = useFetchSnackbar(\n    \"schedules\"\n  )\n\n  const { callDecoratedDeleteService, DeleteSnackbar } = useActionSnackbar(\n    \"delete\",\n    httpService.deleteSchedule\n  )\n\n  const updateSchedulesList = ScheduleReducers.factory(schedules, setSchedules)\n\n  async function onFileUploaded(e) {\n    const selectedFile = e.target.files[0]\n    const buffer = await fileReaderPromise(selectedFile)\n    setBuffer(buffer)\n    setIsFileUploaded(true)\n    setCanUpdate(true)\n  }\n\n  function getClickedScheduleId(e) {\n    return parseInt(e.currentTarget.getAttribute(\"scheduleId\"))\n  }\n\n  function onEditScheduleClicked(e) {\n    //need to use currentTarget since it's a material icon component so need to get the reference to the underlying base DOM element\n    console.log(e.currentTarget.getAttribute(\"scheduleId\"))\n    setOpenReuploadDialog(true)\n    setClickedScheduleId(getClickedScheduleId(e))\n    const clicked = schedules.find(\n      (s) => s.scheduleId === getClickedScheduleId(e)\n    )\n\n    setClickedSchedule(clicked)\n    setCurrentScheduleName(clicked.scheduleName)\n  }\n\n  //shared by all dialogs since only one can be opened at the same time\n  function onDialogCloseClicked(e) {\n    resetState(openReuploadDialog, false, setOpenReuploadDialog)\n    resetState(openPublishDialog, false, setOpenPublishDialog)\n    resetState(isFileUploaded, false, setIsFileUploaded)\n    resetState(canUpdate, false, setCanUpdate)\n\n    resetState(buffer, null, setBuffer)\n    resetState(clickedSchedule, null, setClickedSchedule)\n    resetState(currentScheduleName, null, setCurrentScheduleName)\n  }\n\n  async function onDeleteScheduleClicked(e) {\n    const scheduleId = getClickedScheduleId(e)\n    setClickedScheduleId(getClickedScheduleId(e))\n    if (\n      window.confirm(\n        `Are you sure you want to delete schedule id ${scheduleId}`\n      )\n    ) {\n      const { ok } = await callDecoratedDeleteService(scheduleId)\n      if (ok) {\n        updateSchedulesList(\"delete\", { scheduleId })\n      }\n    }\n  }\n\n  function onPublishScheduleClicked(e) {\n    console.log(\n      `Publish schedule id ${e.currentTarget.getAttribute(\"scheduleId\")}`\n    )\n    setOpenPublishDialog(true)\n    setClickedScheduleId(getClickedScheduleId(e))\n  }\n\n  function onClickedScheduleNameChanged(e) {\n    const scheduleName = e.target.value\n    setClickedSchedule({ ...clickedSchedule, scheduleName })\n    setCanUpdate(\n      checkCanUpdate(scheduleName, currentScheduleName, isFileUploaded)\n    )\n  }\n\n  useEffect(() => {\n    async function fetchSchedules() {\n      const { ok, payload } = await httpService.fetchScheduleInfo()\n      if (ok) {\n        setIsFetchSuccess(true)\n        setSchedules(payload)\n      }\n      setIsFetchSuccess(false)\n    }\n    fetchSchedules()\n  }, [setIsFetchSuccess])\n\n  const classes = useStyles()\n\n  return (\n    <>\n      <DeleteSnackbar />\n      <AddScheduleFloatingButton onActionSuccess={updateSchedulesList} />\n      <Grid container className={classes.container}>\n        {!schedules ? (\n          <FetchNotificationDiv style={{ margin: \"0 auto\" }} />\n        ) : (\n          <>\n            <ScheduleCards\n              schedules={schedules}\n              onEditScheduleClicked={onEditScheduleClicked}\n              onPublishScheduleClicked={onPublishScheduleClicked}\n              onDeleteScheduleClicked={onDeleteScheduleClicked}\n              onActionSuccess={updateSchedulesList}\n              // something about closer/scope that prevents passing references here\n            />\n          </>\n        )}\n      </Grid>\n      <ReuploadScheduleDialog\n        open={openReuploadDialog}\n        onDialogCloseClicked={onDialogCloseClicked}\n        clickedSchedule={clickedSchedule}\n        onActionSuccess={updateSchedulesList}\n        onClickedScheduleNameChanged={onClickedScheduleNameChanged}\n        canUpdate={canUpdate}\n        buffer={buffer}\n        isFileUploaded={isFileUploaded}\n        onFileUploaded={onFileUploaded}\n      />\n      <PublishScheduleDialog\n        open={openPublishDialog}\n        onDialogCloseClicked={onDialogCloseClicked}\n        scheduleId={clickedScheduleId}\n        onActionSuccess={updateSchedulesList}\n      />\n    </>\n  )\n}\n","import React from \"react\"\nimport { Grid } from \"@material-ui/core\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport { ScheduleCard } from \"./register\"\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    justifyContent: \"space-around\",\n  },\n  item: {\n    margin: \"var(--mg-sm)\",\n    padding: 0,\n  },\n}))\n\n//can also make a more general wrapper\nfunction GridItemWrapper(Component, styleHook) {\n  return (props) => {\n    const classes = styleHook()\n    return (\n      <Grid item xs={8} sm={6} md={3} className={classes.item}>\n        <Component {...props} />\n      </Grid>\n    )\n  }\n}\n\nfunction CustomScheduleCard(props) {\n  return GridItemWrapper(ScheduleCard, useStyles)(props)\n}\n\nexport function ScheduleCards({ schedules, unPublishSnackbar, ...props }) {\n  const cards = schedules\n    ? schedules.map(({ scheduleId, scheduleName, weekCount, programmes }) => {\n        return (\n          <CustomScheduleCard\n            key={scheduleId}\n            scheduleId={scheduleId}\n            scheduleName={scheduleName}\n            weekCount={weekCount}\n            programmes={programmes}\n            {...props}\n          />\n        )\n      })\n    : null\n\n  return <>{cards}</>\n}\n","import React from \"react\"\nimport { makeStyles } from \"@material-ui/core/styles\"\nimport { useActionSnackbar } from \"../../hooks/register\"\nimport httpService from \"../../services/ProgrammeServiceSingleton\"\n\nimport {\n  Card,\n  CardHeader,\n  List,\n  CardContent,\n  CardActions,\n  IconButton,\n  ListItem,\n  Typography,\n  ListItemText,\n  ListItemIcon,\n} from \"@material-ui/core\"\n\nimport { red } from \"@material-ui/core/colors\"\nimport { Delete, Edit, Share, Close } from \"@material-ui/icons\"\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    background: \"var(--txt-cl)\",\n    boxShadow: \"var(--bsd-md)\",\n  },\n  media: {},\n  expand: {\n    transform: \"rotate(0deg)\",\n    marginLeft: \"auto\",\n    transition: theme.transitions.create(\"transform\", {\n      duration: theme.transitions.duration.shortest,\n    }),\n  },\n  expandOpen: {\n    transform: \"rotate(180deg)\",\n  },\n  avatar: {\n    backgroundColor: red[500],\n  },\n  actionBtnWrapper: {\n    display: \"flex\",\n    justifyContent: \"space-evenly\",\n  },\n  scheduleActionBtn: {\n    border: \"none\",\n    boxShadow: \"none\",\n    padding: \"var(--pd-sm)\",\n    width: \"max-content\",\n    \"&:hover\": {\n      color: \"var(--secondary-cl)\",\n      background: \"#333\",\n    },\n  },\n}))\n\nfunction getAttribute(e, attr, isNumber = false) {\n  return isNumber\n    ? parseInt(e.currentTarget.getAttribute(attr))\n    : e.currentTarget.getAttribute(attr)\n}\n\nexport function ScheduleCard({\n  onEditScheduleClicked,\n  onPublishScheduleClicked,\n  onDeleteScheduleClicked,\n  createdAt,\n  weekCount,\n  scheduleName,\n  scheduleId,\n  programmes,\n  onActionSuccess,\n}) {\n  const classes = useStyles()\n\n  //think of a way to lazy load the hooks!\n  const {\n    callDecoratedUnpublishService,\n    UnpublishSnackbar,\n  } = useActionSnackbar(\"unpublish\", httpService.unpublishSchedule)\n\n  async function onUnpublishScheduleClicked(e) {\n    const targetProgramme = programmes.find(\n      ({ programmeId }) => programmeId === getAttribute(e, \"programmeId\", true)\n    )\n\n    if (\n      window.confirm(\n        `Are you sure you want to remove cycle ${scheduleName} from team ${targetProgramme.programmeName}`\n      )\n    ) {\n      //FIXME:\n      const { ok } = await callDecoratedUnpublishService(\n        scheduleId,\n        targetProgramme.programmeId\n      )\n      if (ok) {\n        onActionSuccess(\"unpublish\", { scheduleId, targetProgramme })\n      }\n    }\n  }\n\n  return (\n    <Card className={classes.root}>\n      <CardHeader\n        title={scheduleName ? scheduleName : \"Unnamed\"}\n        subheader={\n          weekCount ? `${weekCount} week(s)` : \"No Exercises Added Yet\"\n        } //TODO: should a created_at field be added?\n      />\n      <CardContent>\n        {programmes.length === 0 ? null : (\n          <List style={{ textAlign: \"left\" }} className=\"team-list\">\n            <Typography variant=\"subtitle1\">\n              Currently Used by Team(s):{\" \"}\n            </Typography>\n            {programmes.map((p) => (\n              <ListItem\n                button\n                key={p.programmeId}\n                onClick={onUnpublishScheduleClicked}\n                programmeid={p.programmeId}\n                scheduleid={scheduleId}\n                programmename={p.programmeName}\n                className=\"team-list-item\"\n              >\n                <ListItemText\n                  className=\"team-list-item-text\"\n                  primary={p.programmeName}\n                />\n                <ListItemIcon>\n                  <Close className=\"unpublish-schedule-icon\" fontSize=\"small\" />\n                </ListItemIcon>\n              </ListItem>\n            ))}\n          </List>\n        )}\n        <UnpublishSnackbar />\n      </CardContent>\n      <CardActions disableSpacing className={classes.actionBtnWrapper}>\n        <IconButton\n          className={classes.scheduleActionBtn}\n          aria-label=\"edit\"\n          onClick={onEditScheduleClicked}\n          scheduleid={scheduleId}\n        >\n          <Edit />\n        </IconButton>\n        <IconButton\n          className={classes.scheduleActionBtn}\n          aria-label=\"publish\"\n          onClick={onPublishScheduleClicked}\n          scheduleid={scheduleId}\n        >\n          <Share />\n        </IconButton>\n        <IconButton\n          className={classes.scheduleActionBtn}\n          aria-label=\"delete\"\n          onClick={onDeleteScheduleClicked}\n          scheduleid={scheduleId}\n        >\n          <Delete />\n        </IconButton>\n      </CardActions>\n    </Card>\n  )\n}\n","import React from \"react\"\nimport { Fab } from \"@material-ui/core\"\nimport { CloudUpload } from \"@material-ui/icons\"\nimport { AddScheduleFormDialog } from \"./register\"\n\nexport function AddScheduleFloatingButton({ onActionSuccess }) {\n  const [open, setOpen] = React.useState(false)\n\n  function onDialogOpenClicked() {\n    setOpen(true)\n  }\n\n  function handleClose() {\n    setOpen(false)\n  }\n  return (\n    <>\n      <Fab\n        onClick={onDialogOpenClicked}\n        variant=\"extended\"\n        aria-label=\"add\"\n        style={{ position: \"absolute\", left: \"5%\", top: \"13.5%\" }}\n      >\n        <CloudUpload />\n        <span\n          style={{ textAlign: \"center\" }}\n          className=\"add-schedule-btn-wrapper\"\n        >\n          New Cycle\n        </span>\n      </Fab>\n      <AddScheduleFormDialog\n        open={open}\n        handleClose={handleClose}\n        onActionSuccess={onActionSuccess}\n      />\n    </>\n  )\n}\n","import React from \"react\"\nimport { ScheduleUploader } from \"../schedules/register\"\nimport {\n  Dialog,\n  DialogActions,\n  DialogTitle,\n  DialogContent,\n  Typography,\n} from \"@material-ui/core\"\n\nexport function AddScheduleFormDialog({ handleClose, open, onActionSuccess }) {\n  return (\n    <Dialog\n      open={open}\n      onClose={handleClose}\n      aria-labelledby=\"form-dialog-title\"\n    >\n      <DialogTitle\n        style={{\n          backgroundColor: \"var(--txt-cl)\",\n        }}\n      >\n        <Typography style={{ fontWeight: \"var(--fw-md)\" }}>\n          New Cycle\n        </Typography>\n      </DialogTitle>\n      <DialogContent className=\"add-new-schedule-dialog\">\n        <ScheduleUploader onActionSuccess={onActionSuccess} />\n      </DialogContent>\n      <DialogActions\n        style={{\n          justifyContent: \"center\",\n          padding: \"0\",\n          backgroundColor: \"var(--txt-cl)\",\n        }}\n      >\n        <button onClick={handleClose} style={{ width: \"max-content\" }}>\n          Close\n        </button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n","import React from \"react\"\nimport { ScheduleReuploader } from \"../schedules/register\"\nimport { useActionSnackbar } from \"../../hooks/register\"\nimport {\n  Dialog,\n  DialogActions,\n  DialogTitle,\n  DialogContent,\n  Typography,\n} from \"@material-ui/core\"\nimport httpService from \"../../services/ProgrammeServiceSingleton\"\nimport { makeSchedulePayload } from \"../../services/register\"\n\nexport function ReuploadScheduleDialog({\n  onDialogCloseClicked,\n  open,\n  clickedSchedule,\n  onClickedScheduleNameChanged,\n  currentClickedScheduleName,\n  onActionSuccess,\n  canUpdate,\n  fileUploaded,\n  onFileUploaded,\n  buffer,\n  ...props\n}) {\n  const { callDecoratedRepostService, RepostSnackbar } = useActionSnackbar(\n    \"repost\",\n    httpService.repostSchedule\n  )\n\n  async function onSaveUpdateClicked() {\n    const data = makeSchedulePayload(\n      buffer,\n      [],\n      clickedSchedule.scheduleName,\n      false,\n      clickedSchedule.scheduleId\n    )\n\n    const { ok } = await callDecoratedRepostService(data)\n    if (ok) {\n      //don't need timetable to update UI\n      delete data.timetable\n      onActionSuccess(\"repost\", data)\n    }\n  }\n\n  return (\n    <Dialog\n      open={open}\n      onClose={onDialogCloseClicked}\n      aria-labelledby=\"form-dialog-title\"\n    >\n      <DialogTitle\n        style={{\n          backgroundColor: \"var(--txt-cl)\",\n        }}\n      >\n        <Typography style={{ fontWeight: \"var(--fw-md)\" }}>\n          Reupload Cycle\n        </Typography>\n      </DialogTitle>\n      <DialogContent className=\"add-new-schedule-dialog\">\n        <RepostSnackbar />\n        {clickedSchedule && (\n          <ScheduleReuploader\n            {...props}\n            onClickedScheduleNameChanged={onClickedScheduleNameChanged}\n            onFileUploaded={onFileUploaded}\n            scheduleName={clickedSchedule.scheduleName}\n            fileUploaded={fileUploaded}\n          />\n        )}\n      </DialogContent>\n      <DialogActions\n        style={{\n          display: \"flex\",\n          justifyContent: \"space-evenly\",\n          padding: \"0\",\n          backgroundColor: \"var(--txt-cl)\",\n        }}\n      >\n        <button\n          disabled={!canUpdate}\n          onClick={onSaveUpdateClicked}\n          style={{ width: \"max-content\" }}\n        >\n          Save\n        </button>\n        <button onClick={onDialogCloseClicked} style={{ width: \"max-content\" }}>\n          Close\n        </button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n","import React, { useState } from \"react\"\nimport { FileUploader, ScheduleNameInput } from \"./register\"\nimport { Grid } from \"@material-ui/core\"\nimport { ActionNotificationDiv } from \"../ActionNotificationDiv\"\n//a good candidate for Redux, since needed by many components, lets just do useState for now\n//snackBar good candidate for a factory function\n\nexport function ScheduleReuploader({\n  onClickedScheduleNameChanged,\n  onFileUploaded,\n  scheduleName,\n  isFileUploaded,\n}) {\n  const [actionStatus, setActionStatus] = useState({\n    action: \"File Upload\",\n    isActionSuccess: isFileUploaded,\n  })\n\n  function onCloseActionStatusDiv() {\n    setActionStatus({ action: null, isActionSuccess: null })\n  }\n\n  return (\n    <Grid\n      container\n      xs={8}\n      md={12}\n      lg={12}\n      style={{\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyContent: \"space-around\",\n      }}\n    >\n      <ScheduleNameInput\n        label=\"Cycle Name\"\n        onClickedScheduleNameChanged={onClickedScheduleNameChanged}\n        scheduleName={scheduleName}\n      />\n\n      <ActionNotificationDiv\n        actionStatus={actionStatus}\n        onCloseActionStatusDiv={onCloseActionStatusDiv}\n      />\n\n      {scheduleName.length > 0 ? (\n        <FileUploader onFileUploaded={onFileUploaded} />\n      ) : (\n        \"Schedule Name Must Not Be Empty\"\n      )}\n    </Grid>\n  )\n}\n","import React, { useState, useEffect } from \"react\"\nimport { ProgrammeOptions } from \"./register\"\nimport { Dialog, DialogActions, DialogTitle, Grid } from \"@material-ui/core\"\nimport { findIndexAndDelete } from \"../../services/register\"\nimport { useActionSnackbar, useFetchSnackbar } from \"../../hooks/register\"\nimport httpService from \"../../services/ProgrammeServiceSingleton\"\n\nexport function PublishScheduleDialog({\n  scheduleId,\n  onDialogCloseClicked,\n  open,\n  onActionSuccess,\n}) {\n  // const [isFetchSuccess, setIsFetchSuccess] = useState(null)\n  const [selectedProgrammeIds, setSelectedProgrammeIds] = useState([])\n  const [programmes, setProgrammes] = useState(null)\n\n  const { setIsFetchSuccess, FetchNotificationDiv } = useFetchSnackbar(\n    \"available programmes\"\n  )\n\n  const {\n    publishActionStatus,\n    callDecoratedPublishService,\n    PublishSnackbar,\n  } = useActionSnackbar(\"publish\", httpService.publishSchedule)\n\n  function onProgrammeChecked(e) {\n    const checkedProgrammeId = parseInt(e.target.value)\n    if (e.target.checked) {\n      setSelectedProgrammeIds([...selectedProgrammeIds, checkedProgrammeId])\n    } else {\n      setSelectedProgrammeIds((selectedProgrammeIds) => {\n        let newArr = [...selectedProgrammeIds]\n        findIndexAndDelete(checkedProgrammeId, newArr)\n        return newArr\n      })\n    }\n  }\n\n  async function onPublishScheduleClicked() {\n    const { ok } = await callDecoratedPublishService(\n      scheduleId,\n      selectedProgrammeIds\n    )\n\n    if (ok) {\n      onActionSuccess(\"publish\", {\n        scheduleId,\n        programmes: getAddedProgrammes(selectedProgrammeIds, programmes),\n      })\n    }\n  }\n\n  function getAddedProgrammes(selectedProgrammeIds, programmes) {\n    return programmes.filter((p) =>\n      selectedProgrammeIds.includes(p.programmeId)\n    )\n  }\n\n  useEffect(() => {\n    async function getAvailableProgrammesToPublish(scheduleId) {\n      const { ok, payload } = await httpService.getAvailableProgrammesToPublish(\n        scheduleId\n      )\n      if (ok) {\n        setIsFetchSuccess(true)\n        setProgrammes(payload)\n        return\n      }\n      setIsFetchSuccess(false)\n    }\n\n    if (open) {\n      getAvailableProgrammesToPublish(scheduleId)\n    }\n  }, [scheduleId, open, setIsFetchSuccess])\n\n  return (\n    <Grid item xs={10} sm={8} md={6}>\n      <Dialog\n        open={open}\n        onClose={onDialogCloseClicked}\n        aria-labelledby=\"form-dialog-title\"\n        style={{ overflow: \"hidden\" }}\n      >\n        <DialogTitle\n          style={{\n            backgroundColor: \"var(--txt-cl)\",\n            fontWeight: \"var(--fw-md)\",\n          }}\n        >\n          Publish Cycle\n        </DialogTitle>\n        <div className=\"publish-schedule-dialog\">\n          {programmes ? (\n            <ProgrammeOptions\n              programmes={programmes}\n              onProgrammeChecked={onProgrammeChecked}\n              label=\"Publish to Team\"\n            />\n          ) : (\n            <FetchNotificationDiv />\n          )}\n          {publishActionStatus.action ? <PublishSnackbar /> : null}\n        </div>\n        <DialogActions\n          style={{\n            justifyContent: \"space-around\",\n            padding: \"0\",\n            backgroundColor: \"var(--txt-cl)\",\n            overflow: \"hidden\",\n          }}\n        >\n          <button\n            disabled={\n              selectedProgrammeIds.length > 0 || !programmes ? false : true\n            }\n            onClick={onPublishScheduleClicked}\n            style={{ width: \"max-content\" }}\n          >\n            Publish\n          </button>\n          <button\n            onClick={onDialogCloseClicked}\n            style={{ width: \"max-content\" }}\n          >\n            Close\n          </button>\n        </DialogActions>\n      </Dialog>\n    </Grid>\n  )\n}\n","import React from \"react\"\nimport { TextField, makeStyles } from \"@material-ui/core\"\n\nconst useStyles = makeStyles((theme) => ({\n  scheduleName: {\n    marginBottom: \"var(--mg-sm)\",\n  },\n  input: {\n    fontFamily: \"var(--ff)\",\n    color: \"#001e18\",\n    marginBottom: \"var(--mg-sm)\",\n  },\n  formLabelRoot: {\n    fontFamily: \"var(--ff)\",\n    color: \"var(--txt-cl)\",\n  },\n  formLabelFocused: {\n    fontFamily: \"var(--ff)\",\n    color: \"var(--txt-cl)\",\n    \"'& label.Mui-focused'\": {\n      fontFamily: \"var(--ff)\",\n      color: \"var(--txt-cl)\",\n    },\n  },\n}))\n\nexport function ScheduleNameInput({\n  onClickedScheduleNameChanged,\n  scheduleName,\n  label,\n}) {\n  const classes = useStyles()\n  return (\n    <TextField\n      label={label}\n      className={classes.scheduleName}\n      onChange={onClickedScheduleNameChanged}\n      value={scheduleName}\n      InputProps={{ className: classes.input }}\n      InputLabelProps={{\n        className: classes.formLabelRoot,\n      }}\n    />\n  )\n}\n","import React, { useState } from \"react\"\nimport { BrowserRouter as Router, Redirect } from \"react-router-dom\"\n//https://reactrouter.com/web/api\n\nimport { NavBarControl, Footer, PageRoutes } from \"./app/register\"\n\nimport { LearnersPanel } from \"./components/learners/register\"\nimport { SchedulePanel } from \"./components/schedules/register\"\nimport {\n  InstructorLoginPage,\n  InstructorAccountPage,\n} from \"./components/home/register\"\n\nimport { UserAuth, NavHelpers } from \"./services/register\"\n\nconst allLinks = {\n  instructor: [\n    {\n      to: \"/instructor/schedules\",\n      label: \"Schedules\",\n      component: SchedulePanel,\n      isProtected: true,\n      display: true,\n    },\n    {\n      to: \"/instructor/learners\",\n      label: \"Learners Panel\",\n      component: LearnersPanel,\n      isProtected: true,\n      display: true,\n    },\n    {\n      to: \"/instructor/account\",\n      label: \"Account\",\n      component: InstructorAccountPage,\n      isProtected: true,\n      display: true,\n    },\n    {\n      to: \"/logout\",\n      label: \"Log Out\",\n      component: null,\n      isProtected: true,\n      display: true,\n    },\n  ],\n  learnerApp: [\n    {\n      to: \"/learner/login\",\n      label: \"Learner Space\",\n      isProtected: false,\n      display: true,\n    },\n  ],\n}\n\nexport function InstructorApp({ onAppChange }) {\n  const [isInstructorLoggedIn, setIsInstructorLoggedIn] = useState(\n    UserAuth.isAuthenticated()\n  )\n\n  const [links, setLinks] = useState(\n    UserAuth.isAuthenticated() ? allLinks.instructor : allLinks.learnerApp\n  )\n\n  function onInstructorLogIn() {\n    setLinks(allLinks.instructor)\n    setIsInstructorLoggedIn(true)\n  }\n\n  //lets see if there's any difference\n  function onInstructorLogOut(e) {\n    console.log(\"log me out!\")\n    UserAuth.clearToken()\n    NavHelpers.setCurrentPage(\"/instructor/login\")\n    setLinks(allLinks.learnerApp)\n    setIsInstructorLoggedIn(false)\n  }\n\n  return (\n    <Router>\n      <NavBarControl\n        links={links}\n        pageTitle=\"Otago Weightlifting Instructor Space\"\n        onLogOut={onInstructorLogOut}\n        onAppChange={onAppChange}\n      />\n      <div className=\"App main\">\n        {isInstructorLoggedIn ? (\n          <Redirect\n            to={\n              NavHelpers.getCurrentPage() !== \"/instructor/login\"\n                ? NavHelpers.getCurrentPage()\n                : \"/instructor/schedules\"\n            }\n          />\n        ) : (\n          <InstructorLoginPage onInstructorLogIn={onInstructorLogIn} />\n        )}\n        <PageRoutes links={links} />\n      </div>\n      <Footer />\n    </Router>\n  )\n}\n\nexport default InstructorApp\n","import React, { useState, useEffect } from \"react\"\n\nimport { PersonalBestsForm, LearnerSearchInput } from \"./register\"\nimport { FetchNotificationDivFactory } from \"../factoryComponent\"\nimport { ActionNotificationDiv } from \"../ActionNotificationDiv\"\n\nimport httpService from \"../../services/LearnerServiceSingleton\"\nimport { shallowEqual } from \"../../utils\"\nimport { NavHelpers } from \"../../services/register\"\n\nexport function LearnersPanel() {\n  NavHelpers.setCurrentPage(\"/instructor/learners\")\n  const [learners, setLearners] = useState([])\n  const [displayedLearners, setDisplayedLearners] = useState([])\n  const [searchPhrase, setSearchPhrase] = useState(\"\")\n  const [selectedLearner, setSelectedLearner] = useState(null)\n  const [canEditAndUpdate, setCanEditAndUpdate] = useState(false)\n  const [actionStatus, setActionStatus] = useState({\n    action: null,\n    isActionSuccess: null,\n  })\n\n  //maybe these can be combined into a useNotification hook?\n  const [isFetchSuccess, setIsFetchSuccess] = useState(null)\n  const FetchLearnersNotificationDiv = FetchNotificationDivFactory(\n    \"learners\",\n    \"Click On A Name\"\n  )\n\n  function onCloseActionStatusDiv(e) {\n    setActionStatus({ action: null, isActionSuccess: null })\n  }\n\n  function filterLearners(learners, phrase) {\n    const processedPhrase = phrase.trim().toLowerCase()\n\n    if (processedPhrase.length === 0) return learners\n\n    return learners.filter(\n      ({ firstName, lastName }) =>\n        firstName.toLowerCase().trim().startsWith(processedPhrase) ||\n        lastName.toLowerCase().trim().startsWith(processedPhrase)\n    )\n  }\n\n  function getLearnerById(id) {\n    //avoid filter if ur searching for just one and all items are unique\n    return learners.find(({ learnerId }) => learnerId === parseInt(id))\n  }\n\n  function onSearchPhraseChanged(e) {\n    const phrase = e.target.value\n\n    //the two operations are not synchronous!\n    setSearchPhrase(e.target.value)\n    //dont set it using the searchPhrase because React may not have updated it with the new value\n    setDisplayedLearners(filterLearners(learners, phrase))\n  }\n\n  function onLearnerItemClicked(e) {\n    const selected = getLearnerById(e.target.getAttribute(\"learnerId\"))\n    setSelectedLearner(selected)\n  }\n\n  function onPersonalBestsInputChange(e) {\n    const changedField = e.target.getAttribute(\"name\")\n    const newValue = e.target.value\n\n    //console.log(e.target.getAttribute(\"name\"))\n\n    setSelectedLearner((selectedLearner) => {\n      let newSelectedLearner = { ...selectedLearner }\n      newSelectedLearner[changedField] = newValue\n      return newSelectedLearner\n    })\n  }\n\n  //FIXME: this may break if user's currently filtering!\n  function updateUILearnerList(updatedLearnerIndex, action = \"UPDATE\") {\n    const newLearnersList = [...learners]\n    switch (action) {\n      default:\n        newLearnersList[updatedLearnerIndex] = selectedLearner\n        //updated the list because name can be updated\n        setLearners(newLearnersList)\n        setDisplayedLearners(\n          filterLearners(newLearnersList, `${selectedLearner.firstName}`)\n        )\n        setSearchPhrase(`${selectedLearner.firstName}`)\n        break\n      case \"DELETE\":\n        //remove the deleted learner\n        newLearnersList.splice(updatedLearnerIndex, 1)\n        //should go back to the full list after deleting\n        setDisplayedLearners(newLearnersList)\n        setLearners(newLearnersList)\n        //reset form\n        setSelectedLearner(null)\n        //reset searchPhrase\n        setSearchPhrase(\"\")\n        break\n    }\n  }\n\n  function getUpdatedLearnerIndex(learners, selectedLearner) {\n    return learners.findIndex(({ learnerId }) => {\n      return learnerId === selectedLearner.learnerId\n    })\n  }\n\n  async function onUpdatePersonalBests(e) {\n    const updatedLearnerIndex = getUpdatedLearnerIndex(\n      learners,\n      selectedLearner\n    )\n\n    if (\n      !window.confirm(\n        `Are you sure you want to update ${selectedLearner.firstName}'s record?`\n      )\n    ) {\n      setSelectedLearner(null)\n      setDisplayedLearners(learners)\n      setSearchPhrase(\"\")\n      return\n    } else {\n      //check if the selectedLearner actually changes\n      if (shallowEqual(learners[updatedLearnerIndex], selectedLearner)) {\n        console.log(\"No need to rerender or update!\")\n        return\n      }\n\n      setActionStatus({ action: \"update\", isActionSuccess: null })\n\n      const { ok } = await httpService.updateLearner(selectedLearner)\n\n      if (ok) {\n        //...when should you update?\n        updateUILearnerList(updatedLearnerIndex)\n\n        setActionStatus({ action: \"update\", isActionSuccess: true })\n      } else {\n        console.log(\"Updating failed!\", ok)\n        //refill the form with the old information\n        setSelectedLearner(learners[updatedLearnerIndex])\n        setSearchPhrase(selectedLearner.firstName)\n\n        setActionStatus({ action: \"update\", isActionSuccess: false })\n      }\n    }\n  }\n\n  function enableEditAndUpdate() {\n    setCanEditAndUpdate(!canEditAndUpdate)\n  }\n\n  async function onDeleteLearner(e) {\n    if (\n      !window.confirm(\n        `Are you sure you want to delete ${selectedLearner.firstName}'s record?`\n      )\n    ) {\n      setCanEditAndUpdate(false)\n      return\n    }\n\n    setActionStatus({ action: \"delete\", isActionSuccess: null })\n\n    const { ok } = await httpService.deleteLearner(selectedLearner.learnerId)\n\n    if (ok) {\n      setActionStatus({ action: \"delete\", isActionSuccess: true })\n      const updatedLearnerIndex = getUpdatedLearnerIndex(\n        learners,\n        selectedLearner\n      )\n      updateUILearnerList(updatedLearnerIndex, \"DELETE\")\n      console.log(\"Deleting ... Success!\")\n    } else {\n      setActionStatus({ action: \"delete\", isActionSuccess: false })\n      console.log(\"Deleting failed!\")\n    }\n  }\n\n  useEffect(() => {\n    async function fetchLearners() {\n      const { ok, payload } = await httpService.fetchLearners()\n\n      if (ok) {\n        //the two operations are not synchronous!\n        setLearners(payload)\n        setDisplayedLearners(payload)\n        setIsFetchSuccess(true)\n      } else {\n        setIsFetchSuccess(false)\n      }\n    }\n    fetchLearners()\n  }, [])\n\n  return (\n    <>\n      <ActionNotificationDiv\n        actionStatus={actionStatus}\n        onCloseActionStatusDiv={onCloseActionStatusDiv}\n      />\n      <div className=\"learnerPanelWrapper\" style={{ display: \"flex\" }}>\n        {isFetchSuccess ? (\n          <LearnerSearchInput\n            searchPhrase={searchPhrase}\n            onSearchPhraseChanged={onSearchPhraseChanged}\n            learners={learners}\n            displayedLearners={displayedLearners}\n            onLearnerItemClicked={onLearnerItemClicked}\n          />\n        ) : (\n          <FetchLearnersNotificationDiv isFetchSuccess={isFetchSuccess} />\n        )}\n        {selectedLearner ? (\n          <PersonalBestsForm\n            selectedLearner={selectedLearner}\n            onPersonalBestsInputChange={onPersonalBestsInputChange}\n            onUpdatePersonalBests={onUpdatePersonalBests}\n            canEditAndUpdate={canEditAndUpdate}\n            enableEditAndUpdate={enableEditAndUpdate}\n            onDeleteLearner={onDeleteLearner}\n          />\n        ) : (\n          <FetchLearnersNotificationDiv isFetchSuccess={isFetchSuccess} />\n        )}\n      </div>\n    </>\n  )\n}\n","import React from \"react\"\nimport { NavHelpers } from \"../../services/register\"\n\nexport function InstructorAccountPage({ onLogOutClicked }) {\n  NavHelpers.setCurrentPage(\"/instructor/account\")\n  return (\n    <>\n      <h1>Under Construction</h1>\n    </>\n  )\n}\n","import React from \"react\"\nimport { LearnerApp, InstructorApp } from \"./register\"\n\nexport function App({ currentPage, onAppChange }) {\n  return currentPage.includes(\"/instructor\") ? (\n    <InstructorApp onAppChange={onAppChange} />\n  ) : (\n    <LearnerApp onAppChange={onAppChange} />\n  )\n}\n","import React, { useState } from \"react\"\nimport { App } from \"./register\"\nimport { NavHelpers } from \"./services/register\"\nimport { ThemeProvider, createMuiTheme } from \"@material-ui/core/styles\"\n\nconst theme = createMuiTheme({\n  typography: {\n    fontFamily: [\"Montserrat\", \"sans-serif\"],\n  },\n  palette: {\n    primary: { main: \"#028090\" },\n    secondary: { main: \"#f0f3bd\" },\n  },\n})\n\nexport default function AppControl() {\n  //FIXME: this will always get back to instructor app and log the user in! Should have separate auth for different user. It could also be the routing as well, since refreshing instructor app pages work fine\n  const [currentPage, setCurrentPage] = useState(\n    NavHelpers.getCurrentPage() ? NavHelpers.getCurrentPage() : \"/learner/login\"\n  )\n\n  function onAppChange(e) {\n    const targetPage = e.target.getAttribute(\"to\")\n    console.log(targetPage)\n    NavHelpers.currentApp = targetPage\n    NavHelpers.setCurrentPage(targetPage)\n    setCurrentPage(targetPage)\n  }\n\n  return (\n    <ThemeProvider theme={theme}>\n      <App currentPage={currentPage} onAppChange={onAppChange} />\n    </ThemeProvider>\n  )\n}\n\n//if there is no current page, redirects to learner's login\n//learners should be redirect to schedule page after login\n//refreshing should reload the current page\n","import { configureStore } from \"@reduxjs/toolkit\"\nimport learnerSchedulesReducer from \"../reducers/learnerSchedulesSlice\"\nimport learnerPbsReducer from \"../reducers/learnerPbsSlice\"\nimport dailyExercisesReducer from \"../reducers/dailyExercisesSlice\"\n\nexport default configureStore({\n  reducer: {\n    learnerSchedules: learnerSchedulesReducer,\n    learnerPbs: learnerPbsReducer,\n    dailyExercises: dailyExercisesReducer,\n  },\n})\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport \"./style/resetBrowserStyle.css\"\nimport \"./style/style.css\"\n\n// import App from \"./App\"\nimport AppControl from \"./AppControl\"\nimport store from \"./app/store\"\nimport { Provider } from \"react-redux\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <AppControl />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n)\n\n//Use it to access match.params of the current <Route>.\n\n// import React from \"react\"\n// import ReactDOM from \"react-dom\"\n// import {\n//   BrowserRouter as Router,\n//   Switch,\n//   Route,\n//   useParams,\n// } from \"react-router-dom\"\n\n// function BlogPost() {\n//   let { slug } = useParams()\n//   return <div>Now showing post {slug}</div>\n// }\n\n// ReactDOM.render(\n//   <Router>\n//     <Switch>\n//       <Route exact path=\"/\">\n//         {() => <div>Home</div>}\n//       </Route>\n//       <Route path=\"/blog/:slug\" component={BlogPost} />\n//     </Switch>\n//   </Router>,\n//   document.getElementById(\"root\")\n// )\n"],"sourceRoot":""}